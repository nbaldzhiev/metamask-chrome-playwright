LavaPack.loadBundle([[4680,{"./headers":4681,b4a:3214,"fast-fifo":3659,streamx:4673},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){const{Writable:n,Readable:r,getStreamError:a}=e("streamx"),i=e("fast-fifo"),s=e("b4a"),o=e("./headers"),c=s.alloc(0);class d{constructor(){this.buffered=0,this.shifted=0,this.queue=new i,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return 0===this._buffered?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(0===e)return c;let t=this._next(e);if(e===t.byteLength)return t;const f=[t];for(;(e-=t.byteLength)>0;)t=this._next(e),f.push(t);return s.concat(f)}_next(e){const t=this.queue.peek(),f=t.byteLength-this._offset;if(e>=f){const e=this._offset?t.subarray(this._offset,t.byteLength):t;return this.queue.shift(),this._offset=0,this.buffered-=f,this.shifted+=f,e}return this.buffered-=e,this.shifted+=e,t.subarray(this._offset,this._offset+=e)}}class u extends r{constructor(e,t,f){super(),this.header=t,this.offset=f,this._parent=e}_read(e){0===this.header.size&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(a(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=h(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}}class l extends n{constructor(e){super(e),e||(e={}),this._buffer=new d,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=b,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e)return this.destroy(e),void this._continueWrite(e);this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=o.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),0===this._header.size||"directory"===this._header.type?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=o.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=o.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=o.decodePax(e);break;case"pax-header":this._pax=null===this._paxGlobal?o.decodePax(e):Object.assign({},this._paxGlobal,o.decodePax(e))}}_consumeLongHeader(){this._longHeader=!1,this._missing=h(this._header.size);const e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(e){return this._continueWrite(e),!1}return!0}_consumeStream(){const e=this._buffer.shiftFirst(this._missing);if(null===e)return!1;this._missing-=e.byteLength;const t=this._stream.push(e);return 0===this._missing?(this._stream.push(null),t&&this._stream._detach(),t&&!1===this._locked):t}_createStream(){return new u(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;)if(this._missing>0){if(null!==this._stream){if(!1===this._consumeStream())return;continue}if(!0===this._longHeader){if(this._missing>this._buffer.buffered)break;if(!1===this._consumeLongHeader())return!1;continue}const e=this._buffer.shiftFirst(this._missing);null!==e&&(this._missing-=e.byteLength)}else{if(this._buffer.buffered<512)break;if(null!==this._stream||!1===this._consumeHeader())return}this._continueWrite(null)}_continueWrite(e){const t=this._callback;this._callback=b,t(e)}_write(e,t){this._callback=t,this._buffer.push(e),this._update()}_final(e){this._finished=0===this._missing&&0===this._buffer.buffered,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(a(this)),e(null)}[Symbol.asyncIterator](){let e=null,t=null,f=null,n=null,r=null;const a=this;return this.on("entry",(function(e,a,i){r=i,a.on("error",b),t?(t({value:a,done:!1}),t=f=null):n=a})),this.on("error",(t=>{e=t})),this.on("close",(function(){if(i(e),!t)return;e?f(e):t({value:undefined,done:!0});t=f=null})),{[Symbol.asyncIterator](){return this},next:()=>new Promise(s),return:()=>o(null),throw:e=>o(e)};function i(e){if(!r)return;const t=r;r=null,t(e)}function s(r,s){return e?s(e):n?(r({value:n,done:!1}),void(n=null)):(t=r,f=s,i(null),void(a._finished&&t&&(t({value:undefined,done:!0}),t=f=null)))}function o(e){return a.destroy(e),i(e),new Promise(((t,f)=>{if(a.destroyed)return t({value:undefined,done:!0});a.once("close",(function(){e?f(e):t({value:undefined,done:!0})}))}))}}}function b(){}function h(e){return(e&=511)&&512-e}t.exports=function(e){return new l(e)}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/extract.js"}],[4681,{b4a:3214},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){const n=e("b4a"),r="0000000000000000000",a="7777777777777777777",i="0".charCodeAt(0),s=n.from([117,115,116,97,114,0]),o=n.from([i,i]),c=n.from([117,115,116,97,114,32]),d=n.from([32,0]),u=257,l=263;function b(e,t,f,n){for(;f<n;f++)if(e[f]===t)return f;return n}function h(e){let t=256;for(let f=0;f<148;f++)t+=e[f];for(let f=156;f<512;f++)t+=e[f];return t}function p(e,t){return(e=e.toString(8)).length>t?a.slice(0,t)+" ":r.slice(0,t-e.length)+e+" "}function m(e,t,f){if(128&(e=e.subarray(t,t+f))[t=0])return function(e){let t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}const f=[];let n;for(n=e.length-1;n>0;n--){const r=e[n];t?f.push(r):f.push(255-r)}let r=0;const a=f.length;for(n=0;n<a;n++)r+=f[n]*Math.pow(256,n);return t?r:-1*r}(e);{for(;t<e.length&&32===e[t];)t++;const f=(r=b(e,32,t,e.length),a=e.length,i=e.length,"number"!=typeof r?i:(r=~~r)>=a?a:r>=0||(r+=a)>=0?r:0);for(;t<f&&0===e[t];)t++;return f===t?0:parseInt(n.toString(e.subarray(t,f)),8)}var r,a,i}function y(e,t,f,r){return n.toString(e.subarray(t,b(e,0,t,t+f)),r)}function g(e){const t=n.byteLength(e);let f=Math.floor(Math.log(t)/Math.log(10))+1;return t+f>=Math.pow(10,f)&&f++,t+f+e}f.decodeLongPath=function(e,t){return y(e,0,e.length,t)},f.encodePax=function(e){let t="";e.name&&(t+=g(" path="+e.name+"\n")),e.linkname&&(t+=g(" linkpath="+e.linkname+"\n"));const f=e.pax;if(f)for(const e in f)t+=g(" "+e+"="+f[e]+"\n");return n.from(t)},f.decodePax=function(e){const t={};for(;e.length;){let f=0;for(;f<e.length&&32!==e[f];)f++;const r=parseInt(n.toString(e.subarray(0,f)),10);if(!r)return t;const a=n.toString(e.subarray(f+1,r-1)),i=a.indexOf("=");if(-1===i)return t;t[a.slice(0,i)]=a.slice(i+1),e=e.subarray(r)}return t},f.encode=function(e){const t=n.alloc(512);let f=e.name,r="";if(5===e.typeflag&&"/"!==f[f.length-1]&&(f+="/"),n.byteLength(f)!==f.length)return null;for(;n.byteLength(f)>100;){const e=f.indexOf("/");if(-1===e)return null;r+=r?"/"+f.slice(0,e):f.slice(0,e),f=f.slice(e+1)}return n.byteLength(f)>100||n.byteLength(r)>155||e.linkname&&n.byteLength(e.linkname)>100?null:(n.write(t,f),n.write(t,p(4095&e.mode,6),100),n.write(t,p(e.uid,6),108),n.write(t,p(e.gid,6),116),function(e,t,f){e.toString(8).length>11?function(e,t,f){t[f]=128;for(let n=11;n>0;n--)t[f+n]=255&e,e=Math.floor(e/256)}(e,t,f):n.write(t,p(e,11),f)}(e.size,t,124),n.write(t,p(e.mtime.getTime()/1e3|0,11),136),t[156]=i+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(e.type),e.linkname&&n.write(t,e.linkname,157),n.copy(s,t,u),n.copy(o,t,263),e.uname&&n.write(t,e.uname,265),e.gname&&n.write(t,e.gname,297),n.write(t,p(e.devmajor||0,6),329),n.write(t,p(e.devminor||0,6),337),r&&n.write(t,r,345),n.write(t,p(h(t),6),148),t)},f.decode=function(e,t,f){let r=0===e[156]?0:e[156]-i,a=y(e,0,100,t);const o=m(e,100,8),b=m(e,108,8),p=m(e,116,8),g=m(e,124,12),_=m(e,136,12),w=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(r),T=0===e[157]?null:y(e,157,100,t),v=y(e,265,32),E=y(e,297,32),k=m(e,329,8),S=m(e,337,8),A=h(e);if(256===A)return null;if(A!==m(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(function(e){return n.equals(s,e.subarray(u,263))}(e))e[345]&&(a=y(e,345,155,t)+"/"+a);else if(function(e){return n.equals(c,e.subarray(u,263))&&n.equals(d,e.subarray(l,265))}(e));else if(!f)throw new Error("Invalid tar header: unknown format.");return 0===r&&a&&"/"===a[a.length-1]&&(r=5),{name:a,mode:o,uid:b,gid:p,size:g,mtime:new Date(1e3*_),type:w,linkname:T,uname:v,gname:E,devmajor:k,devminor:S,pax:null}}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/headers.js"}],[4682,{"./extract":4680,"./pack":4683},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){f.extract=e("./extract"),f.pack=e("./pack")}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/index.js"}],[4683,{"./constants":4679,"./headers":4681,b4a:3214,streamx:4673},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){const{Readable:n,Writable:r,getStreamError:a}=e("streamx"),i=e("b4a"),s=e("./constants"),o=e("./headers"),c=i.alloc(1024);class d extends r{constructor(e,t,f){super({mapWritable:h,eagerOpen:!0}),this.written=0,this.header=t,this._callback=f,this._linkname=null,this._isLinkname="symlink"===t.type&&!t.linkname,this._isVoid="file"!==t.type&&"contiguous-file"!==t.type,this._finished=!1,this._pack=e,this._openCallback=null,null===this._pack._stream?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(null===this._callback)return;const t=this._callback;this._callback=null,t(e)}_continueOpen(){null===this._pack._stream&&(this._pack._stream=this);const e=this._openCallback;if(this._openCallback=null,null!==e){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,t){return this._isLinkname?(this._linkname=this._linkname?i.concat([this._linkname,e]):e,t(null)):this._isVoid?e.byteLength>0?t(new Error("No body allowed for this entry")):t():(this.written+=e.byteLength,this._pack.push(e)?t():void(this._pack._drain=t))}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?i.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),b(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return a(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}}class u extends n{constructor(e){super(e),this._drain=l,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,t,f){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");"function"==typeof t&&(f=t,t=null),f||(f=l),e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&s.S_IFMT){case s.S_IFBLK:return"block-device";case s.S_IFCHR:return"character-device";case s.S_IFDIR:return"directory";case s.S_IFIFO:return"fifo";case s.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?493:420),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=i.from(t));const n=new d(this,e,f);return i.isBuffer(t)?(e.size=t.byteLength,n.write(t),n.end(),n):(n._isVoid,n)}finalize(){this._stream||this._pending.length>0?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(c),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){const t=o.encode(e);if(t)return void this.push(t)}this._encodePax(e)}_encodePax(e){const t=o.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),f={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(o.encode(f)),this.push(t),b(this,t.byteLength),f.size=e.size,f.type=e.type,this.push(o.encode(f))}_doDrain(){const e=this._drain;this._drain=l,e()}_predestroy(){const e=a(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){const t=this._pending.shift();t.destroy(e),t._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}}function l(){}function b(e,t){(t&=511)&&e.push(c.subarray(0,512-t))}function h(e){return i.isBuffer(e)?e:i.from(e)}t.exports=function(e){return new u(e)}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/pack.js"}],[4684,{_process:4307,stream:4668},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){(function(f){(function(){var n=e("stream");function r(e,t,r){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var a=!1,i=!1,s=[],o=!1,c=new n;function d(){for(;s.length&&!c.paused;){var e=s.shift();if(null===e)return c.emit("end");c.emit("data",e)}}return c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(r&&!1===r.autoDestroy),c.write=function(t){return e.call(this,t),!c.paused},c.queue=c.push=function(e){return o||(null===e&&(o=!0),s.push(e),d()),c},c.on("end",(function(){c.readable=!1,!c.writable&&c.autoDestroy&&f.nextTick((function(){c.destroy()}))})),c.end=function(e){if(!a)return a=!0,arguments.length&&c.write(e),c.writable=!1,t.call(c),!c.readable&&c.autoDestroy&&c.destroy(),c},c.destroy=function(){if(!i)return i=!0,a=!0,s.length=0,c.writable=c.readable=!1,c.emit("close"),c},c.pause=function(){if(!c.paused)return c.paused=!0,c},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),d(),c.paused||c.emit("drain"),c},c}t.exports=r,r.through=r}).call(this)}).call(this,e("_process"))}}},{package:"debounce-stream>through",file:"node_modules/through/index.js"}],[4688,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports=function(e){if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new DataView(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new DataView(e);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}}}},{package:"base32-encode>to-data-view",file:"node_modules/to-data-view/index.js"}],[47,{"./AbstractPetnamesBridge":45,"@metamask/name-controller":1587,"@metamask/utils":2530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.AddressBookPetnamesBridge=void 0;var n=e("@metamask/name-controller"),r=e("@metamask/utils"),a=e("./AbstractPetnamesBridge");function i(e,t,f){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,f)}function s(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,c(e,t,"get"))}function o(e,t,f){return function(e,t,f){if(t.set)t.set.call(e,f);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=f}}(e,c(e,t,"set"),f),f}function c(e,t,f){if(!t.has(e))throw new TypeError("attempted to "+f+" private field on non-instance");return t.get(e)}var d=new WeakMap;class u extends a.AbstractPetnamesBridge{constructor({addressBookController:e,nameController:t,messenger:f}){super({isTwoWay:!0,nameController:t,messenger:f}),i(this,d,{writable:!0,value:void 0}),o(this,d,e)}getSourceEntries(){const e=[],{state:t}=s(this,d);for(const f of Object.keys(t.addressBook)){if(!(0,r.isStrictHexString)(f))continue;const a=t.addressBook[f];for(const r of Object.keys(a)){const a=t.addressBook[f][r],i=f.toLowerCase(),{name:s,isEns:o}=a;null!=s&&s.length&&null!=r&&r.length&&e.push({value:r,name:s,variation:i,type:n.NameType.ETHEREUM_ADDRESS,sourceId:o?"ens":undefined,origin:n.NameOrigin.ADDRESS_BOOK})}}return e}updateSourceEntry(e,t){e===a.ChangeType.DELETED?s(this,d).delete(t.variation,t.value):s(this,d).set(t.value,t.name,t.variation)}onSourceChange(e){this.messenger.subscribe("AddressBookController:stateChange",e)}}f.AddressBookPetnamesBridge=u}}},{package:"$root$",file:"app/scripts/lib/AddressBookPetnamesBridge.ts"}],[4700,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){var n,r,a,i=void 0,s=(n=Object.prototype.toString,r=Object.prototype.hasOwnProperty,{Class:function(e){return n.call(e).replace(/^\[object *|\]$/g,"")},HasProperty:function(e,t){return t in e},HasOwnProperty:function(e,t){return r.call(e,t)},IsCallable:function(e){return"function"==typeof e},ToInt32:function(e){return 0|e},ToUint32:function(e){return e>>>0}}),o=Math.LN2,c=Math.abs,d=Math.floor,u=Math.log,l=Math.min,b=Math.pow,h=Math.round;function p(e){if(m&&a){var t,f=m(e);for(t=0;t<f.length;t+=1)a(e,f[t],{value:e[f[t]],writable:!1,enumerable:!1,configurable:!1})}}a=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()?Object.defineProperty:function(e,t,f){if(!e===Object(e))throw new TypeError("Object.defineProperty called on non-object");return s.HasProperty(f,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(e,t,f.get),s.HasProperty(f,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(e,t,f.set),s.HasProperty(f,"value")&&(e[t]=f.value),e};var m=Object.getOwnPropertyNames||function(e){if(e!==Object(e))throw new TypeError("Object.getOwnPropertyNames called on non-object");var t,f=[];for(t in e)s.HasOwnProperty(e,t)&&f.push(t);return f};function y(e,t){var f=32-t;return e<<f>>f}function g(e,t){var f=32-t;return e<<f>>>f}function _(e){return[255&e]}function w(e){return y(e[0],8)}function T(e){return[255&e]}function v(e){return g(e[0],8)}function E(e){return[(e=h(Number(e)))<0?0:e>255?255:255&e]}function k(e){return[e>>8&255,255&e]}function S(e){return y(e[0]<<8|e[1],16)}function A(e){return[e>>8&255,255&e]}function C(e){return g(e[0]<<8|e[1],16)}function P(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function M(e){return y(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function I(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function x(e){return g(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function O(e,t,f){var n,r,a,i,s,h,p,m=(1<<t-1)-1;function y(e){var t=d(e),f=e-t;return f<.5?t:f>.5||t%2?t+1:t}for(e!=e?(r=(1<<t)-1,a=b(2,f-1),n=0):e===Infinity||e===-Infinity?(r=(1<<t)-1,a=0,n=e<0?1:0):0===e?(r=0,a=0,n=1/e==-Infinity?1:0):(n=e<0,(e=c(e))>=b(2,1-m)?(r=l(d(u(e)/o),1023),(a=y(e/b(2,r)*b(2,f)))/b(2,f)>=2&&(r+=1,a=1),r>m?(r=(1<<t)-1,a=0):(r+=m,a-=b(2,f))):(r=0,a=y(e/b(2,1-m-f)))),s=[],i=f;i;i-=1)s.push(a%2?1:0),a=d(a/2);for(i=t;i;i-=1)s.push(r%2?1:0),r=d(r/2);for(s.push(n?1:0),s.reverse(),h=s.join(""),p=[];h.length;)p.push(parseInt(h.substring(0,8),2)),h=h.substring(8);return p}function N(e,t,f){var n,r,a,i,s,o,c,d,u=[];for(n=e.length;n;n-=1)for(a=e[n-1],r=8;r;r-=1)u.push(a%2?1:0),a>>=1;return u.reverse(),i=u.join(""),s=(1<<t-1)-1,o=parseInt(i.substring(0,1),2)?-1:1,c=parseInt(i.substring(1,1+t),2),d=parseInt(i.substring(1+t),2),c===(1<<t)-1?0!==d?NaN:o*Infinity:c>0?o*b(2,c-s)*(1+d/b(2,f)):0!==d?o*b(2,-(s-1))*(d/b(2,f)):o<0?-0:0}function R(e){return N(e,11,52)}function D(e){return O(e,11,52)}function L(e){return N(e,8,23)}function j(e){return O(e,8,23)}!function(){var e=function(e){if((e=s.ToInt32(e))<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");var t;for(this.byteLength=e,this._bytes=[],this._bytes.length=e,t=0;t<this.byteLength;t+=1)this._bytes[t]=0;p(this)};f.ArrayBuffer=f.ArrayBuffer||e;var t=function(){};function n(f,n,r){var o;return o=function(t,f,n){var r,i,c,d;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===o)for(r=arguments[0],this.length=r.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,c=0;c<this.length;c+=1)this._setter(c,r._getter(c));else if("object"!=typeof arguments[0]||(arguments[0]instanceof e||"ArrayBuffer"===s.Class(arguments[0]))){if("object"!=typeof arguments[0]||!(arguments[0]instanceof e||"ArrayBuffer"===s.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=t,this.byteOffset=s.ToUint32(f),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=s.ToUint32(n),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(i=arguments[0],this.length=s.ToUint32(i.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,c=0;c<this.length;c+=1)d=i[c],this._setter(c,Number(d));else{if(this.length=s.ToInt32(arguments[0]),n<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0}this.constructor=o,p(this),function(e){if(a){if(e.length>1e5)throw new RangeError("Array too large for polyfill");var t;for(t=0;t<e.length;t+=1)f(t)}function f(t){a(e,t,{get:function(){return e._getter(t)},set:function(f){e._setter(t,f)},enumerable:!0,configurable:!1})}}(this)},o.prototype=new t,o.prototype.BYTES_PER_ELEMENT=f,o.prototype._pack=n,o.prototype._unpack=r,o.BYTES_PER_ELEMENT=f,o.prototype._getter=function(e){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if((e=s.ToUint32(e))>=this.length)return i;var t,f,n=[];for(t=0,f=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,f+=1)n.push(this.buffer._bytes[f]);return this._unpack(n)},o.prototype.get=o.prototype._getter,o.prototype._setter=function(e,t){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if((e=s.ToUint32(e))>=this.length)return i;var f,n,r=this._pack(t);for(f=0,n=this.byteOffset+e*this.BYTES_PER_ELEMENT;f<this.BYTES_PER_ELEMENT;f+=1,n+=1)this.buffer._bytes[n]=r[f]},o.prototype.set=function(e,t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var f,n,r,a,i,o,c,d,u,l;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(f=arguments[0],(r=s.ToUint32(arguments[1]))+f.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(d=this.byteOffset+r*this.BYTES_PER_ELEMENT,u=f.length*this.BYTES_PER_ELEMENT,f.buffer===this.buffer){for(l=[],i=0,o=f.byteOffset;i<u;i+=1,o+=1)l[i]=f.buffer._bytes[o];for(i=0,c=d;i<u;i+=1,c+=1)this.buffer._bytes[c]=l[i]}else for(i=0,o=f.byteOffset,c=d;i<u;i+=1,o+=1,c+=1)this.buffer._bytes[c]=f.buffer._bytes[o]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(n=arguments[0],a=s.ToUint32(n.length),(r=s.ToUint32(arguments[1]))+a>this.length)throw new RangeError("Offset plus length of array is out of range");for(i=0;i<a;i+=1)o=n[i],this._setter(r+i,Number(o))}},o.prototype.subarray=function(e,t){function f(e,t,f){return e<t?t:e>f?f:e}e=s.ToInt32(e),t=s.ToInt32(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=f(e,0,this.length);var n=(t=f(t,0,this.length))-e;return n<0&&(n=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,n)},o}var r=n(1,_,w),o=n(1,T,v),c=n(1,E,v),d=n(2,k,S),u=n(2,A,C),l=n(4,P,M),b=n(4,I,x),h=n(4,j,L),m=n(8,D,R);f.Int8Array=f.Int8Array||r,f.Uint8Array=f.Uint8Array||o,f.Uint8ClampedArray=f.Uint8ClampedArray||c,f.Int16Array=f.Int16Array||d,f.Uint16Array=f.Uint16Array||u,f.Int32Array=f.Int32Array||l,f.Uint32Array=f.Uint32Array||b,f.Float32Array=f.Float32Array||h,f.Float64Array=f.Float64Array||m}(),function(){function e(e,t){return s.IsCallable(e.get)?e.get(t):e[t]}var t,n=(t=new f.Uint16Array([4660]),18===e(new f.Uint8Array(t.buffer),0)),r=function(e,t,n){if(0===arguments.length)e=new f.ArrayBuffer(0);else if(!(e instanceof f.ArrayBuffer||"ArrayBuffer"===s.Class(e)))throw new TypeError("TypeError");if(this.buffer=e||new f.ArrayBuffer(0),this.byteOffset=s.ToUint32(t),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteLength=arguments.length<3?this.buffer.byteLength-this.byteOffset:s.ToUint32(n),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");p(this)};function a(t){return function(r,a){if((r=s.ToUint32(r))+t.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");r+=this.byteOffset;var i,o=new f.Uint8Array(this.buffer,r,t.BYTES_PER_ELEMENT),c=[];for(i=0;i<t.BYTES_PER_ELEMENT;i+=1)c.push(e(o,i));return Boolean(a)===Boolean(n)&&c.reverse(),e(new t(new f.Uint8Array(c).buffer),0)}}function i(t){return function(r,a,i){if((r=s.ToUint32(r))+t.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var o,c=new t([a]),d=new f.Uint8Array(c.buffer),u=[];for(o=0;o<t.BYTES_PER_ELEMENT;o+=1)u.push(e(d,o));Boolean(i)===Boolean(n)&&u.reverse(),new f.Uint8Array(this.buffer,r,t.BYTES_PER_ELEMENT).set(u)}}r.prototype.getUint8=a(f.Uint8Array),r.prototype.getInt8=a(f.Int8Array),r.prototype.getUint16=a(f.Uint16Array),r.prototype.getInt16=a(f.Int16Array),r.prototype.getUint32=a(f.Uint32Array),r.prototype.getInt32=a(f.Int32Array),r.prototype.getFloat32=a(f.Float32Array),r.prototype.getFloat64=a(f.Float64Array),r.prototype.setUint8=i(f.Uint8Array),r.prototype.setInt8=i(f.Int8Array),r.prototype.setUint16=i(f.Uint16Array),r.prototype.setInt16=i(f.Int16Array),r.prototype.setUint32=i(f.Uint32Array),r.prototype.setInt32=i(f.Int32Array),r.prototype.setFloat32=i(f.Float32Array),r.prototype.setFloat64=i(f.Float64Array),f.DataView=f.DataView||r}()}}},{package:"browserify>concat-stream>typedarray",file:"node_modules/typedarray/index.js"}],[4702,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const f=new Uint8Array(t);let n=0;for(const t of e)f.set(t,n),n+=t.length;return f}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/concat.js"}],[4703,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let f=0;f<e.byteLength;f++)if(e[f]!==t[f])return!1;return!0}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/equals.js"}],[4704,{multibase:4214},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){const{encoding:n}=e("multibase"),r=new TextEncoder;t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?r.encode(e):"ascii"===t?function(e){const t=new Uint8Array(e.length);for(let f=0;f<e.length;f++)t[f]=e.charCodeAt(f);return t}(e):n(t).decode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/from-string.js"}],[4705,{multibase:4214},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){const{encoding:n}=e("multibase"),r=new TextDecoder("utf8");t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?r.decode(e):"ascii"===t?function(e){let t="";for(let f=0;f<e.length;f++)t+=String.fromCharCode(e[f]);return t}(e):n(t).encode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/to-string.js"}],[4764,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports=function e(t,f){var a,i=0,s=0,o=f=f||0,c=t.length;do{if(o>=c||s>49)throw e.bytes=0,new RangeError("Could not decode varint");a=t[o++],i+=s<28?(a&r)<<s:(a&r)*Math.pow(2,s),s+=7}while(a>=n);return e.bytes=o-f,i};var n=128,r=127}}},{package:"sass-embedded>varint",file:"node_modules/varint/decode.js"}],[4765,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports=function e(t,f,i){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");f=f||[];var s=i=i||0;for(;t>=a;)f[i++]=255&t|n,t/=128;for(;t&r;)f[i++]=255&t|n,t>>>=7;return f[i]=0|t,e.bytes=i-s+1,f};var n=128,r=-128,a=Math.pow(2,31)}}},{package:"sass-embedded>varint",file:"node_modules/varint/encode.js"}],[4766,{"./decode.js":4764,"./encode.js":4765,"./length.js":4767},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"sass-embedded>varint",file:"node_modules/varint/index.js"}],[4767,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){var n=Math.pow(2,7),r=Math.pow(2,14),a=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),c=Math.pow(2,49),d=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(e){return e<n?1:e<r?2:e<a?3:e<i?4:e<s?5:e<o?6:e<c?7:e<d?8:e<u?9:10}}}},{package:"sass-embedded>varint",file:"node_modules/varint/length.js"}],[4776,{util:4743},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){f.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,f.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"@ensdomains/content-hash>multihashes>web-encoding",file:"node_modules/web-encoding/src/lib.js"}],[48,{"@metamask/base-controller":1184,"@metamask/obs-store":1752},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=e("@metamask/obs-store"),r=e("@metamask/base-controller");function a(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function i(e,t,f){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var f=e[Symbol.toPrimitive];if(f!==undefined){var n=f.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:f,enumerable:!0,configurable:!0,writable:!0}):e[t]=f,e}function s(e,t,f){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return f}var o=new WeakSet;class c extends n.ObservableStore{constructor({config:e,controllerMessenger:t,state:f,persist:n}){super(f),a(this,o),i(this,"config",{}),this.persist=n,this.controllerMessenger=t,e&&this.updateStructure(e)}updateStructure(e){this.config=e,this.removeAllListeners();const t={};for(const n of Object.keys(e)){var f;if(!e[n])throw new Error(`Undefined '${n}'`);const a=e[n];a.subscribe?e[n].subscribe((e=>{s(this,o,d).call(this,n,e)})):this.controllerMessenger.subscribe(`${a.name}:stateChange`,(t=>{let f=t;this.persist&&(f=(0,r.getPersistentState)(t,e[n].metadata)),s(this,o,d).call(this,n,f)}));const i=a.state??(null===(f=a.getState)||void 0===f?void 0:f.call(a));t[n]=this.persist&&e[n].metadata?(0,r.getPersistentState)(i,e[n].metadata):i}this.updateState(t)}getFlatState(){if(!this.config)return{};let e={};for(const t of Object.keys(this.config)){const f=this.config[t],n=f.getState?f.getState():f.state;e={...e,...n}}return e}}function d(e,t){const f=this.getState()[e];this.updateState({[e]:t}),this.emit("stateChange",{oldState:f,newState:t,controllerKey:e})}f.default=c}}},{package:"$root$",file:"app/scripts/lib/ComposableObservableStore.js"}],[4813,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM=f.AUTO_LOCK_TIMEOUT_ALARM=void 0;f.AUTO_LOCK_TIMEOUT_ALARM="AUTO_LOCK_TIMEOUT_ALARM",f.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM="METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM"}}},{package:"$root$",file:"shared/constants/alarms.js"}],[4820,{"@metamask/keyring-api":1516},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.ETH_EOA_METHODS=f.ETH_4337_METHODS=void 0;var n=e("@metamask/keyring-api");f.ETH_EOA_METHODS=[n.EthMethod.PersonalSign,n.EthMethod.SignTransaction,n.EthMethod.SignTypedDataV1,n.EthMethod.SignTypedDataV3,n.EthMethod.SignTypedDataV4],f.ETH_4337_METHODS=[n.EthMethod.PrepareUserOperation,n.EthMethod.PatchUserOperation,n.EthMethod.SignUserOperation]}}},{package:"$root$",file:"shared/constants/eth-methods.ts"}],[4826,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.LOG_EVENT=void 0;f.LOG_EVENT={VERSION_UPDATE:"Extension version update"}}}},{package:"$root$",file:"shared/constants/logs.ts"}],[4828,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.methodsRequiringNetworkSwitch=void 0;f.methodsRequiringNetworkSwitch=["eth_sendTransaction","eth_sendRawTransaction","wallet_switchEthereumChain","wallet_watchAsset","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign"]}}},{package:"$root$",file:"shared/constants/methods-tags.ts"}],[4847,{"./first-party-contracts":4821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.getExperience=f.TX_SIG_LEN=f.TRUSTED_SIGNERS=f.EXPERIENCES_TO_VERIFY=void 0;var n=e("./first-party-contracts");f.TX_SIG_LEN=130,f.EXPERIENCES_TO_VERIFY=[n.EXPERIENCES_TYPE.METAMASK_BRIDGE],f.TRUSTED_SIGNERS={[n.EXPERIENCES_TYPE.METAMASK_BRIDGE]:"0x533FbF047Ed13C20e263e2576e41c747206d1348"};f.getExperience=(e,t)=>{var f;return null===(f=Object.entries(n.FIRST_PARTY_CONTRACT_NAMES).find((([,f])=>{var n;return(null===(n=f[t])||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()})))||void 0===f?void 0:f[0]}}}},{package:"$root$",file:"shared/constants/verification.ts"}],[4863,{"@metamask/utils":2530,"readable-stream":4577},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.createCaipStream=f.CaipStream=void 0;var n=e("@metamask/utils"),r=e("readable-stream");function a(e,t,f){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var f=e[Symbol.toPrimitive];if(f!==undefined){var n=f.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:f,enumerable:!0,configurable:!0,writable:!0}):e[t]=f,e}class i extends r.Duplex{constructor(e){super({objectMode:!0}),a(this,"parent",void 0),this.parent=e}_read(){return undefined}_write(e,t,f){this.parent.push({type:"caip-x",data:e}),f()}}class s extends r.Duplex{constructor(){super({objectMode:!0}),a(this,"substream",void 0),this.substream=new i(this)}_read(){return undefined}_write(e,t,f){(0,n.isObject)(e)&&"caip-x"===e.type&&this.substream.push(e.data),f()}}f.CaipStream=s;f.createCaipStream=e=>{const t=new s;return(0,r.pipeline)(e,t,e,(e=>console.log("MetaMask CAIP stream",e))),t.substream}}}},{package:"$root$",file:"shared/modules/caip-stream.ts"}],[4874,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.getSmartTransactionMetricsProperties=void 0;f.getSmartTransactionMetricsProperties=(e,t)=>{const f=e.getIsSmartTransaction(),n={is_smart_transaction:f};if(!f)return n;const r=e.getSmartTransactionByMinedTxHash(t.hash),a=null==r?void 0:r.statusMetadata;return a?(n.smart_transaction_duplicated=a.duplicated,n.smart_transaction_timed_out=a.timedOut,n.smart_transaction_proxied=a.proxied,n):n}}}},{package:"$root$",file:"shared/modules/metametrics.ts"}],[4892,{"../../../shared/modules/mv3.utils":4875,loglevel:4170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.getSocketBackgroundToMocha=function(){return r};var n;(n=e("loglevel"))&&n.__esModule,e("../../../shared/modules/mv3.utils");let r}}},{package:"$root$",file:"test/e2e/background-socket/socket-background-to-mocha.ts"}],[4893,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.VERIFYING_PAYMASTER=f.TEST_SNAPS_SIMPLE_KEYRING_WEBSITE_URL=f.SIMPLE_ACCOUNT_FACTORY=f.GANACHE_PRIVATE_KEY=f.GANACHE_ACCOUNT=f.ERC_4337_ACCOUNT_SNAP_URL=f.ERC_4337_ACCOUNT_SALT=f.ERC_4337_ACCOUNT=f.ENTRYPOINT=f.DEFAULT_GANACHE_ETH_BALANCE_DEC=f.DEFAULT_FIXTURE_ACCOUNT=f.DEFAULT_BTC_ACCOUNT=f.DAPP_URL=f.DAPP_ONE_URL=f.DAPP_HOST_ADDRESS=f.BUNDLER_URL=void 0;f.GANACHE_ACCOUNT="0xe18035bf8712672935fdb4e5e431b1a0183d2dfc",f.GANACHE_PRIVATE_KEY="0x4cfd3e90fc78b0f86bf7524722150bb8da9c60cd532564d7ff43f5716514f553",f.DEFAULT_FIXTURE_ACCOUNT="0x5CfE73b6021E818B776b421B1c4Db2474086a7e1",f.ENTRYPOINT="0x18b06605539dc02ecD3f7AB314e38eB7c1dA5c9b",f.ERC_4337_ACCOUNT="0x8FCd29A7887f82463E0eA7332CB1ce431A4430F7",f.BUNDLER_URL="http://localhost:3000/rpc",f.ERC_4337_ACCOUNT_SNAP_URL="https://metamask.github.io/snap-account-abstraction-keyring/0.4.1/",f.ERC_4337_ACCOUNT_SALT="0x1",f.SIMPLE_ACCOUNT_FACTORY="0x4aFf835038b16dccDb1670103C4877A8F93E5219",f.TEST_SNAPS_SIMPLE_KEYRING_WEBSITE_URL="https://metamask.github.io/snap-simple-keyring/1.1.2/",f.VERIFYING_PAYMASTER="0xbdbDEc38ed168331b1F7004cc9e5392A2272C1D7",f.DEFAULT_GANACHE_ETH_BALANCE_DEC="25";const n=f.DAPP_HOST_ADDRESS="127.0.0.1:8080";f.DAPP_URL=`http://${n}`,f.DAPP_ONE_URL="http://127.0.0.1:8081",f.DEFAULT_BTC_ACCOUNT="bc1qg6whd6pc0cguh6gpp3ewujm53hv32ta9hdp252"}}},{package:"$root$",file:"test/e2e/constants.ts"}],[4894,{"../../shared/constants/network":4831,"../../shared/constants/onboarding":4834,"../stub/networks":4902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){const{mockNetworkStateOld:n}=e("../stub/networks"),{CHAIN_IDS:r}=e("../../shared/constants/network"),{FirstTimeFlowType:a}=e("../../shared/constants/onboarding");t.exports={defaultFixture:function(e=r.LOCALHOST){return{data:{AuthenticationController:{isSignedIn:!0},UserStorageController:{isProfileSyncingEnabled:!0},NotificationServicesController:{subscriptionAccountsSeen:[],isFeatureAnnouncementsEnabled:!1,isNotificationServicesEnabled:!1,isMetamaskNotificationsFeatureSeen:!1,metamaskNotificationsList:[],metamaskNotificationsReadList:[]},AccountsController:{internalAccounts:{selectedAccount:"d5e45e4a-3b04-4a09-a5e1-39762e5c6be4",accounts:{"d5e45e4a-3b04-4a09-a5e1-39762e5c6be4":{id:"d5e45e4a-3b04-4a09-a5e1-39762e5c6be4",address:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",metadata:{name:"Account 1",lastSelected:16655076e5,keyring:{type:"HD Key Tree"}},options:{},methods:["personal_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:"eip155:eoa"}}}},AlertController:{alertEnabledness:{unconnectedAccount:!0,web3ShimUsage:!0},unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}},AnnouncementController:{announcements:{8:{date:"2021-11-01",id:8,isShown:!1}}},NetworkOrderController:{orderedNetworkList:[{networkId:"0x1",networkRpcUrl:"https://mainnet.infura.io/v3/00000000000000000000000000000000"},{networkId:"0xe708",networkRpcUrl:"https://linea-mainnet.infura.io/v3/00000000000000000000000000000000"},{networkId:"0x539",networkRpcUrl:"http://localhost:8545"}]},AccountOrderController:{pinnedAccountList:[],hiddenAccountList:[]},AppStateController:{browserEnvironment:{},nftsDropdownState:{},connectedStatusPopoverHasBeenShown:!0,termsOfUseLastAgreed:"__FIXTURE_SUBSTITUTION__currentDateInMilliseconds",defaultHomeActiveTabName:null,fullScreenGasPollTokens:[],notificationGasPollTokens:[],popupGasPollTokens:[],qrHardware:{},recoveryPhraseReminderHasBeenShown:!0,recoveryPhraseReminderLastShown:"__FIXTURE_SUBSTITUTION__currentDateInMilliseconds",showTestnetMessageInDropdown:!0,trezorModel:null,newPrivacyPolicyToastClickedOrClosed:!0,newPrivacyPolicyToastShownDate:Date.now(),usedNetworks:{[r.MAINNET]:!0,[r.LINEA_MAINNET]:!0,[r.GOERLI]:!0,[r.LOCALHOST]:!0},snapsInstallPrivacyWarningShown:!0},BridgeController:{bridgeState:{bridgeFeatureFlags:{extensionSupport:!1,srcNetworkAllowlist:["0x1","0xa","0xe708"],destNetworkAllowlist:["0x1","0xa","0xe708"]}}},CurrencyController:{currentCurrency:"usd",currencyRates:{ETH:{conversionDate:1665507600,conversionRate:1700,usdConversionRate:1700}}},GasFeeController:{estimatedGasFeeTimeBounds:{},gasEstimateType:"none",gasFeeEstimates:{}},KeyringController:{vault:'{"data":"WHaP1FrrtV4zUonudIppDifsLHF39g6oPkVksAIdWAHBRzax1uy1asfAJprR7u72t4/HuYz5yPIFQrnNnv+hwQu9GRuty88VKMnvMy+sq8MNtoXI+C54bZpWa8r4iUQfa0Mj/cfJbpFpzOdF1ZYXahTfTcU5WsrHwvJew842CiJR4B2jmCHHXfm/DxLK3WazsVQwXJGx/U71UelGoOOrT8NI28EKrAwgPn+7Xmv0j92gmhau30N7Bo2fr6Zv","iv":"LfD8/tY1EjXzxuemSmDVdA==","keyMetadata":{"algorithm":"PBKDF2","params":{"iterations":600000}},"salt":"nk4xdpmMR+1s5BYe4Vnk++XAQwrISI2bCtbMg7V1wUA="}'},MetaMetricsController:{eventsBeforeMetricsOptIn:[],fragments:{},metaMetricsId:null,participateInMetaMetrics:!1,dataCollectionForMarketing:!1,traits:{},latestNonAnonymousEventTimestamp:0},MetaMetricsDataDeletionController:{metaMetricsDataDeletionId:null,metaMetricsDataDeletionTimestamp:0},NetworkController:{...n({id:"networkConfigurationId",chainId:e,nickname:"Localhost 8545",rpcUrl:"http://localhost:8545",ticker:"ETH",blockExplorerUrl:undefined}),providerConfig:{id:"networkConfigurationId"}},OnboardingController:{completedOnboarding:!0,firstTimeFlowType:a.import,onboardingTabs:{},seedPhraseBackedUp:!0},PermissionController:{subjects:{}},PreferencesController:{advancedGasFee:null,currentLocale:"en",useExternalServices:!0,dismissSeedBackUpReminder:!0,featureFlags:{},forgottenPassword:!1,identities:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{address:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",lastSelected:16655076e5,name:"Account 1"}},ipfsGateway:"dweb.link",knownMethodData:{},ledgerTransportType:"webhid",lostIdentities:{},openSeaEnabled:!1,preferences:{hideZeroBalanceTokens:!1,showExtensionInFullSizeView:!1,showFiatInTestnets:!1,showTestNetworks:!1,smartTransactionsOptInStatus:!1,useNativeCurrencyAsPrimaryCurrency:!0,petnamesEnabled:!0,showMultiRpcModal:!1,isRedesignedConfirmationsDeveloperEnabled:!1,showConfirmationAdvancedDetails:!1},selectedAddress:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",theme:"light",useBlockie:!1,useNftDetection:!1,useNonceField:!1,usePhishDetect:!0,useTokenDetection:!1,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,useRequestQueue:!0},QueuedRequestController:{queuedRequestCount:0},SelectedNetworkController:{domains:{}},SmartTransactionsController:{smartTransactionsState:{fees:{},liveness:!0,smartTransactions:{[r.MAINNET]:[]}}},SubjectMetadataController:{subjectMetadata:{"https://metamask.github.io":{extensionId:null,iconUrl:null,name:"MetaMask < = > Ledger Bridge",origin:"https://metamask.github.io",subjectType:"website"}}},TokensController:{allDetectedTokens:{},allIgnoredTokens:{},allTokens:{},detectedTokens:[],ignoredTokens:[],tokens:[]},TransactionController:{transactions:{}},config:{},firstTimeInfo:{date:16655076e5,version:"10.21.0"}}}},FIXTURE_STATE_METADATA_VERSION:74,E2E_SRP:"spread raise short crane omit tent fringe mandate neglect detail suspect cradle"}}}},{package:"$root$",file:"test/e2e/default-fixture.js"}],[4895,{"../../shared/constants/network":4831,"../stub/networks":4902,"./constants":4893,"./default-fixture":4894,"./seeder/smart-contracts":4899,"@metamask/controller-utils":1210,"@metamask/snaps-utils":2384,lodash:4164},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){const{WALLET_SNAP_PERMISSION_KEY:n,SnapCaveatType:r}=e("@metamask/snaps-utils"),{merge:a,mergeWith:i}=e("lodash"),{toHex:s}=e("@metamask/controller-utils"),{mockNetworkStateOld:o}=e("../stub/networks"),{CHAIN_IDS:c}=e("../../shared/constants/network"),{SMART_CONTRACTS:d}=e("./seeder/smart-contracts"),{DAPP_URL:u,DAPP_ONE_URL:l,DEFAULT_FIXTURE_ACCOUNT:b,ERC_4337_ACCOUNT:h}=e("./constants"),{defaultFixture:p,FIXTURE_STATE_METADATA_VERSION:m}=e("./default-fixture");t.exports=class{constructor({onboarding:e=!1,inputChainId:t=c.LOCALHOST}={}){this.fixture=!0===e?{data:{AppStateController:{browserEnvironment:{},nftsDropdownState:{},connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,fullScreenGasPollTokens:[],notificationGasPollTokens:[],popupGasPollTokens:[],qrHardware:{},recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:"__FIXTURE_SUBSTITUTION__currentDateInMilliseconds",showTestnetMessageInDropdown:!0,trezorModel:null,usedNetworks:{[c.MAINNET]:!0,[c.LINEA_MAINNET]:!0,[c.GOERLI]:!0,[c.LOCALHOST]:!0}},NetworkController:{...o({id:"networkConfigurationId",chainId:c.LOCALHOST,nickname:"Localhost 8545",rpcUrl:"http://localhost:8545",ticker:"ETH",blockExplorerUrl:undefined}),providerConfig:{id:"networkConfigurationId"}},PreferencesController:{advancedGasFee:{},currentLocale:"en",dismissSeedBackUpReminder:!1,featureFlags:{},forgottenPassword:!1,identities:{},ipfsGateway:"dweb.linkssssss",knownMethodData:{},ledgerTransportType:"webhid",lostIdentities:{},openSeaEnabled:!1,preferences:{hideZeroBalanceTokens:!1,showExtensionInFullSizeView:!1,showFiatInTestnets:!1,showTestNetworks:!1,smartTransactionsOptInStatus:!1,useNativeCurrencyAsPrimaryCurrency:!0,petnamesEnabled:!0,showMultiRpcModal:!1,isRedesignedConfirmationsDeveloperEnabled:!1,showConfirmationAdvancedDetails:!1},useExternalServices:!0,theme:"light",useBlockie:!1,useNftDetection:!1,useNonceField:!1,usePhishDetect:!0,useTokenDetection:!1,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,useRequestQueue:!0},QueuedRequestController:{queuedRequestCount:0},SelectedNetworkController:{domains:{}},SmartTransactionsController:{smartTransactionsState:{fees:{},liveness:!0,smartTransactions:{[c.MAINNET]:[]}}},TokensController:{allDetectedTokens:{},allIgnoredTokens:{},allTokens:{},detectedTokens:[],ignoredTokens:[],tokens:[]},TransactionController:{},config:{},firstTimeInfo:{date:16655076e5,version:"10.21.0"}}}:p(t)}withAccountTracker(e){return a(this.fixture.data.AccountTracker,e),this}withAddressBookController(e){return a(this.fixture.data.AddressBookController?this.fixture.data.AddressBookController:this.fixture.data.AddressBookController={},e),this}withAlertController(e){return a(this.fixture.data.AlertController,e),this}withAnnouncementController(e){return a(this.fixture.data.AnnouncementController,e),this}withNetworkOrderController(e){return a(this.fixture.data.NetworkOrderController,e),this}withAccountOrderController(e){return a(this.fixture.data.AccountOrderController,e),this}withAppStateController(e){return a(this.fixture.data.AppStateController,e),this}withCurrencyController(e){return a(this.fixture.data.CurrencyController,e),this}withConversionRateDisabled(){return this.withPreferencesController({useCurrencyRateCheck:!1})}withConversionRateEnabled(){return this.withPreferencesController({useCurrencyRateCheck:!0})}withGasFeeController(e){return a(this.fixture.data.GasFeeController,e),this}withKeyringController(e){return a(this.fixture.data.KeyringController,e),this}withKeyringControllerAdditionalAccountVault(){return this.withKeyringController({vault:'{"data":"XBb1KJiGsxNOhcTC/xtzaNmpDqnMibJ/HCIjMGUHF/jPIghM63+xkoGcko9T2NKjeMyt2QLbl7K9tr0/qQgbAJP/LUn6gfovkajBdeBQ5N/qztdw7uGJsnrKnzo1krmb2wWeFstwoolcZ9GYwhYVSmCO/tYba50eanY2XvmFheT1ghowtiFmTIGRWV2X1HacnpI4n0rW88ZyBaVuOJOIJGEBiiTD+b0V5l9Tv4sFEms4jvatJwhjDQnx1HmyQE3K64+W5yJe764B0ZdcQ6j2dyIaGgutcz8PoQLBJR1uo78fufZeFzk1gk/BreXn2+4vQnPxQ3prhnXHO4S+7Kj1h2ticxYb3XWnprFLWyksu9ChMyqDXwgM6edLBRDH2jz/IMuC5g9JhABl7PsSH+001z/uBx3GvRTFviFF9dztf195/EPy8YbuYUVbYtJy1aPSju84efWYvb7GrzrmgFnbeh2BpjyWqHoCTdw8fhdm7HQO8GFF7JdGtoIpjkhwPrudIQeIYhGCezd+n5GFp3mdmFNrLbOVFgxufTdY6hlYkg6c5XuHC2VnWCSPwWKIn6t9VuvuyIxXBnol/bgYC8R/d99ctkPDHykigQcgr6cCnhPOwUFOLwrmXqm9HQeWiKb8WxwdGeRnblS+fhFhB+lSy7RvyTUb7HFogDPnDLP/LlUFxdSNNBgqNJU1Dc07Np65PZrpsPvSCfkFttzTytHswhtTEMOg/faaH2D6AwIGbh5Z9cubiNcMrdD75aT1WGuecJ8P7uOMYJq9C7e5l/35","iv":"U81Cv/oryQ1DI9lRezx1iw==","keyMetadata":{"algorithm":"PBKDF2","params":{"iterations":600000}},"salt":"ejIn0xx5qZMA0m2ekjvXJF2pJa8ocL11wEdNIFJsKZQ="}'})}withKeyringControllerImportedAccountVault(){return this.withKeyringController({vault:'{"data":"NlxYVSDJJV4B1DWM+fZ0KX1K2lIU9ozK3WMbbL23WEY036umZ9//qB+bN9R1jKMm6xqHGSGgq9EteFMy2Ix5Bx1/c4hV2QquFRTEzPB4TkQ6+P5eJUvgvZ7vqvVU+2W8719T1oz/O7DH7HbO05JPLD1RBY+XOyHzUzAgwmXq0mwxNpqji3ejHyrjZ/1l06igircW/qysLcjZFZ52Vv4a/q1zCL37/4heHDRVmfEob//ulUbJ/5M=","iv":"b9n77dsUqvww9nGcWfPuIA==","keyMetadata":{"algorithm":"PBKDF2","params":{"iterations":600000}},"salt":"XrmM930Jqnb7C9Ow5NErAMkSGR3vuMLsqUrkGjzpwaY="}'})}withKeyringControllerOldVault(){return this.withKeyringController({vault:'{"data":"s6TpYjlUNsn7ifhEFTkuDGBUM1GyOlPrim7JSjtfIxgTt8/6MiXgiR/CtFfR4dWW2xhq85/NGIBYEeWrZThGdKGarBzeIqBfLFhw9n509jprzJ0zc2Rf+9HVFGLw+xxC4xPxgCS0IIWeAJQ+XtGcHmn0UZXriXm8Ja4kdlow6SWinB7sr/WM3R0+frYs4WgllkwggDf2/Tv6VHygvLnhtzp6hIJFyTjh+l/KnyJTyZW1TkZhDaNDzX3SCOHT","iv":"FbeHDAW5afeWNORfNJBR0Q==","salt":"TxZ+WbCW6891C9LK/hbMAoUsSEW1E8pyGLVBU6x5KR8="}'})}withMetaMetricsController(e){return a(this.fixture.data.MetaMetricsController,e),this}withNetworkController(e){return a(this.fixture.data.NetworkController,e),this.fixture.data.NetworkController.providerConfig={id:this.fixture.data.NetworkController.selectedNetworkClientId},this}withNetworkControllerOnMainnet(){return this.withNetworkController({selectedNetworkClientId:"mainnet"})}withNetworkControllerOnOptimism(){return this.withNetworkController({networkConfigurations:{networkConfigurationId:{chainId:c.OPTIMISM,nickname:"Localhost 8545",rpcPrefs:{},rpcUrl:"https://mainnet.infura.io",ticker:"ETH",networkConfigurationId:"networkConfigurationId",id:"networkConfigurationId"}}})}withNetworkControllerDoubleGanache(){const e=o({id:"76e9cd59-d8e2-47e7-b369-9c205ccb602c",rpcUrl:"http://localhost:8546",chainId:"0x53a",ticker:"ETH",nickname:"Localhost 8546"});return delete e.selectedNetworkClientId,this.withNetworkController(e)}withNetworkControllerTripleGanache(){this.withNetworkControllerDoubleGanache();const e=o({rpcUrl:"http://localhost:7777",chainId:"0x3e8",ticker:"ETH",nickname:"Localhost 7777",blockExplorerUrl:undefined});return delete e.selectedNetworkClientId,a(this.fixture.data.NetworkController,e),this}withNftController(e){return a(this.fixture.data.NftController?this.fixture.data.NftController:this.fixture.data.NftController={},e),this}withNftControllerERC1155(){return this.withNftController({allNftContracts:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{[s(1337)]:[{address:`__FIXTURE_SUBSTITUTION__CONTRACT${d.ERC1155}`}]}},allNfts:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{[s(1337)]:[{address:`__FIXTURE_SUBSTITUTION__CONTRACT${d.ERC1155}`,tokenId:"1",favorite:!1,isCurrentlyOwned:!0,name:"Rocks",description:"This is a collection of Rock NFTs.",image:"ipfs://bafkreifvhjdf6ve4jfv6qytqtux5nd4nwnelioeiqx5x2ez5yrgrzk7ypi",standard:"ERC1155"}]}},ignoredNfts:[]})}withNftControllerERC721(){return this.withNftController({allNftContracts:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{[s(1337)]:[{address:`__FIXTURE_SUBSTITUTION__CONTRACT${d.NFTS}`,name:"TestDappNFTs",symbol:"TDC"}]}},allNfts:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{[s(1337)]:[{address:`__FIXTURE_SUBSTITUTION__CONTRACT${d.NFTS}`,description:"Test Dapp NFTs for testing.",favorite:!1,image:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjM1MCIgd2lkdGg9IjM1MCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdGggaWQ9Ik15UGF0aCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZWQiIGQ9Ik0xMCw5MCBROTAsOTAgOTAsNDUgUTkwLDEwIDUwLDEwIFExMCwxMCAxMCw0MCBRMTAsNzAgNDUsNzAgUTcwLDcwIDc1LDUwIiAvPjwvZGVmcz48dGV4dD48dGV4dFBhdGggaHJlZj0iI015UGF0aCI+UXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nLjwvdGV4dFBhdGg+PC90ZXh0Pjwvc3ZnPg==",isCurrentlyOwned:!0,name:"Test Dapp NFTs #1",standard:"ERC721",tokenId:"1"}]}},ignoredNfts:[]})}withNotificationServicesController(e){return i(this.fixture.data.NotificationServicesController,e,((e,t)=>(Array.isArray(e)&&e.concat(t),undefined))),this}withOnboardingController(e){return a(this.fixture.data.OnboardingController,e),this}withPermissionController(e){return a(this.fixture.data.PermissionController,e),this}withBridgeControllerDefaultState(){return this.fixture.data.BridgeController={bridgeState:{bridgeFeatureFlags:{destNetworkAllowlist:[],extensionSupport:!1,srcNetworkAllowlist:[]}}},this}withPermissionControllerConnectedToTestDapp({restrictReturnedAccounts:e=!0,account:t=""}={}){const f=t||b;return this.withPermissionController({subjects:{[u]:{origin:u,permissions:{eth_accounts:{id:"ZaqPEWxyhNCJYACFw93jE",parentCapability:"eth_accounts",invoker:u,caveats:e&&[{type:"restrictReturnedAccounts",value:[f.toLowerCase(),"0x09781764c08de8ca82e156bbf156a3ca217c7950",h.toLowerCase()]}],date:1664388714636}}}}})}withPermissionControllerSnapAccountConnectedToTestDapp(e=!0){return this.withPermissionController({subjects:{[u]:{origin:u,permissions:{eth_accounts:{id:"ZaqPEWxyhNCJYACFw93jE",parentCapability:"eth_accounts",invoker:u,caveats:e&&[{type:"restrictReturnedAccounts",value:["0x09781764c08de8ca82e156bbf156a3ca217c7950"]}],date:1664388714636}}}}})}withPermissionControllerConnectedToTwoTestDapps(e=!0){return this.withPermissionController({subjects:{[u]:{origin:u,permissions:{eth_accounts:{id:"ZaqPEWxyhNCJYACFw93jE",parentCapability:"eth_accounts",invoker:u,caveats:e&&[{type:"restrictReturnedAccounts",value:["0x5cfe73b6021e818b776b421b1c4db2474086a7e1","0x09781764c08de8ca82e156bbf156a3ca217c7950"]}],date:1664388714636}}},[l]:{origin:l,permissions:{eth_accounts:{id:"AqPEWxyhNCJYACFw93jE4",parentCapability:"eth_accounts",invoker:l,caveats:e&&[{type:"restrictReturnedAccounts",value:["0x5cfe73b6021e818b776b421b1c4db2474086a7e1","0x09781764c08de8ca82e156bbf156a3ca217c7950"]}],date:1664388714636}}}}})}withPermissionControllerConnectedToSnapDapp(){return this.withPermissionController({subjects:{"https://metamask.github.io":{origin:"https://metamask.github.io",permissions:{[n]:{caveats:[{type:r.SnapIds,value:{"npm@metamask/test-snap-bip32":{},"npm@metamask/test-snap-bip44":{},"npm@metamask/test-snap-error":{},"npm@metamask/test-snap-managestate":{},"npm@metamask/test-snap-notification":{}}}],id:"CwdJq0x8N_b9FNxn6dVuP",parentCapability:n,invoker:"https://metamask.github.io",date:1664388714636}}}}})}withPermissionLogController(e){return a(this.fixture.data.PermissionLogController?this.fixture.data.PermissionLogController:this.fixture.data.PermissionLogController={},e),this}withPreferencesController(e){return a(this.fixture.data.PreferencesController,e),this}withPreferencesControllerAdditionalAccountIdentities(){return this.withPreferencesController({identities:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{address:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",lastSelected:16655076e5,name:"Account 1"},"0x09781764c08de8ca82e156bbf156a3ca217c7950":{address:"0x09781764c08de8ca82e156bbf156a3ca217c7950",lastSelected:16655078e5,name:"Account 2"}}})}withPreferencesControllerImportedAccountIdentities(){return this.withPreferencesController({identities:{"0x0cc5261ab8ce458dc977078a3623e2badd27afd3":{name:"Account 1",address:"0x0cc5261ab8ce458dc977078a3623e2badd27afd3",lastSelected:16655076e5},"0x3ed0ee22e0685ebbf07b2360a8331693c413cc59":{name:"Account 2",address:"0x3ed0ee22e0685ebbf07b2360a8331693c413cc59"},"0xd38d853771fb546bd8b18b2f3638491bc0b0e906":{name:"Account 3",address:"0xd38d853771fb546bd8b18b2f3638491bc0b0e906"}},selectedAddress:"0x0cc5261ab8ce458dc977078a3623e2badd27afd3"})}withPreferencesControllerPetnamesDisabled(){return this.withPreferencesController({preferences:{petnamesEnabled:!1}})}withPreferencesControllerTxSimulationsDisabled(){return this.withPreferencesController({useTransactionSimulations:!1})}withPreferencesControllerAndFeatureFlag(e){return a(this.fixture.data.PreferencesController,e),this}withAccountsController(e){return a(this.fixture.data.AccountsController,e),this}withAccountsControllerImportedAccount(){return this.withAccountsController({internalAccounts:{selectedAccount:"2fdb2de6-80c7-4d2f-9f95-cb6895389843",accounts:{"2fdb2de6-80c7-4d2f-9f95-cb6895389843":{id:"2fdb2de6-80c7-4d2f-9f95-cb6895389843",address:"0x0cc5261ab8ce458dc977078a3623e2badd27afd3",options:{},methods:["personal_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:"eip155:eoa",metadata:{name:"Account 1",lastSelected:16655076e5,keyring:{type:"HD Key Tree"}}},"58093703-57e9-4ea9-8545-49e8a75cb084":{id:"58093703-57e9-4ea9-8545-49e8a75cb084",address:"0x3ed0ee22e0685ebbf07b2360a8331693c413cc59",options:{},methods:["personal_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:"eip155:eoa",metadata:{name:"Account 2",keyring:{type:"HD Key Tree"}}},"dd658aab-abf2-4f53-b735-c8a57151d447":{id:"dd658aab-abf2-4f53-b735-c8a57151d447",address:"0xd38d853771fb546bd8b18b2f3638491bc0b0e906",options:{},methods:["personal_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:"eip155:eoa",metadata:{name:"Account 3",keyring:{type:"HD Key Tree"}}}}}})}withAccountsControllerAdditionalAccountIdentities(){return this.withAccountsController({internalAccounts:{accounts:{"d5e45e4a-3b04-4a09-a5e1-39762e5c6be4":{id:"d5e45e4a-3b04-4a09-a5e1-39762e5c6be4",address:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",options:{},methods:["personal_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:"eip155:eoa",metadata:{name:"Account 1",lastSelected:16655076e5,keyring:{type:"HD Key Tree"}}},"e9976a84-110e-46c3-9811-e2da7b5528d3":{id:"e9976a84-110e-46c3-9811-e2da7b5528d3",address:"0x09781764c08de8ca82e156bbf156a3ca217c7950",options:{},methods:["personal_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:"eip155:eoa",metadata:{name:"Account 2",lastSelected:16655078e5,keyring:{type:"HD Key Tree"}}}}},selectedAccount:"d5e45e4a-3b04-4a09-a5e1-39762e5c6be4"})}withPreferencesControllerNftDetectionEnabled(){return this.withPreferencesController({openSeaEnabled:!0,useNftDetection:!0})}withSelectedNetworkController(e){return a(this.fixture.data.SelectedNetworkController,e),this}withSelectedNetworkControllerPerDomain(){return a(this.withSelectedNetworkController({domains:{[u]:"networkConfigurationId",[l]:"76e9cd59-d8e2-47e7-b369-9c205ccb602c"}}),this.withPreferencesControllerUseRequestQueueEnabled())}withPreferencesControllerUseRequestQueueEnabled(){return a(this.withPreferencesController({useRequestQueue:!0}))}withSmartTransactionsController(e){return a(this.fixture.data.SmartTransactionsController,e),this}withSubjectMetadataController(e){return a(this.fixture.data.SubjectMetadataController,e),this}withTokenListController(e){return a(this.fixture.data.TokenListController?this.fixture.data.TokenListController:this.fixture.data.TokenListController={},e),this}withTokensController(e){return a(this.fixture.data.TokensController,e),this}withBadPreferencesControllerState(){return a(this.fixture.data,{PreferencesController:5}),this}withTokensControllerERC20({chainId:e=1337}={}){return a(this.fixture.data.TokensController,{tokens:[{address:`__FIXTURE_SUBSTITUTION__CONTRACT${d.HST}`,symbol:"TST",decimals:4,image:"https://static.cx.metamask.io/api/v1/tokenIcons/1337/0x581c3c1a2a4ebde2a0df29b5cf4c116e42945947.png",isERC721:!1,aggregators:[]}],ignoredTokens:[],detectedTokens:[],allTokens:{[s(e)]:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":[{address:`__FIXTURE_SUBSTITUTION__CONTRACT${d.HST}`,symbol:"TST",decimals:4,image:"https://static.cx.metamask.io/api/v1/tokenIcons/1337/0x581c3c1a2a4ebde2a0df29b5cf4c116e42945947.png",isERC721:!1,aggregators:[]}]}},allIgnoredTokens:{},allDetectedTokens:{}}),this}withTransactionController(e){return a(this.fixture.data.TransactionController?this.fixture.data.TransactionController:this.fixture.data.TransactionController={},e),this}withTransactionControllerApprovedTransaction(){return this.withTransactionController({transactions:{"13a01e77-a368-4bb9-aba9-e7435580e3b9":{chainId:c.LOCALHOST,history:[{chainId:c.LOCALHOST,id:"13a01e77-a368-4bb9-aba9-e7435580e3b9",loadingDefaults:!0,origin:"metamask",status:"unapproved",time:1617228030067,txParams:{from:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",gas:"0x61a8",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00",to:"0x2f318C334780961FB129D2a6c30D0763d9a5C970",type:"0x2",value:"0xde0b6b3a7640000"},type:"simpleSend"},[{note:"Added new unapproved transaction.",op:"replace",path:"/loadingDefaults",timestamp:1617228030069,value:!1}],[{op:"add",path:"/txParams/nonce",value:"0x0",note:"transactions#approveTransaction",timestamp:1617228031069}]],id:"13a01e77-a368-4bb9-aba9-e7435580e3b9",loadingDefaults:!1,origin:"metamask",primaryTransaction:{chainId:c.LOCALHOST,id:"13a01e77-a368-4bb9-aba9-e7435580e3b9",loadingDefaults:!0,origin:"metamask",status:"approved",time:1617228030067,txParams:{from:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",gas:"0x61a8",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00",to:"0x2f318C334780961FB129D2a6c30D0763d9a5C970",type:"0x2",value:"0xde0b6b3a7640000"},type:"sentEther"},status:"approved",time:1617228030067,txParams:{from:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",gas:"0x61a8",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00",to:"0x2f318C334780961FB129D2a6c30D0763d9a5C970",type:"0x2",value:"0xde0b6b3a7640000"},type:"simpleSend"}}})}withTransactionControllerCompletedTransaction(){return this.withTransactionController({transactions:{"0c9342ce-ef3f-4cab-9425-8e57144256a6":{chainId:c.LOCALHOST,history:[{chainId:c.LOCALHOST,id:"0c9342ce-ef3f-4cab-9425-8e57144256a6",loadingDefaults:!0,origin:"metamask",status:"unapproved",time:1671635506502,txParams:{from:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",gas:"0x5208",maxFeePerGas:"0x4c03c96f8",maxPriorityFeePerGas:"0x59682f00",to:"0x2f318C334780961FB129D2a6c30D0763d9a5C970",type:"0x2",value:"0xde0b6b3a7640000"},type:"simpleSend"},[{note:"Added new unapproved transaction.",op:"replace",path:"/loadingDefaults",timestamp:1671635506520,value:!1}],[{note:"confTx: user approved transaction",op:"replace",path:"/txParams/maxFeePerGas",timestamp:1671635510589,value:"0x4d7fc07fb"}],[{note:"txStateManager: setting status to approved",op:"replace",path:"/status",timestamp:1671635510589,value:"approved"}],[{note:"transactions#approveTransaction",op:"add",path:"/txParams/nonce",timestamp:1671635510592,value:"0x2"}],[{note:"txStateManager: setting status to signed",op:"replace",path:"/status",timestamp:1671635510651,value:"signed"}],[{note:"transactions#publishTransaction",op:"add",path:"/rawTx",timestamp:1671635510653,value:"0x02f87205028459682f008504d7fc07fb825208947d17148ed7ec802e4458e94deec1ef28aef645e987038d7ea4c6800080c001a0c60aeaef1556a52b009e3973f06c64d5cd6dc935463afd0d2b1c00661655e47ea061b121db8f2cb2241b1454d1794256e5634d26a5b873e89a816efe210377492a"}],[{note:"txStateManager: setting status to submitted",op:"replace",path:"/status",timestamp:1671635510753,value:"submitted"}],[{note:"txStateManager: setting status to confirmed",op:"replace",path:"/status",timestamp:1671635522978,value:"confirmed"},{op:"add",path:"/txReceipt",value:{blockNumber:"7cbf95",from:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",gasUsed:"5208",status:"0x1",to:"0x2f318C334780961FB129D2a6c30D0763d9a5C970",type:"0x2"}}],[{note:"transactions#confirmTransaction - add txReceipt",op:"replace",path:"/blockTimestamp",timestamp:1671635522999,value:"63a32240"}]],id:"0c9342ce-ef3f-4cab-9425-8e57144256a6",loadingDefaults:!1,origin:"metamask",status:"confirmed",submittedTime:1671635510753,time:1671635506502,txParams:{from:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",gas:"0x5208",to:"0x2f318C334780961FB129D2a6c30D0763d9a5C970",type:"0x2",value:"0xde0b6b3a7640000"},hash:"0xe5e7b95690f584b8f66b33e31acc6184fea553fa6722d42486a59990d13d5fa2",txReceipt:{blockNumber:{length:1,negative:0,words:[8175509,null]},from:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",status:"0x1",to:"0x2f318C334780961FB129D2a6c30D0763d9a5C970",type:"0x2"},type:"simpleSend"}}})}withTransactionControllerIncomingTransaction(){return this.withTransactionController({transactions:{"8a13fd36-fdad-48ae-8b6a-c8991026d550":{blockNumber:"1",chainId:c.LOCALHOST,hash:"0xf1af8286e4fa47578c2aec5f08c108290643df978ebc766d72d88476eee90bab",id:"8a13fd36-fdad-48ae-8b6a-c8991026d550",status:"confirmed",time:167163552e4,txParams:{from:"0xc87261ba337be737fa744f50e7aaf4a920bdfcd6",gas:"0x5208",gasPrice:"0x329af9707",to:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",value:"0xDE0B6B3A7640000"},type:"incoming"}}})}withTransactionControllerCompletedAndIncomingTransaction(){const e=this.withTransactionControllerCompletedTransaction().fixture.data.TransactionController.transactions,t=this.withTransactionControllerIncomingTransaction().fixture.data.TransactionController.transactions;return this.withTransactionController({transactions:{...e,...t}})}withConnectionsToManyDapps(){return this.withPermissionController({subjects:{"https://app.ens.domains":{origin:"https://app.ens.domains",permissions:{eth_accounts:{id:"oKXoF_MNlffiR2u1Y3mDE",parentCapability:"eth_accounts",invoker:"https://app.ens.domains",caveats:[{type:"restrictReturnedAccounts",value:["0xbee150bdc171c7d4190891e78234f791a3ac7b24","0xb9504634e5788208933b51ae7440b478bfadf865"]}],date:1708029792962}}},"https://app.uniswap.org":{origin:"https://app.uniswap.org",permissions:{eth_accounts:{id:"vaa88u5Iv3VmsJwG3bDKW",parentCapability:"eth_accounts",invoker:"https://app.uniswap.org",caveats:[{type:"restrictReturnedAccounts",value:["0xbee150bdc171c7d4190891e78234f791a3ac7b24","0xd1ca923697a701cba1364d803d72b4740fc39bc9"]}],date:1708029870079}}},"https://www.dextools.io":{origin:"https://www.dextools.io",permissions:{eth_accounts:{id:"bvvPcFtIhkFyHyW0Tmwi4",parentCapability:"eth_accounts",invoker:"https://www.dextools.io",caveats:[{type:"restrictReturnedAccounts",value:["0xbee150bdc171c7d4190891e78234f791a3ac7b24","0xa5c5293e124d04e2f85e8553851001fd2f192647","0xb9504634e5788208933b51ae7440b478bfadf865"]}],date:1708029948170}}},"https://coinmarketcap.com":{origin:"https://coinmarketcap.com",permissions:{eth_accounts:{id:"AiblK84K1Cic-Y0FDSzMD",parentCapability:"eth_accounts",invoker:"https://coinmarketcap.com",caveats:[{type:"restrictReturnedAccounts",value:["0xbee150bdc171c7d4190891e78234f791a3ac7b24"]}],date:1708030049641}}}},subjectMetadata:{"https://ens.domains":{iconUrl:null,name:"ens.domains",subjectType:"website",origin:"https://ens.domains",extensionId:null},"https://app.ens.domains":{iconUrl:"https://app.ens.domains/favicon-32x32.png",name:"ENS",subjectType:"website",origin:"https://app.ens.domains",extensionId:null},"https://app.uniswap.org":{iconUrl:"https://app.uniswap.org/favicon.png",name:"Uniswap Interface",subjectType:"website",origin:"https://app.uniswap.org",extensionId:null},"https://www.dextools.io":{iconUrl:"https://www.dextools.io/app/favicon.ico",name:"DEXTools.io",subjectType:"website",origin:"https://www.dextools.io",extensionId:null},"https://coinmarketcap.com":{iconUrl:"https://coinmarketcap.com/favicon.ico",name:"CoinMarketCap",subjectType:"website",origin:"https://coinmarketcap.com",extensionId:null}}})}withNameController(e){return a(this.fixture.data.NameController?this.fixture.data.NameController:this.fixture.data.NameController={},e),this}withNoNames(){return this.withNameController({names:{}})}withTrezorAccount(){return this.withAccountTracker({accounts:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{address:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",balance:"0x15af1d78b58c40000"},"0xf68464152d7289d7ea9a2bec2e0035c45188223c":{address:"0xf68464152d7289d7ea9a2bec2e0035c45188223c",balance:"0x100000000000000000000"}},currentBlockGasLimit:"0x1c9c380",accountsByChainId:{"0x539":{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{address:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",balance:"0x15af1d78b58c40000"},"0xf68464152d7289d7ea9a2bec2e0035c45188223c":{address:"0xf68464152d7289d7ea9a2bec2e0035c45188223c",balance:"0x100000000000000000000"}}},currentBlockGasLimitByChainId:{"0x539":"0x1c9c380"}}).withAccountsController({internalAccounts:{accounts:{"d5e45e4a-3b04-4a09-a5e1-39762e5c6be4":{id:"d5e45e4a-3b04-4a09-a5e1-39762e5c6be4",address:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",options:{},methods:["personal_sign","eth_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:"eip155:eoa",metadata:{name:"Account 1",importTime:1724486724986,lastSelected:16655076e5,keyring:{type:"HD Key Tree"}}},"221ecb67-0d29-4c04-83b2-dff07c263634":{id:"221ecb67-0d29-4c04-83b2-dff07c263634",address:"0xf68464152d7289d7ea9a2bec2e0035c45188223c",options:{},methods:["personal_sign","eth_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:"eip155:eoa",metadata:{name:"Trezor 1",importTime:1724486729079,keyring:{type:"Trezor Hardware"},lastSelected:1724486729083}}},selectedAccount:"221ecb67-0d29-4c04-83b2-dff07c263634"}}).withKeyringController({vault:'{"data":"NPUZE4s9SQOrsw1GtJSnQ9ptC3J1nf3O+hWT3N8Oh5MDcyO0XojQfSBZL88FgjuAGMT+oFEnX8gzsd1x0/Z7iinNSOD+U22LJ6w37Pkfw4mqAYvKJDbnb2HAdjNbjGD99PKn1qe5eR0vohL5taFW2lTKdlE3dficITFM9wm9mQTegQVvYClTSktweumFSTMxqO1fUPj7oacLmw69ZAk2/am4fhI4c6ZeJoAkvPTJvYZDOne3WkUlcuUoeJjCX7b/59NQNHeCry8OyWVMCZDMYFsJT9Pk2vlFgnVL69n9dRGHrZNuNGFOhFawta5TqDUn1Ya7Iq0FjBW1WQv+HKktMM+RA8KZZyAAJkXYHRMpmUhQkw4wQFELgHjKFm/NIYcFVT5t6/XIj9kLqh4+55krUGoEHygzX41uSNie/wNmLjTgNAZv/eK9R81vyv1FR8N1fgkr13KxQT/0o/bQZhnaVClFa/3t13epiRrU/1plVh2TaI7HLFLj69d4c7w96J7Z33osjCywpNCJLam3Xx5OLAaPVe+L7a9u/zOMmryxX37xCrQhn9YSzZ0+E9Hik9CZU9ZXqmNgRhYAoqpcRWgMVmEC2HRLBIXXF0VTyYvfUvEfn87iAsqw0KeoQagDpUPsEr8UU9zs6cGRqZZTfR6/Wa3UwuIwV5XnCRg3Eifiz2BHKG4kutxKIJJak9habIfXBjxMrrwrHns7tWmWmE3JRYoekJQxFdWP3mcnDHVNz2VscgWeW5bZEoBim91iPRbsXimX9605xE0WOaHpwu27G9LwTNwL+0f8BgwoCcfMbaKwoDGVqKFOSbKurYBByPmWsm1b10vVrnsxA3VZMd2HWhicD7DE5h/4R+7Z90VthpVwt4NQ7+QmXeSXqCpPcoq7UTrchdYgV95xbKna1r0lSnZSfUMALji1I2Nh96ki24SbbUEeFZGm4dxNSnub07hTKF6xeqS1FvV79hBpZi/6v+pS+SDNSlwEcfRWW3S02Ec6JAhK2rVCQqSwasFcVcznYB5OaKL6QCmriIpqH0ATsthAwsf9naHSU+36wwi3xogxbpzecjaZ8gxKs2wmJk+Rz6VoGB+z9DTzvha5sm4DmfuQ2CtbQNYZq20VG3hO9g7wzWwa5xZmbH7njBDqlpaNgmxMrAX1S+T8D7X6ElD+aH0MyP9UD5E5tT5xxgUAV0wi+LY0+uCi2Y2lragFM7ihmPr1MP5wEy/1eIf45cY3imfl9w0F/FrCo+Hy2Au9AueCCab2eabA8QAum3lhXtdOyc123sSghIPjC6RUlZE53skLx1cPaV5JJAkneQJ44QMWecLQjh3YyCzRQ8XCnFAL+Kmf7zW5t+l25PLCkcfuLE7zxvLsTz3w2TCIXzEJyw1vXjBzPTUdKCNSva0WGsbq5B93zYot6bmvK1RKHeje8Ed/4N/l8uwxulUAjYQ+94qDKkxTVxvAZ8ydoxwKuB8QCTXgbymDsF/Y5l+RDXmzMT8BdN/QtdjsCXJ2PjvBG+srQOPntOCZMS7FVMk9yc6MWE/DBDm7HtY5CiY3af4A5sOZmLSP3Ek91ijmYdr/nO32DnkV4NJ2/Hj8SWAK5OD8zq8q5uRlR8BDcj7oLnzJX4S+yJNJ/nZSleUyTsv5v6YZ8hno","iv":"6SgfUVcvgUDGbCuqmdZgbA==","keyMetadata":{"algorithm":"PBKDF2","params":{"iterations":600000}},"salt":"nk4xdpmMR+1s5BYe4Vnk++XAQwrISI2bCtbMg7V1wUA="}'}).withNameController({names:{ethereumAddress:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{"*":{name:"Account 1",sourceId:null,proposedNames:{},origin:"account-identity"}},"0xf68464152d7289d7ea9a2bec2e0035c45188223c":{"*":{proposedNames:{},name:"Trezor 1",sourceId:null,origin:"account-identity"}}}}}).withPreferencesController({identities:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{address:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",lastSelected:16655076e5,name:"Account 1"},"0xf68464152d7289d7ea9a2bec2e0035c45188223c":{address:"0xf68464152d7289d7ea9a2bec2e0035c45188223c",lastSelected:16655078e5,name:"Trezor 1"}},lostIdentities:{"0x5cfe73b6021e818b776b421b1c4db2474086a7e1":{address:"0x5cfe73b6021e818b776b421b1c4db2474086a7e1",name:"Account 1",lastSelected:16655076e5},"0xf68464152d7289d7ea9a2bec2e0035c45188223c":{address:"0xf68464152d7289d7ea9a2bec2e0035c45188223c",name:"Trezor 1",lastSelected:16655078e5}},selectedAddress:"0xf68464152d7289d7ea9a2bec2e0035c45188223c"})}build(){return this.fixture.meta={version:m},this.fixture}}}}},{package:"$root$",file:"test/e2e/fixture-builder.js"}],[4896,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.entrypointBytecode=f.entrypointAbi=void 0;f.entrypointAbi=[{inputs:[{internalType:"uint256",name:"preOpGas",type:"uint256"},{internalType:"uint256",name:"paid",type:"uint256"},{internalType:"uint48",name:"validAfter",type:"uint48"},{internalType:"uint48",name:"validUntil",type:"uint48"},{internalType:"bool",name:"targetSuccess",type:"bool"},{internalType:"bytes",name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{internalType:"uint256",name:"opIndex",type:"uint256"},{internalType:"string",name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{internalType:"address",name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{internalType:"uint256",name:"preOpGas",type:"uint256"},{internalType:"uint256",name:"prefund",type:"uint256"},{internalType:"bool",name:"sigFailed",type:"bool"},{internalType:"uint48",name:"validAfter",type:"uint48"},{internalType:"uint48",name:"validUntil",type:"uint48"},{internalType:"bytes",name:"paymasterContext",type:"bytes"}],internalType:"struct IEntryPoint.ReturnInfo",name:"returnInfo",type:"tuple"},{components:[{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"unstakeDelaySec",type:"uint256"}],internalType:"struct IStakeManager.StakeInfo",name:"senderInfo",type:"tuple"},{components:[{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"unstakeDelaySec",type:"uint256"}],internalType:"struct IStakeManager.StakeInfo",name:"factoryInfo",type:"tuple"},{components:[{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"unstakeDelaySec",type:"uint256"}],internalType:"struct IStakeManager.StakeInfo",name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{internalType:"uint256",name:"preOpGas",type:"uint256"},{internalType:"uint256",name:"prefund",type:"uint256"},{internalType:"bool",name:"sigFailed",type:"bool"},{internalType:"uint48",name:"validAfter",type:"uint48"},{internalType:"uint48",name:"validUntil",type:"uint48"},{internalType:"bytes",name:"paymasterContext",type:"bytes"}],internalType:"struct IEntryPoint.ReturnInfo",name:"returnInfo",type:"tuple"},{components:[{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"unstakeDelaySec",type:"uint256"}],internalType:"struct IStakeManager.StakeInfo",name:"senderInfo",type:"tuple"},{components:[{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"unstakeDelaySec",type:"uint256"}],internalType:"struct IStakeManager.StakeInfo",name:"factoryInfo",type:"tuple"},{components:[{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"unstakeDelaySec",type:"uint256"}],internalType:"struct IStakeManager.StakeInfo",name:"paymasterInfo",type:"tuple"},{components:[{internalType:"address",name:"aggregator",type:"address"},{components:[{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"unstakeDelaySec",type:"uint256"}],internalType:"struct IStakeManager.StakeInfo",name:"stakeInfo",type:"tuple"}],internalType:"struct IEntryPoint.AggregatorStakeInfo",name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"userOpHash",type:"bytes32"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"factory",type:"address"},{indexed:!1,internalType:"address",name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"totalStaked",type:"uint256"},{indexed:!1,internalType:"uint256",name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"address",name:"withdrawAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"userOpHash",type:"bytes32"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"paymaster",type:"address"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bool",name:"success",type:"bool"},{indexed:!1,internalType:"uint256",name:"actualGasCost",type:"uint256"},{indexed:!1,internalType:"uint256",name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"userOpHash",type:"bytes32"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes",name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"address",name:"withdrawAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"initCode",type:"bytes"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"deposits",outputs:[{internalType:"uint112",name:"deposit",type:"uint112"},{internalType:"bool",name:"staked",type:"bool"},{internalType:"uint112",name:"stake",type:"uint112"},{internalType:"uint32",name:"unstakeDelaySec",type:"uint32"},{internalType:"uint48",name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{internalType:"uint112",name:"deposit",type:"uint112"},{internalType:"bool",name:"staked",type:"bool"},{internalType:"uint112",name:"stake",type:"uint112"},{internalType:"uint32",name:"unstakeDelaySec",type:"uint32"},{internalType:"uint48",name:"withdrawTime",type:"uint48"}],internalType:"struct IStakeManager.DepositInfo",name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint192",name:"key",type:"uint192"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"initCode",type:"bytes"},{internalType:"bytes",name:"callData",type:"bytes"},{internalType:"uint256",name:"callGasLimit",type:"uint256"},{internalType:"uint256",name:"verificationGasLimit",type:"uint256"},{internalType:"uint256",name:"preVerificationGas",type:"uint256"},{internalType:"uint256",name:"maxFeePerGas",type:"uint256"},{internalType:"uint256",name:"maxPriorityFeePerGas",type:"uint256"},{internalType:"bytes",name:"paymasterAndData",type:"bytes"},{internalType:"bytes",name:"signature",type:"bytes"}],internalType:"struct UserOperation",name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"initCode",type:"bytes"},{internalType:"bytes",name:"callData",type:"bytes"},{internalType:"uint256",name:"callGasLimit",type:"uint256"},{internalType:"uint256",name:"verificationGasLimit",type:"uint256"},{internalType:"uint256",name:"preVerificationGas",type:"uint256"},{internalType:"uint256",name:"maxFeePerGas",type:"uint256"},{internalType:"uint256",name:"maxPriorityFeePerGas",type:"uint256"},{internalType:"bytes",name:"paymasterAndData",type:"bytes"},{internalType:"bytes",name:"signature",type:"bytes"}],internalType:"struct UserOperation[]",name:"userOps",type:"tuple[]"},{internalType:"contract IAggregator",name:"aggregator",type:"address"},{internalType:"bytes",name:"signature",type:"bytes"}],internalType:"struct IEntryPoint.UserOpsPerAggregator[]",name:"opsPerAggregator",type:"tuple[]"},{internalType:"address payable",name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"initCode",type:"bytes"},{internalType:"bytes",name:"callData",type:"bytes"},{internalType:"uint256",name:"callGasLimit",type:"uint256"},{internalType:"uint256",name:"verificationGasLimit",type:"uint256"},{internalType:"uint256",name:"preVerificationGas",type:"uint256"},{internalType:"uint256",name:"maxFeePerGas",type:"uint256"},{internalType:"uint256",name:"maxPriorityFeePerGas",type:"uint256"},{internalType:"bytes",name:"paymasterAndData",type:"bytes"},{internalType:"bytes",name:"signature",type:"bytes"}],internalType:"struct UserOperation[]",name:"ops",type:"tuple[]"},{internalType:"address payable",name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint192",name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"callData",type:"bytes"},{components:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"callGasLimit",type:"uint256"},{internalType:"uint256",name:"verificationGasLimit",type:"uint256"},{internalType:"uint256",name:"preVerificationGas",type:"uint256"},{internalType:"address",name:"paymaster",type:"address"},{internalType:"uint256",name:"maxFeePerGas",type:"uint256"},{internalType:"uint256",name:"maxPriorityFeePerGas",type:"uint256"}],internalType:"struct EntryPoint.MemoryUserOp",name:"mUserOp",type:"tuple"},{internalType:"bytes32",name:"userOpHash",type:"bytes32"},{internalType:"uint256",name:"prefund",type:"uint256"},{internalType:"uint256",name:"contextOffset",type:"uint256"},{internalType:"uint256",name:"preOpGas",type:"uint256"}],internalType:"struct EntryPoint.UserOpInfo",name:"opInfo",type:"tuple"},{internalType:"bytes",name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{internalType:"uint256",name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint192",name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"initCode",type:"bytes"},{internalType:"bytes",name:"callData",type:"bytes"},{internalType:"uint256",name:"callGasLimit",type:"uint256"},{internalType:"uint256",name:"verificationGasLimit",type:"uint256"},{internalType:"uint256",name:"preVerificationGas",type:"uint256"},{internalType:"uint256",name:"maxFeePerGas",type:"uint256"},{internalType:"uint256",name:"maxPriorityFeePerGas",type:"uint256"},{internalType:"bytes",name:"paymasterAndData",type:"bytes"},{internalType:"bytes",name:"signature",type:"bytes"}],internalType:"struct UserOperation",name:"op",type:"tuple"},{internalType:"address",name:"target",type:"address"},{internalType:"bytes",name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"initCode",type:"bytes"},{internalType:"bytes",name:"callData",type:"bytes"},{internalType:"uint256",name:"callGasLimit",type:"uint256"},{internalType:"uint256",name:"verificationGasLimit",type:"uint256"},{internalType:"uint256",name:"preVerificationGas",type:"uint256"},{internalType:"uint256",name:"maxFeePerGas",type:"uint256"},{internalType:"uint256",name:"maxPriorityFeePerGas",type:"uint256"},{internalType:"bytes",name:"paymasterAndData",type:"bytes"},{internalType:"bytes",name:"signature",type:"bytes"}],internalType:"struct UserOperation",name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"withdrawAddress",type:"address"},{internalType:"uint256",name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],f.entrypointBytecode="0x60a080604052346200008957600160025561022c8181016001600160401b038111838210176200007357829162005d18833903906000f080156200006757608052604051615c8990816200008f82396080518181816113df01528181613e9501526141b60152f35b6040513d6000823e3d90fd5b634e487b7160e01b600052604160045260246000fd5b600080fdfe60806040526004361015610023575b361561001957600080fd5b610021615531565b005b60003560e01c80630396cb60146101b35780630bd28e3b146101aa5780631b2e01b8146101a15780631d732756146101985780631fad948c1461018f578063205c28781461018657806335567e1a1461017d5780634b1d7cf5146101745780635287ce121461016b57806370a08231146101625780638f41ec5a14610159578063957122ab146101505780639b249f6914610147578063a61935311461013e578063b760faf914610135578063bb9fe6bf1461012c578063c23a5cea14610123578063d6383f941461011a578063ee219423146101115763fc7e286d0361000e5761010c611bcd565b61000e565b5061010c6119b5565b5061010c61184d565b5061010c6116b4565b5061010c611536565b5061010c6114f7565b5061010c6114d6565b5061010c611337565b5061010c611164565b5061010c611129565b5061010c6110a4565b5061010c610f54565b5061010c610bf8565b5061010c610b33565b5061010c610994565b5061010c6108ba565b5061010c6106e7565b5061010c610467565b5061010c610385565b5060207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103595760043563ffffffff8116808203610359576103547fa5ae833d0bb1dcd632d98a8b70973e8516812898e19bf27b70071ebc8dc52c01916102716102413373ffffffffffffffffffffffffffffffffffffffff166000526000602052604060002090565b9161024d811515615697565b61026a610261600185015463ffffffff1690565b63ffffffff1690565b11156156fc565b54926103366dffffffffffffffffffffffffffff946102f461029834888460781c166121d5565b966102a4881515615761565b6102b0818911156157c6565b6102d4816102bc6105ec565b941684906dffffffffffffffffffffffffffff169052565b6001602084015287166dffffffffffffffffffffffffffff166040830152565b63ffffffff83166060820152600060808201526103313373ffffffffffffffffffffffffffffffffffffffff166000526000602052604060002090565b61582b565b6040805194855263ffffffff90911660208501523393918291820190565b0390a2005b600080fd5b6024359077ffffffffffffffffffffffffffffffffffffffffffffffff8216820361035957565b50346103595760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103595760043577ffffffffffffffffffffffffffffffffffffffffffffffff81168103610359576104149033600052600160205260406000209077ffffffffffffffffffffffffffffffffffffffffffffffff16600052602052604060002090565b61041e8154612491565b9055005b73ffffffffffffffffffffffffffffffffffffffff81160361035957565b6024359061044d82610422565b565b60c4359061044d82610422565b359061044d82610422565b50346103595760407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103595760206104fc6004356104a881610422565b73ffffffffffffffffffffffffffffffffffffffff6104c561035e565b91166000526001835260406000209077ffffffffffffffffffffffffffffffffffffffffffffffff16600052602052604060002090565b54604051908152f35b507f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60a0810190811067ffffffffffffffff82111761055157604052565b610559610505565b604052565b610100810190811067ffffffffffffffff82111761055157604052565b67ffffffffffffffff811161055157604052565b6060810190811067ffffffffffffffff82111761055157604052565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff82111761055157604052565b6040519061044d82610535565b6040519060c0820182811067ffffffffffffffff82111761055157604052565b604051906040820182811067ffffffffffffffff82111761055157604052565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f60209267ffffffffffffffff8111610675575b01160190565b61067d610505565b61066f565b92919261068e82610639565b9161069c60405193846105ab565b829481845281830111610359578281602093846000960137010152565b9181601f840112156103595782359167ffffffffffffffff8311610359576020838186019501011161035957565b5034610359576101c07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103595767ffffffffffffffff60043581811161035957366023820112156103595761074a903690602481600401359101610682565b907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdc36016101808112610359576101006040519161078783610535565b12610359576040516107988161055e565b6107a0610440565b815260443560208201526064356040820152608435606082015260a43560808201526107ca61044f565b60a082015260e43560c08201526101043560e082015281526101243560208201526101443560408201526101643560608201526101843560808201526101a4359182116103595761083e9261082661082e9336906004016106b9565b9290916128b1565b6040519081529081906020820190565b0390f35b9060407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc8301126103595760043567ffffffffffffffff9283821161035957806023830112156103595781600401359384116103595760248460051b830101116103595760240191906024356108b781610422565b90565b5034610359576108c936610842565b6108d4929192611e3a565b6108dd83611d2d565b60005b84811061095d57506000927fbb47ee3e183a558b1a2ff0874b079f3fc5478b7454eacf2bfc5af2ff5878f9728480a183915b85831061092d576109238585611ed7565b6100216001600255565b909193600190610953610941878987611dec565b61094b8886611dca565b51908861233f565b0194019190610912565b8061098b610984610972600194869896611dca565b5161097e848a88611dec565b84613448565b9083612f30565b019290926108e0565b50346103595760407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610359576004356109d081610422565b6024359060009133835282602052604083206dffffffffffffffffffffffffffff81541692838311610ad557848373ffffffffffffffffffffffffffffffffffffffff829593610a788496610a3f610a2c8798610ad29c6121c0565b6dffffffffffffffffffffffffffff1690565b6dffffffffffffffffffffffffffff167fffffffffffffffffffffffffffffffffffff0000000000000000000000000000825416179055565b6040805173ffffffffffffffffffffffffffffffffffffffff831681526020810185905233917fd1c19fbcd4551a5edfb66d43d2e337c04837afda3482b42bdf569a8fccdae5fb91a2165af1610acc611ea7565b50615ba2565b80f35b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f576974686472617720616d6f756e7420746f6f206c61726765000000000000006044820152fd5b50346103595760407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610359576020600435610b7181610422565b73ffffffffffffffffffffffffffffffffffffffff610b8e61035e565b911660005260018252610bc98160406000209077ffffffffffffffffffffffffffffffffffffffffffffffff16600052602052604060002090565b547fffffffffffffffffffffffffffffffffffffffffffffffff00000000000000006040519260401b16178152f35b503461035957610c0736610842565b610c0f611e3a565b6000805b838210610df657610c249150611d2d565b7fbb47ee3e183a558b1a2ff0874b079f3fc5478b7454eacf2bfc5af2ff5878f972600080a16000805b848110610d5c57505060008093815b818110610c9357610923868660007f575ff3acadd5ab348fe1855e217e0f3678f8d767d7494c9f9fefbee2e17cca4d8180a2611ed7565b610cf7610ca182848a6124cb565b610ccc610cb3610cb36020840161256d565b73ffffffffffffffffffffffffffffffffffffffff1690565b7f575ff3acadd5ab348fe1855e217e0f3678f8d767d7494c9f9fefbee2e17cca4d600080a280612519565b906000915b808310610d1457505050610d0f90612491565b610c5c565b90919497610d4f610d49610d5592610d438c8b610d3c82610d368e8b8d611dec565b92611dca565b519161233f565b906121d5565b99612491565b95612491565b9190610cfc565b610d678186886124cb565b6020610d7f610d768380612519565b9290930161256d565b9173ffffffffffffffffffffffffffffffffffffffff60009316905b828410610db45750505050610daf90612491565b610c4d565b90919294610d4f81610de985610de2610dd0610dee968d611dca565b51610ddc8c8b8a611dec565b85613448565b908b613148565b612491565b929190610d9b565b610e018285876124cb565b90610e0c8280612519565b92610e1c610cb36020830161256d565b9173ffffffffffffffffffffffffffffffffffffffff8316610e416001821415612577565b610e62575b505050610e5c91610e56916121d5565b91612491565b90610c13565b909592610e7b6040999693999895989788810190611fc8565b92908a3b156103595789938b918a5193849283927fe3563a4f00000000000000000000000000000000000000000000000000000000845260049e8f850193610ec294612711565b03815a93600094fa9081610f3b575b50610f255786517f86a9f75000000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8a16818a0190815281906020010390fd5b0390fd5b9497509295509093509181610e56610e5c610e46565b80610f48610f4e9261057b565b8061111e565b38610ed1565b50346103595760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103595761083e73ffffffffffffffffffffffffffffffffffffffff600435610fa881610422565b608060409283928351610fba81610535565b60009381858093528260208201528287820152826060820152015216815280602052209061104965ffffffffffff6001835194610ff686610535565b80546dffffffffffffffffffffffffffff8082168852607082901c60ff161515602089015260789190911c1685870152015463ffffffff8116606086015260201c16608084019065ffffffffffff169052565b5191829182919091608065ffffffffffff8160a08401956dffffffffffffffffffffffffffff808251168652602082015115156020870152604082015116604086015263ffffffff6060820151166060860152015116910152565b50346103595760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103595773ffffffffffffffffffffffffffffffffffffffff6004356110f581610422565b16600052600060205260206dffffffffffffffffffffffffffff60406000205416604051908152f35b600091031261035957565b50346103595760007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261035957602060405160018152f35b50346103595760607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261035957600467ffffffffffffffff8135818111610359576111b590369084016106b9565b9050602435916111c483610422565b604435908111610359576111db90369085016106b9565b92909115908161132d575b506112c6576014821015611236575b610f21836040519182917f08c379a0000000000000000000000000000000000000000000000000000000008352820160409060208152600060208201520190565b6112466112529261124c92612b88565b90612b96565b60601c90565b3b1561125f5738806111f5565b610f21906040519182917f08c379a0000000000000000000000000000000000000000000000000000000008352820160609060208152601b60208201527f41413330207061796d6173746572206e6f74206465706c6f796564000000000060408201520190565b610f21836040519182917f08c379a0000000000000000000000000000000000000000000000000000000008352820160609060208152601960208201527f41413230206163636f756e74206e6f74206465706c6f7965640000000000000060408201520190565b90503b15386111e6565b50346103595760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103595760043567ffffffffffffffff81116103595761138960249136906004016106b9565b906113bf6040519283927f570e1a3600000000000000000000000000000000000000000000000000000000845260048401612d2c565b0360208273ffffffffffffffffffffffffffffffffffffffff92816000857f0000000000000000000000000000000000000000000000000000000000000000165af1918215611471575b600092611441575b50604051917f6ca7b806000000000000000000000000000000000000000000000000000000008352166004820152fd5b61146391925060203d811161146a575b61145b81836105ab565b810190612d17565b9038611411565b503d611451565b611479612183565b611409565b90816101609103126103595790565b60207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc820112610359576004359067ffffffffffffffff8211610359576108b79160040161147e565b50346103595760206114ef6114ea3661148d565b612a0c565b604051908152f35b5060207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103595761002160043561153181610422565b61562b565b5034610359576000807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126116b1573381528060205260408120600181019063ffffffff825416908115611653576115f06115b5611618936115a76115a2855460ff9060701c1690565b61598f565b65ffffffffffff42166159f4565b84547fffffffffffffffffffffffffffffffffffffffffffff000000000000ffffffff16602082901b69ffffffffffff000000001617909455565b7fffffffffffffffffffffffffffffffffff00ffffffffffffffffffffffffffff8154169055565b60405165ffffffffffff91909116815233907ffa9b3c14cc825c412c9ed81b3ba365a5b459439403f18829e572ed53a4180f0a90602090a280f35b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600a60248201527f6e6f74207374616b6564000000000000000000000000000000000000000000006044820152fd5b80fd5b50346103595760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610359576004356116f081610422565b610ad273ffffffffffffffffffffffffffffffffffffffff6117323373ffffffffffffffffffffffffffffffffffffffff166000526000602052604060002090565b926117ea611755610a2c86546dffffffffffffffffffffffffffff9060781c1690565b94611761861515615a0e565b6117c26001820161179a65ffffffffffff611786835465ffffffffffff9060201c1690565b16611792811515615a73565b421015615ad8565b80547fffffffffffffffffffffffffffffffffffffffffffff00000000000000000000169055565b7fffffff0000000000000000000000000000ffffffffffffffffffffffffffffff8154169055565b6040805173ffffffffffffffffffffffffffffffffffffffff831681526020810186905233917fb7c918e0e249f999e965cafeb6c664271b3f4317d296461500e71da39f0cbda391a2600080809581948294165af1611847611ea7565b50615b3d565b50346103595760607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103595767ffffffffffffffff6004358181116103595761189e90369060040161147e565b602435916118ab83610422565b604435908111610359576118c6610f219136906004016106b9565b6118ce611caa565b6118d785612e2b565b6118ea6118e48287613240565b906153ba565b946118fa826000924384526121e2565b96438252819360609573ffffffffffffffffffffffffffffffffffffffff8316611981575b50505050608001519361194e6040611940602084015165ffffffffffff1690565b92015165ffffffffffff1690565b906040519687967f8b7ac980000000000000000000000000000000000000000000000000000000008852600488016127e1565b8395508394965061199b60409492939451809481936127d3565b03925af19060806119aa611ea7565b92919038808061191f565b5034610359576119c43661148d565b6119cc611caa565b6119d582612e2b565b6119df8183613240565b825160a00151919391611a0c9073ffffffffffffffffffffffffffffffffffffffff166154dc565b6154dc565b90611a30611a07855173ffffffffffffffffffffffffffffffffffffffff90511690565b94611a39612b50565b50611a68611a4c60409586810190611fc8565b90600060148310611bc55750611246611a079261124c92612b88565b91611a72916153ba565b805173ffffffffffffffffffffffffffffffffffffffff169073ffffffffffffffffffffffffffffffffffffffff821660018114916080880151978781015191886020820151611ac79065ffffffffffff1690565b91015165ffffffffffff16916060015192611ae06105f9565b9a8b5260208b0152841515898b015265ffffffffffff1660608a015265ffffffffffff16608089015260a088015215159081611bbc575b50611b515750610f2192519485947fe0cff05f00000000000000000000000000000000000000000000000000000000865260048601612cbd565b9190610f2193611b60846154dc565b611b87611b6b610619565b73ffffffffffffffffffffffffffffffffffffffff9096168652565b6020850152519586957ffaecb4e400000000000000000000000000000000000000000000000000000000875260048701612c2b565b90501538611b17565b9150506154dc565b50346103595760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103595773ffffffffffffffffffffffffffffffffffffffff600435611c1e81610422565b16600052600060205260a0604060002065ffffffffffff60018254920154604051926dffffffffffffffffffffffffffff90818116855260ff8160701c161515602086015260781c16604084015263ffffffff8116606084015260201c166080820152f35b60209067ffffffffffffffff8111611c9d575b60051b0190565b611ca5610505565b611c96565b60405190611cb782610535565b604051608083610100830167ffffffffffffffff811184821017611d20575b60405260009283815283602082015283604082015283606082015283838201528360a08201528360c08201528360e082015281528260208201528260408201528260608201520152565b611d28610505565b611cd6565b90611d3782611c83565b611d4460405191826105ab565b8281527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0611d728294611c83565b019060005b828110611d8357505050565b602090611d8e611caa565b82828501015201611d77565b507f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020918151811015611ddf575b60051b010190565b611de7611d9a565b611dd7565b9190811015611e2d575b60051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffea181360301821215610359570190565b611e35611d9a565b611df6565b6002805414611e495760028055565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f5265656e7472616e637947756172643a207265656e7472616e742063616c6c006044820152fd5b3d15611ed2573d90611eb882610639565b91611ec660405193846105ab565b82523d6000602084013e565b606090565b73ffffffffffffffffffffffffffffffffffffffff168015611f6a57600080809381935af1611f04611ea7565b5015611f0c57565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f41413931206661696c65642073656e6420746f2062656e6566696369617279006044820152fd5b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601860248201527f4141393020696e76616c69642062656e656669636961727900000000000000006044820152fd5b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe181360301821215610359570180359067ffffffffffffffff82116103595760200191813603831361035957565b90816020910312610359575190565b601f82602094937fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0938186528686013760008582860101520116010190565b60005b83811061207a5750506000910152565b818101518382015260200161206a565b907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f6020936120c681518092818752878088019101612067565b0116010190565b906120e76080916108b796946101c0808652850191612028565b9360e0815173ffffffffffffffffffffffffffffffffffffffff80825116602087015260208201516040870152604082015160608701526060820151858701528482015160a087015260a08201511660c086015260c081015182860152015161010084015260208101516101208401526040810151610140840152606081015161016084015201516101808201526101a081840391015261208a565b506040513d6000823e3d90fd5b507f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b919082039182116121cd57565b61044d612190565b919082018092116121cd57565b905a918160206121fb6060830151936060810190611fc8565b906122348560405195869485947f1d732756000000000000000000000000000000000000000000000000000000008652600486016120cd565b03816000305af16000918161230f575b50612308575060206000803e7fdeaddead000000000000000000000000000000000000000000000000000000006000511461229b5761229561228a6108b7945a906121c0565b6080840151906121d5565b91614afc565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152600f60408201527f41413935206f7574206f6620676173000000000000000000000000000000000060608201520190565b9250505090565b61233191925060203d8111612338575b61232981836105ab565b810190612019565b9038612244565b503d61231f565b909291925a9380602061235b6060830151946060810190611fc8565b906123948660405195869485947f1d732756000000000000000000000000000000000000000000000000000000008652600486016120cd565b03816000305af160009181612471575b5061246a575060206000803e7fdeaddead00000000000000000000000000000000000000000000000000000000600051146123fc576123f66123eb6108b795965a906121c0565b6080830151906121d5565b92614ddf565b610f21836040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301608091815260406020820152600f60408201527f41413935206f7574206f6620676173000000000000000000000000000000000060608201520190565b9450505050565b61248a91925060203d81116123385761232981836105ab565b90386123a4565b6001907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146124bf570190565b6124c7612190565b0190565b919081101561250c575b60051b810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa181360301821215610359570190565b612514611d9a565b6124d5565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe181360301821215610359570180359067ffffffffffffffff821161035957602001918160051b3603831361035957565b356108b781610422565b1561257e57565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4141393620696e76616c69642061676772656761746f720000000000000000006044820152fd5b90357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe18236030181121561035957016020813591019167ffffffffffffffff821161035957813603831361035957565b6108b7916126578161263d8461045c565b73ffffffffffffffffffffffffffffffffffffffff169052565b602082013560208201526126f26126a361268861267760408601866125dc565b610160806040880152860191612028565b61269560608601866125dc565b908583036060870152612028565b6080840135608084015260a084013560a084015260c084013560c084015260e084013560e084015261010080850135908401526101206126e5818601866125dc565b9185840390860152612028565b9161270361014091828101906125dc565b929091818503910152612028565b949391929083604087016040885252606086019360608160051b8801019482600090815b848310612754575050505050508460206108b795968503910152612028565b9091929394977fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa08b820301855288357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffea1843603018112156127cf57600191846127bd920161262c565b98602090810196950193019190612735565b8280fd5b908092918237016000815290565b9290936108b796959260c0958552602085015265ffffffffffff8092166040850152166060830152151560808201528160a0820152019061208a565b1561282457565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4141393220696e7465726e616c2063616c6c206f6e6c790000000000000000006044820152fd5b9060406108b79260008152816020820152019061208a565b6040906108b793928152816020820152019061208a565b909291925a936128c230331461281d565b8151946040860151955a6113886060830151890101116129e2576108b7966000958051612909575b50505090612903915a9003608084015101943691610682565b91615047565b612938916129349161292f855173ffffffffffffffffffffffffffffffffffffffff1690565b615c12565b1590565b612944575b80806128ea565b61290392919450612953615c24565b908151612967575b5050600193909161293d565b7f1c4fada7374c0a9ee8841fc38afe82932dc0f8e69012e927f061a8bae611a20173ffffffffffffffffffffffffffffffffffffffff6020870151926129d860206129c6835173ffffffffffffffffffffffffffffffffffffffff1690565b9201519560405193849316968361289a565b0390a3388061295b565b7fdeaddead0000000000000000000000000000000000000000000000000000000060005260206000fd5b612a22612a1c6040830183611fc8565b90615c07565b90612a33612a1c6060830183611fc8565b90612ae9612a48612a1c610120840184611fc8565b60405194859360208501956101008201359260e08301359260c08101359260a08201359260808301359273ffffffffffffffffffffffffffffffffffffffff60208201359135168c9693909a9998959261012098959273ffffffffffffffffffffffffffffffffffffffff6101408a019d168952602089015260408801526060870152608086015260a085015260c084015260e08301526101008201520152565b0391612b1b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0938481018352826105ab565b51902060408051602081019283523091810191909152466060820152608092830181529091612b4a90826105ab565b51902090565b604051906040820182811067ffffffffffffffff821117612b7b575b60405260006020838281520152565b612b83610505565b612b6c565b906014116103595790601490565b7fffffffffffffffffffffffffffffffffffffffff0000000000000000000000009035818116939260148110612bcb57505050565b60140360031b82901b16169150565b9060c060a06108b793805184526020810151602085015260408101511515604085015265ffffffffffff80606083015116606086015260808201511660808501520151918160a0820152019061208a565b9294612c8c61044d95612c7a610100959998612c68612c54602097610140808c528b0190612bda565b9b878a019060208091805184520151910152565b80516060890152602001516080880152565b805160a08701526020015160c0860152565b73ffffffffffffffffffffffffffffffffffffffff81511660e0850152015191019060208091805184520151910152565b612d0661044d94612cf4612cdf60a0959998969960e0865260e0860190612bda565b98602085019060208091805184520151910152565b80516060840152602001516080830152565b019060208091805184520151910152565b9081602091031261035957516108b781610422565b9160206108b7938181520191612028565b90612d6c73ffffffffffffffffffffffffffffffffffffffff916108b797959694606085526060850191612028565b941660208201526040818503910152612028565b60009060033d11612d8d57565b905060046000803e60005160e01c90565b600060443d106108b7576040517ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc91823d016004833e815167ffffffffffffffff918282113d602484011117612e1a57818401948551938411612e22573d85010160208487010111612e1a57506108b7929101602001906105ab565b949350505050565b50949350505050565b612e386040820182611fc8565b612e50612e448461256d565b93610120810190611fc8565b9290303b1561035957600093612e949160405196879586957f957122ab00000000000000000000000000000000000000000000000000000000875260048701612d3d565b0381305afa9081612f1d575b5061044d576001612eaf612d80565b6308c379a014612ec8575b612ec057565b61044d612183565b612ed0612d9e565b80612edc575b50612eba565b80516000925015612ed657610f21906040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301612882565b80610f48612f2a9261057b565b38612ea0565b9190612f3b9061317f565b73ffffffffffffffffffffffffffffffffffffffff929183166130da5761306c57612f659061317f565b9116612ffe57612f725750565b604080517f220266b600000000000000000000000000000000000000000000000000000000815260048101929092526024820152602160448201527f41413332207061796d61737465722065787069726564206f72206e6f7420647560648201527f6500000000000000000000000000000000000000000000000000000000000000608482015260a490fd5b610f21826040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301608091815260406020820152601460408201527f41413334207369676e6174757265206572726f7200000000000000000000000060608201520190565b610f21836040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301608091815260406020820152601760408201527f414132322065787069726564206f72206e6f742064756500000000000000000060608201520190565b610f21846040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301608091815260406020820152601460408201527f41413234207369676e6174757265206572726f7200000000000000000000000060608201520190565b9291906131549061317f565b909273ffffffffffffffffffffffffffffffffffffffff808095169116036130da5761306c57612f65905b80156131d25761318e9061535f565b73ffffffffffffffffffffffffffffffffffffffff65ffffffffffff8060408401511642119081156131c2575b5091511691565b90506020830151164210386131bb565b50600090600090565b156131e257565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601860248201527f41413934206761732076616c756573206f766572666c6f7700000000000000006044820152fd5b916000915a9381519061325382826136b3565b61325c81612a0c565b602084015261329a6effffffffffffffffffffffffffffff60808401516060850151176040850151176101008401359060e0850135171711156131db565b6132a382613775565b6132ae818584613836565b97906132df6129346132d4875173ffffffffffffffffffffffffffffffffffffffff1690565b60208801519061546c565b6133db576132ec43600052565b73ffffffffffffffffffffffffffffffffffffffff61332460a0606097015173ffffffffffffffffffffffffffffffffffffffff1690565b166133c1575b505a810360a0840135106133545760809360c092604087015260608601525a900391013501910152565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152601e60408201527f41413430206f76657220766572696669636174696f6e4761734c696d6974000060608201520190565b909350816133d2929750858461455c565b9590923861332a565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152601a60408201527f4141323520696e76616c6964206163636f756e74206e6f6e636500000000000060608201520190565b9290916000925a825161345b81846136b3565b61346483612a0c565b60208501526134a26effffffffffffffffffffffffffffff60808301516060840151176040840151176101008601359060e0870135171711156131db565b6134ab81613775565b6134b78186868b613ba2565b98906134e86129346134dd865173ffffffffffffffffffffffffffffffffffffffff1690565b60208701519061546c565b6135e0576134f543600052565b73ffffffffffffffffffffffffffffffffffffffff61352d60a0606096015173ffffffffffffffffffffffffffffffffffffffff1690565b166135c5575b505a840360a08601351061355f5750604085015260608401526080919060c0905a900391013501910152565b604080517f220266b600000000000000000000000000000000000000000000000000000000815260048101929092526024820152601e60448201527f41413430206f76657220766572696669636174696f6e4761734c696d697400006064820152608490fd5b909250816135d79298508686856147ef565b96909138613533565b610f21826040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301608091815260406020820152601a60408201527f4141323520696e76616c6964206163636f756e74206e6f6e636500000000000060608201520190565b1561365557565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f4141393320696e76616c6964207061796d6173746572416e64446174610000006044820152fd5b613725906136dd6136c38261256d565b73ffffffffffffffffffffffffffffffffffffffff168452565b602081013560208401526080810135604084015260a0810135606084015260c0810135608084015260e081013560c084015261010081013560e0840152610120810190611fc8565b90811561376a5761374f61124c6112468460a09461374a601461044d9998101561364e565b612b88565b73ffffffffffffffffffffffffffffffffffffffff16910152565b505060a06000910152565b60a081015173ffffffffffffffffffffffffffffffffffffffff16156137b75760c060035b60ff60408401519116606084015102016080830151019101510290565b60c0600161379a565b6137d86040929594939560608352606083019061262c565b9460208201520152565b9061044d602f60405180947f414132332072657665727465643a20000000000000000000000000000000000060208301526138268151809260208686019101612067565b810103600f8101855201836105ab565b916000926000925a936139046020835193613865855173ffffffffffffffffffffffffffffffffffffffff1690565b9561387d6138766040830183611fc8565b9084613e0d565b60a086015173ffffffffffffffffffffffffffffffffffffffff16906138a243600052565b85809373ffffffffffffffffffffffffffffffffffffffff809416159889613b3a575b60600151908601516040517f3a871cdd0000000000000000000000000000000000000000000000000000000081529788968795869390600485016137c0565b03938a1690f1829181613b1a575b50613b115750600190613923612d80565b6308c379a014613abd575b50613a50575b613941575b50505a900391565b61396b9073ffffffffffffffffffffffffffffffffffffffff166000526000602052604060002090565b613986610a2c82546dffffffffffffffffffffffffffff1690565b8083116139e3576139dc926dffffffffffffffffffffffffffff9103166dffffffffffffffffffffffffffff167fffffffffffffffffffffffffffffffffffff0000000000000000000000000000825416179055565b3880613939565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152601760408201527f41413231206469646e2774207061792070726566756e6400000000000000000060608201520190565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152601660408201527f4141323320726576657274656420286f72204f4f47290000000000000000000060608201520190565b613ac5612d9e565b9081613ad1575061392e565b610f2191613adf91506137e2565b6040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301612882565b95506139349050565b613b3391925060203d81116123385761232981836105ab565b9038613912565b9450613b80610a2c613b6c8c73ffffffffffffffffffffffffffffffffffffffff166000526000602052604060002090565b546dffffffffffffffffffffffffffff1690565b8b811115613b975750856060835b969150506138c5565b606087918d03613b8e565b90926000936000935a94613beb6020835193613bd2855173ffffffffffffffffffffffffffffffffffffffff1690565b9561387d613be36040830183611fc8565b90848c61412b565b03938a1690f1829181613ded575b50613de45750600190613c0a612d80565b6308c379a014613d8e575b50613d20575b613c29575b5050505a900391565b613c539073ffffffffffffffffffffffffffffffffffffffff166000526000602052604060002090565b91613c6f610a2c84546dffffffffffffffffffffffffffff1690565b90818311613cba575082547fffffffffffffffffffffffffffffffffffff0000000000000000000000000000169190036dffffffffffffffffffffffffffff16179055388080613c20565b604080517f220266b600000000000000000000000000000000000000000000000000000000815260048101929092526024820152601760448201527f41413231206469646e2774207061792070726566756e640000000000000000006064820152608490fd5b610f21846040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301608091815260406020820152601660408201527f4141323320726576657274656420286f72204f4f47290000000000000000000060608201520190565b613d96612d9e565b9081613da25750613c15565b8691613dae91506137e2565b90610f216040519283927f220266b60000000000000000000000000000000000000000000000000000000084526004840161289a565b9650613c1b9050565b613e0691925060203d81116123385761232981836105ab565b9038613bf9565b909180613e1957505050565b81515173ffffffffffffffffffffffffffffffffffffffff1692833b6140be57606083510151604051907f570e1a3600000000000000000000000000000000000000000000000000000000825260208280613e78878760048401612d2c565b0381600073ffffffffffffffffffffffffffffffffffffffff95867f00000000000000000000000000000000000000000000000000000000000000001690f19182156140b1575b600092614091575b508082169586156140245716809503613fb7573b15613f4a5761124c6112467fd51a9c61267aa6196961883ecf5ff2da6619c37dac0fa92122513fb32c032d2d93613f1193612b88565b602083810151935160a001516040805173ffffffffffffffffffffffffffffffffffffffff9485168152939091169183019190915290a3565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152602060408201527f4141313520696e6974436f6465206d757374206372656174652073656e64657260608201520190565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152602060408201527f4141313420696e6974436f6465206d7573742072657475726e2073656e64657260608201520190565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152601b60408201527f4141313320696e6974436f6465206661696c6564206f72204f4f47000000000060608201520190565b6140aa91925060203d811161146a5761145b81836105ab565b9038613ec7565b6140b9612183565b613ebf565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152601f60408201527f414131302073656e64657220616c726561647920636f6e73747275637465640060608201520190565b9290918161413a575b50505050565b82515173ffffffffffffffffffffffffffffffffffffffff1693843b6143e257606084510151604051907f570e1a3600000000000000000000000000000000000000000000000000000000825260208280614199888860048401612d2c565b0381600073ffffffffffffffffffffffffffffffffffffffff95867f00000000000000000000000000000000000000000000000000000000000000001690f19182156143d5575b6000926143b5575b5080821696871561434757168096036142d9573b15614273575061124c6112467fd51a9c61267aa6196961883ecf5ff2da6619c37dac0fa92122513fb32c032d2d9361423393612b88565b602083810151935160a001516040805173ffffffffffffffffffffffffffffffffffffffff9485168152939091169183019190915290a338808080614134565b604080517f220266b600000000000000000000000000000000000000000000000000000000815260048101929092526024820152602060448201527f4141313520696e6974436f6465206d757374206372656174652073656e6465726064820152608490fd5b610f21826040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301608091815260406020820152602060408201527f4141313420696e6974436f6465206d7573742072657475726e2073656e64657260608201520190565b610f21846040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301608091815260406020820152601b60408201527f4141313320696e6974436f6465206661696c6564206f72204f4f47000000000060608201520190565b6143ce91925060203d811161146a5761145b81836105ab565b90386141e8565b6143dd612183565b6141e0565b604080517f220266b600000000000000000000000000000000000000000000000000000000815260048101929092526024820152601f60448201527f414131302073656e64657220616c726561647920636f6e7374727563746564006064820152608490fd5b1561444f57565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f4141343120746f6f206c6974746c6520766572696669636174696f6e476173006044820152fd5b919060408382031261035957825167ffffffffffffffff81116103595783019080601f83011215610359578151916144e483610639565b916144f260405193846105ab565b838352602084830101116103595760209261451291848085019101612067565b92015190565b9061044d602f60405180947f414133332072657665727465643a20000000000000000000000000000000000060208301526138268151809260208686019101612067565b93919260609460009460009380519261459b60a08a86015195614580888811614448565b015173ffffffffffffffffffffffffffffffffffffffff1690565b916145c68373ffffffffffffffffffffffffffffffffffffffff166000526000602052604060002090565b946145e2610a2c87546dffffffffffffffffffffffffffff1690565b968588106147825773ffffffffffffffffffffffffffffffffffffffff60208a98946146588a966dffffffffffffffffffffffffffff8b6146919e03166dffffffffffffffffffffffffffff167fffffffffffffffffffffffffffffffffffff0000000000000000000000000000825416179055565b015194604051998a98899788937ff465c77e000000000000000000000000000000000000000000000000000000008552600485016137c0565b0395169103f190818391849361475c575b506147555750506001906146b4612d80565b6308c379a014614733575b506146c657565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152601660408201527f4141333320726576657274656420286f72204f4f47290000000000000000000060608201520190565b61473b612d9e565b908161474757506146bf565b610f2191613adf9150614518565b9450925050565b90925061477b91503d8085833e61477381836105ab565b8101906144ad565b91386146a2565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152601e60408201527f41413331207061796d6173746572206465706f73697420746f6f206c6f77000060608201520190565b91949293909360609560009560009382519061481660a08b84015193614580848611614448565b936148418573ffffffffffffffffffffffffffffffffffffffff166000526000602052604060002090565b61485c610a2c82546dffffffffffffffffffffffffffff1690565b8781106149b7579273ffffffffffffffffffffffffffffffffffffffff60208a989693946146588a966dffffffffffffffffffffffffffff8d6148d69e9c9a03166dffffffffffffffffffffffffffff167fffffffffffffffffffffffffffffffffffff0000000000000000000000000000825416179055565b0395169103f1908183918493614999575b506149915750506001906148f9612d80565b6308c379a014614972575b5061490c5750565b604080517f220266b600000000000000000000000000000000000000000000000000000000815260048101929092526024820152601660448201527f4141333320726576657274656420286f72204f4f4729000000000000000000006064820152608490fd5b61497a612d9e565b90816149865750614904565b613dae925050614518565b955093505050565b9092506149b091503d8085833e61477381836105ab565b91386148e7565b610f218a6040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301608091815260406020820152601e60408201527f41413331207061796d6173746572206465706f73697420746f6f206c6f77000060608201520190565b60031115614a2f57565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b929190614a7c6040916002865260606020870152606086019061208a565b930152565b939291906003811015614a2f57604091614a7c91865260606020870152606086019061208a565b9061044d603660405180947f4141353020706f73744f702072657665727465643a20000000000000000000006020830152614aec8151809260208686019101612067565b81010360168101855201836105ab565b929190925a93600091805191614b1183615318565b9260a0810195614b35875173ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff93908481169081614ca457505050614b76825173ffffffffffffffffffffffffffffffffffffffff1690565b985b5a90030193840297604084019089825110614c37577f49628fd1471006c1482da88028e9ce4dbb080b815c9b0344d39e5a8e6ec1419f94614bc26020928c614c329551039061553a565b015194896020614c04614be9865173ffffffffffffffffffffffffffffffffffffffff1690565b9a5173ffffffffffffffffffffffffffffffffffffffff1690565b9401519785604051968796169a16988590949392606092608083019683521515602083015260408201520152565b0390a4565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152602060408201527f414135312070726566756e642062656c6f772061637475616c476173436f737460608201520190565b9a918051614cb4575b5050614b78565b6060850151600099509091803b15614ddb579189918983614d07956040518097819682957fa9a234090000000000000000000000000000000000000000000000000000000084528c029060048401614a5e565b0393f19081614dc8575b50614dc3576001614d20612d80565b6308c379a014614da4575b614d37575b3880614cad565b6040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152601260408201527f4141353020706f73744f7020726576657274000000000000000000000000000060608201520190565b614dac612d9e565b80614db75750614d2b565b613adf610f2191614aa8565b614d30565b80610f48614dd59261057b565b38614d11565b8980fd5b9392915a90600092805190614df382615318565b9360a0830196614e17885173ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff95908681169081614f0d57505050614e58845173ffffffffffffffffffffffffffffffffffffffff1690565b915b5a9003019485029860408301908a825110614ea757507f49628fd1471006c1482da88028e9ce4dbb080b815c9b0344d39e5a8e6ec1419f949392614bc2614c32938c60209451039061553a565b604080517f220266b600000000000000000000000000000000000000000000000000000000815260048101929092526024820152602060448201527f414135312070726566756e642062656c6f772061637475616c476173436f73746064820152608490fd5b93918051614f1d575b5050614e5a565b606087015160009a509091803b1561504357918a918a83614f70956040518097819682957fa9a234090000000000000000000000000000000000000000000000000000000084528c029060048401614a5e565b0393f19081615030575b5061502b576001614f89612d80565b6308c379a01461500e575b614fa0575b3880614f16565b610f218b6040519182917f220266b600000000000000000000000000000000000000000000000000000000835260048301608091815260406020820152601260408201527f4141353020706f73744f7020726576657274000000000000000000000000000060608201520190565b615016612d9e565b806150215750614f94565b613dae8d91614aa8565b614f99565b80610f4861503d9261057b565b38614f7a565b8a80fd5b909392915a9480519161505983615318565b9260a081019561507d875173ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff938185169182615165575050506150bd825173ffffffffffffffffffffffffffffffffffffffff1690565b985b5a90030193840297604084019089825110614c37577f49628fd1471006c1482da88028e9ce4dbb080b815c9b0344d39e5a8e6ec1419f946151096020928c614c329551039061553a565b61511288614a25565b015194896020615139614be9865173ffffffffffffffffffffffffffffffffffffffff1690565b940151604080519182529815602082015297880152606087015290821695909116939081906080820190565b9a918151615175575b50506150bf565b8784026151818a614a25565b60028a1461520c576060860151823b15610359576151d493600080948d604051978896879586937fa9a2340900000000000000000000000000000000000000000000000000000000855260048501614a81565b0393f180156151ff575b6151ec575b505b388061516e565b80610f486151f99261057b565b386151e3565b615207612183565b6151de565b6060860151823b156103595761525793600080948d604051978896879586937fa9a2340900000000000000000000000000000000000000000000000000000000855260048501614a81565b0393f19081615305575b50615300576001615270612d80565b6308c379a0146152ed575b156151e5576040517f220266b600000000000000000000000000000000000000000000000000000000815280610f21600482016080906000815260406020820152601260408201527f4141353020706f73744f7020726576657274000000000000000000000000000060608201520190565b6152f5612d9e565b80614db7575061527b565b6151e5565b80610f486153129261057b565b38615261565b60e060c082015191015180821461533c57480180821015615337575090565b905090565b5090565b6040519061534d8261058f565b60006040838281528260208201520152565b615367615340565b5065ffffffffffff808260a01c1680156153b3575b604051926153898461058f565b73ffffffffffffffffffffffffffffffffffffffff8116845260d01c602084015216604082015290565b508061537c565b6153cf6153d5916153c9615340565b5061535f565b9161535f565b9073ffffffffffffffffffffffffffffffffffffffff9182825116928315615461575b65ffffffffffff928391826040816020850151169301511693836040816020840151169201511690808410615459575b50808511615451575b506040519561543f8761058f565b16855216602084015216604082015290565b935038615431565b925038615428565b8151811693506153f8565b73ffffffffffffffffffffffffffffffffffffffff16600052600160205267ffffffffffffffff6154c88260401c60406000209077ffffffffffffffffffffffffffffffffffffffffffffffff16600052602052604060002090565b918254926154d584612491565b9055161490565b9073ffffffffffffffffffffffffffffffffffffffff6154fa612b50565b9216600052600060205263ffffffff600160406000206dffffffffffffffffffffffffffff815460781c1685520154166020830152565b61044d3361562b565b73ffffffffffffffffffffffffffffffffffffffff16600052600060205260406000206dffffffffffffffffffffffffffff8082541692830180931161561e575b8083116155c05761044d92166dffffffffffffffffffffffffffff167fffffffffffffffffffffffffffffffffffff0000000000000000000000000000825416179055565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f6465706f736974206f766572666c6f77000000000000000000000000000000006044820152fd5b615626612190565b61557b565b73ffffffffffffffffffffffffffffffffffffffff9061564b348261553a565b168060005260006020527f2da466a7b24304f47e87fa2e1e5a81b9831ce54fec19055ce277ca2f39ba42c460206dffffffffffffffffffffffffffff60406000205416604051908152a2565b1561569e57565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601a60248201527f6d757374207370656369667920756e7374616b652064656c61790000000000006044820152fd5b1561570357565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601c60248201527f63616e6e6f7420646563726561736520756e7374616b652074696d65000000006044820152fd5b1561576857565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f6e6f207374616b652073706563696669656400000000000000000000000000006044820152fd5b156157cd57565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600e60248201527f7374616b65206f766572666c6f770000000000000000000000000000000000006044820152fd5b9065ffffffffffff6080600161044d9461588b6dffffffffffffffffffffffffffff86511682906dffffffffffffffffffffffffffff167fffffffffffffffffffffffffffffffffffff0000000000000000000000000000825416179055565b602085015115156eff000000000000000000000000000082549160701b16807fffffffffffffffffffffffffffffffffff00ffffffffffffffffffffffffffff83161783557fffffff000000000000000000000000000000ffffffffffffffffffffffffffff7cffffffffffffffffffffffffffff000000000000000000000000000000604089015160781b16921617178155019263ffffffff6060820151167fffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000008554161784550151167fffffffffffffffffffffffffffffffffffffffffffff000000000000ffffffff69ffffffffffff0000000083549260201b169116179055565b1561599657565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601160248201527f616c726561647920756e7374616b696e670000000000000000000000000000006044820152fd5b91909165ffffffffffff808094169116019182116121cd57565b15615a1557565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601460248201527f4e6f207374616b6520746f2077697468647261770000000000000000000000006044820152fd5b15615a7a57565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f6d7573742063616c6c20756e6c6f636b5374616b6528292066697273740000006044820152fd5b15615adf57565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601b60248201527f5374616b65207769746864726177616c206973206e6f742064756500000000006044820152fd5b15615b4457565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601860248201527f6661696c656420746f207769746864726177207374616b6500000000000000006044820152fd5b15615ba957565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f6661696c656420746f20776974686472617700000000000000000000000000006044820152fd5b816040519182372090565b9060009283809360208451940192f190565b3d610800808211615c4b575b50604051906020818301016040528082526000602083013e90565b905038615c3056fea2646970667358221220a706d8b02d7086d80e9330811f5af84b2614abdc5e9a1f2260126070a31d7cee64736f6c634300081100336080806040523461001657610210908161001c8239f35b600080fdfe6080604052600436101561001257600080fd5b6000803560e01c63570e1a361461002857600080fd5b346100c95760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126100c95760043567ffffffffffffffff918282116100c957366023830112156100c95781600401359283116100c95736602484840101116100c9576100c561009e84602485016100fc565b60405173ffffffffffffffffffffffffffffffffffffffff90911681529081906020820190565b0390f35b80fd5b507f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b90806014116101bb5767ffffffffffffffff917fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec82018381116101cd575b604051937fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0603f81600b8701160116850190858210908211176101c0575b604052808452602084019036848401116101bb576020946000600c819682946014880187378301015251923560601c5af19060005191156101b557565b60009150565b600080fd5b6101c86100cc565b610178565b6101d56100cc565b61013a56fea26469706673582212201927e80b76ab9b71c952137dd676621a9fdf520c25928815636594036eb1c40364736f6c63430008110033"}}},{package:"$root$",file:"test/e2e/seeder/contracts/entrypoint.ts"}],[4897,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.simpleAccountFactoryBytecode=f.simpleAccountFactoryAbi=void 0;f.simpleAccountFactoryAbi=[{inputs:[{internalType:"contract IEntryPoint",name:"_entryPoint",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"accountImplementation",outputs:[{internalType:"contract SimpleAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"salt",type:"uint256"}],name:"createAccount",outputs:[{internalType:"contract SimpleAccount",name:"ret",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"salt",type:"uint256"}],name:"getAccountAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],f.simpleAccountFactoryBytecode="0x60a060405234801561001057600080fd5b50604051620046593803806200465983398181016040528101906100349190610124565b80604051610041906100a1565b61004b91906101b0565b604051809103906000f080158015610067573d6000803e3d6000fd5b5073ffffffffffffffffffffffffffffffffffffffff1660808173ffffffffffffffffffffffffffffffffffffffff1681525050506101cb565b61358580620010d483390190565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006100df826100b4565b9050919050565b60006100f1826100d4565b9050919050565b610101816100e6565b811461010c57600080fd5b50565b60008151905061011e816100f8565b92915050565b60006020828403121561013a576101396100af565b5b60006101488482850161010f565b91505092915050565b6000819050919050565b600061017661017161016c846100b4565b610151565b6100b4565b9050919050565b60006101888261015b565b9050919050565b600061019a8261017d565b9050919050565b6101aa8161018f565b82525050565b60006020820190506101c560008301846101a1565b92915050565b608051610edf620001f56000396000818161010b015281816101dd01526102470152610edf6000f3fe60806040523480156200001157600080fd5b5060043610620000465760003560e01c80630d253d76146200004b57806311464fbe14620000815780635fbfb9cf14620000a3575b600080fd5b620000696004803603810190620000639190620003fb565b620000d9565b60405162000078919062000453565b60405180910390f35b6200008b620001db565b6040516200009a9190620004db565b60405180910390f35b620000c16004803603810190620000bb9190620003fb565b620001ff565b604051620000d09190620004db565b60405180910390f35b6000620001d38260001b60405180602001620000f59062000348565b6020820181038252601f19601f820116604052507f0000000000000000000000000000000000000000000000000000000000000000866040516024016200013d919062000453565b60405160208183030381529060405263c4d66de860e01b6020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff83818316178352505050506040516020016200019592919062000592565b604051602081830303815290604052604051602001620001b792919062000608565b6040516020818303038152906040528051906020012062000306565b905092915050565b7f000000000000000000000000000000000000000000000000000000000000000081565b6000806200020e8484620000d9565b905060008173ffffffffffffffffffffffffffffffffffffffff163b905060008111156200024157819250505062000300565b8360001b7f00000000000000000000000000000000000000000000000000000000000000008660405160240162000279919062000453565b60405160208183030381529060405263c4d66de860e01b6020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8381831617835250505050604051620002cc9062000348565b620002d992919062000592565b8190604051809103906000f5905080158015620002fa573d6000803e3d6000fd5b50925050505b92915050565b6000620003158383306200031d565b905092915050565b6000604051836040820152846020820152828152600b810160ff815360558120925050509392505050565b610879806200063183390190565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600062000388826200035b565b9050919050565b6200039a816200037b565b8114620003a657600080fd5b50565b600081359050620003ba816200038f565b92915050565b6000819050919050565b620003d581620003c0565b8114620003e157600080fd5b50565b600081359050620003f581620003ca565b92915050565b6000806040838503121562000415576200041462000356565b5b60006200042585828601620003a9565b92505060206200043885828601620003e4565b9150509250929050565b6200044d816200037b565b82525050565b60006020820190506200046a600083018462000442565b92915050565b6000819050919050565b60006200049b620004956200048f846200035b565b62000470565b6200035b565b9050919050565b6000620004af826200047a565b9050919050565b6000620004c382620004a2565b9050919050565b620004d581620004b6565b82525050565b6000602082019050620004f26000830184620004ca565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b838110156200053457808201518184015260208101905062000517565b60008484015250505050565b6000601f19601f8301169050919050565b60006200055e82620004f8565b6200056a818562000503565b93506200057c81856020860162000514565b620005878162000540565b840191505092915050565b6000604082019050620005a9600083018562000442565b8181036020830152620005bd818462000551565b90509392505050565b600081905092915050565b6000620005de82620004f8565b620005ea8185620005c6565b9350620005fc81856020860162000514565b80840191505092915050565b6000620006168285620005d1565b9150620006248284620005d1565b9150819050939250505056fe608060405260405161087938038061087983398181016040528101906100259190610520565b6100378282600061003e60201b60201c565b505061074f565b61004d8361007660201b60201c565b60008251118061005a5750805b156100715761006f83836100cb60201b60201c565b505b505050565b610085816100fe60201b60201c565b8073ffffffffffffffffffffffffffffffffffffffff167fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b60405160405180910390a250565b60606100f68383604051806060016040528060278152602001610852602791396101c360201b60201c565b905092915050565b61010d8161024f60201b60201c565b61014c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610143906105ff565b60405180910390fd5b8061017f7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc60001b61027260201b60201c565b60000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b60606000808573ffffffffffffffffffffffffffffffffffffffff16856040516101ed9190610666565b600060405180830381855af49150503d8060008114610228576040519150601f19603f3d011682016040523d82523d6000602084013e61022d565b606091505b50915091506102448683838761027c60201b60201c565b925050509392505050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b6000819050919050565b606083156102e45760008351036102dc5761029c8561024f60201b60201c565b6102db576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102d2906106c9565b60405180910390fd5b5b8290506102f5565b6102f483836102fd60201b60201c565b5b949350505050565b6000825111156103105781518083602001fd5b806040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610344919061072d565b60405180910390fd5b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061038c82610361565b9050919050565b61039c81610381565b81146103a757600080fd5b50565b6000815190506103b981610393565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b610412826103c9565b810181811067ffffffffffffffff82111715610431576104306103da565b5b80604052505050565b600061044461034d565b90506104508282610409565b919050565b600067ffffffffffffffff8211156104705761046f6103da565b5b610479826103c9565b9050602081019050919050565b60005b838110156104a4578082015181840152602081019050610489565b60008484015250505050565b60006104c36104be84610455565b61043a565b9050828152602081018484840111156104df576104de6103c4565b5b6104ea848285610486565b509392505050565b600082601f830112610507576105066103bf565b5b81516105178482602086016104b0565b91505092915050565b6000806040838503121561053757610536610357565b5b6000610545858286016103aa565b925050602083015167ffffffffffffffff8111156105665761056561035c565b5b610572858286016104f2565b9150509250929050565b600082825260208201905092915050565b7f455243313936373a206e657720696d706c656d656e746174696f6e206973206e60008201527f6f74206120636f6e747261637400000000000000000000000000000000000000602082015250565b60006105e9602d8361057c565b91506105f48261058d565b604082019050919050565b60006020820190508181036000830152610618816105dc565b9050919050565b600081519050919050565b600081905092915050565b60006106408261061f565b61064a818561062a565b935061065a818560208601610486565b80840191505092915050565b60006106728284610635565b915081905092915050565b7f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000600082015250565b60006106b3601d8361057c565b91506106be8261067d565b602082019050919050565b600060208201905081810360008301526106e2816106a6565b9050919050565b600081519050919050565b60006106ff826106e9565b610709818561057c565b9350610719818560208601610486565b610722816103c9565b840191505092915050565b6000602082019050818103600083015261074781846106f4565b905092915050565b60f58061075d6000396000f3fe608060405236601057600e6018565b005b60166018565b005b601e602c565b602a6026602e565b603b565b565b565b600060366060565b905090565b3660008037600080366000845af43d6000803e8060008114605b573d6000f35b3d6000fd5b6000608c7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc60001b60b5565b60000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b600081905091905056fea2646970667358221220e91df930f25c61d529b4137f50e631e23eccd38c73a16d064ccea73f532839f764736f6c63430008130033416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c206661696c6564a2646970667358221220388052dda0ef8cd3ad52d34b5dabe7958153462dcc164a8f5f201ad1bfe02da764736f6c6343000813003360c06040523073ffffffffffffffffffffffffffffffffffffffff1660809073ffffffffffffffffffffffffffffffffffffffff168152503480156200004457600080fd5b50604051620035853803806200358583398181016040528101906200006a9190620001f9565b8073ffffffffffffffffffffffffffffffffffffffff1660a08173ffffffffffffffffffffffffffffffffffffffff1681525050620000ae620000b560201b60201c565b506200030f565b600060019054906101000a900460ff161562000108576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620000ff90620002b2565b60405180910390fd5b60ff801660008054906101000a900460ff1660ff1614620001795760ff6000806101000a81548160ff021916908360ff1602179055507f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb384740249860ff604051620001709190620002f2565b60405180910390a15b565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000620001ad8262000180565b9050919050565b6000620001c182620001a0565b9050919050565b620001d381620001b4565b8114620001df57600080fd5b50565b600081519050620001f381620001c8565b92915050565b6000602082840312156200021257620002116200017b565b5b60006200022284828501620001e2565b91505092915050565b600082825260208201905092915050565b7f496e697469616c697a61626c653a20636f6e747261637420697320696e69746960008201527f616c697a696e6700000000000000000000000000000000000000000000000000602082015250565b60006200029a6027836200022b565b9150620002a7826200023c565b604082019050919050565b60006020820190508181036000830152620002cd816200028b565b9050919050565b600060ff82169050919050565b620002ec81620002d4565b82525050565b6000602082019050620003096000830184620002e1565b92915050565b60805160a05161322d6200035860003960008181610b7601526114f60152600081816106a90152818161073701528181610959015281816109e70152610a97015261322d6000f3fe60806040526004361061010c5760003560e01c806352d1902d11610095578063bc197c8111610064578063bc197c8114610343578063c399ec8814610380578063c4d66de8146103ab578063d087d288146103d4578063f23a6e61146103ff57610113565b806352d1902d146102995780638da5cb5b146102c4578063b0d691fe146102ef578063b61d27f61461031a57610113565b80633659cfe6116100dc5780633659cfe6146101e45780633a871cdd1461020d5780634a58db191461024a5780634d44560d146102545780634f1ef2861461027d57610113565b806223de291461011857806301ffc9a714610141578063150b7a021461017e57806318dfb3c7146101bb57610113565b3661011357005b600080fd5b34801561012457600080fd5b5061013f600480360381019061013a9190611c1d565b61043c565b005b34801561014d57600080fd5b5061016860048036038101906101639190611d44565b610446565b6040516101759190611d8c565b60405180910390f35b34801561018a57600080fd5b506101a560048036038101906101a09190611da7565b610580565b6040516101b29190611e3e565b60405180910390f35b3480156101c757600080fd5b506101e260048036038101906101dd9190611f05565b610595565b005b3480156101f057600080fd5b5061020b60048036038101906102069190611f86565b6106a7565b005b34801561021957600080fd5b50610234600480360381019061022f919061200e565b61082f565b604051610241919061208c565b60405180910390f35b610252610862565b005b34801561026057600080fd5b5061027b600480360381019061027691906120e5565b6108d7565b005b61029760048036038101906102929190612266565b610957565b005b3480156102a557600080fd5b506102ae610a93565b6040516102bb91906122d1565b60405180910390f35b3480156102d057600080fd5b506102d9610b4c565b6040516102e691906122fb565b60405180910390f35b3480156102fb57600080fd5b50610304610b72565b6040516103119190612375565b60405180910390f35b34801561032657600080fd5b50610341600480360381019061033c9190612390565b610b9a565b005b34801561034f57600080fd5b5061036a6004803603810190610365919061245a565b610bf7565b6040516103779190611e3e565b60405180910390f35b34801561038c57600080fd5b50610395610c0f565b6040516103a2919061208c565b60405180910390f35b3480156103b757600080fd5b506103d260048036038101906103cd9190611f86565b610c97565b005b3480156103e057600080fd5b506103e9610dd7565b6040516103f6919061208c565b60405180910390f35b34801561040b57600080fd5b5061042660048036038101906104219190612536565b610e62565b6040516104339190611e3e565b60405180910390f35b5050505050505050565b60007f150b7a02000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061051157507f4e2312e0000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b8061057957507f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b9050919050565b600063150b7a0260e01b905095945050505050565b61059d610e78565b8181905084849050146105e5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105dc9061262d565b60405180910390fd5b60005b848490508110156106a05761068d8585838181106106095761060861264d565b5b905060200201602081019061061e9190611f86565b60008585858181106106335761063261264d565b5b9050602002810190610645919061268b565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050610f47565b80806106989061271d565b9150506105e8565b5050505050565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff1603610735576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161072c906127d7565b60405180910390fd5b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16610774610fcb565b73ffffffffffffffffffffffffffffffffffffffff16146107ca576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107c190612869565b60405180910390fd5b6107d381611022565b61082c81600067ffffffffffffffff8111156107f2576107f161213b565b5b6040519080825280601f01601f1916602001820160405280156108245781602001600182028036833780820191505090505b50600061102d565b50565b600061083961119b565b6108438484611212565b905061085284602001356112f0565b61085b826112f3565b9392505050565b61086a610b72565b73ffffffffffffffffffffffffffffffffffffffff1663b760faf934306040518363ffffffff1660e01b81526004016108a391906122fb565b6000604051808303818588803b1580156108bc57600080fd5b505af11580156108d0573d6000803e3d6000fd5b5050505050565b6108df61138f565b6108e7610b72565b73ffffffffffffffffffffffffffffffffffffffff1663205c287883836040518363ffffffff1660e01b8152600401610921929190612898565b600060405180830381600087803b15801561093b57600080fd5b505af115801561094f573d6000803e3d6000fd5b505050505050565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff16036109e5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109dc906127d7565b60405180910390fd5b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16610a24610fcb565b73ffffffffffffffffffffffffffffffffffffffff1614610a7a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a7190612869565b60405180910390fd5b610a8382611022565b610a8f8282600161102d565b5050565b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff1614610b23576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b1a90612933565b60405180910390fd5b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc60001b905090565b600060029054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60007f0000000000000000000000000000000000000000000000000000000000000000905090565b610ba2610e78565b610bf1848484848080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050610f47565b50505050565b600063bc197c8160e01b905098975050505050505050565b6000610c19610b72565b73ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401610c5191906122fb565b602060405180830381865afa158015610c6e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c929190612968565b905090565b60008060019054906101000a900460ff16159050808015610cc85750600160008054906101000a900460ff1660ff16105b80610cf55750610cd730611457565b158015610cf45750600160008054906101000a900460ff1660ff16145b5b610d34576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d2b90612a07565b60405180910390fd5b60016000806101000a81548160ff021916908360ff1602179055508015610d71576001600060016101000a81548160ff0219169083151502179055505b610d7a8261147a565b8015610dd35760008060016101000a81548160ff0219169083151502179055507f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024986001604051610dca9190612a6f565b60405180910390a15b5050565b6000610de1610b72565b73ffffffffffffffffffffffffffffffffffffffff166335567e1a3060006040518363ffffffff1660e01b8152600401610e1c929190612ae9565b602060405180830381865afa158015610e39573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e5d9190612968565b905090565b600063f23a6e6160e01b90509695505050505050565b610e80610b72565b73ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610f065750600060029054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b610f45576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f3c90612b5e565b60405180910390fd5b565b6000808473ffffffffffffffffffffffffffffffffffffffff168484604051610f709190612bef565b60006040518083038185875af1925050503d8060008114610fad576040519150601f19603f3d011682016040523d82523d6000602084013e610fb2565b606091505b509150915081610fc457805160208201fd5b5050505050565b6000610ff97f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc60001b61155a565b60000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b61102a61138f565b50565b6110597f4910fdfa16fed3260ed0e7147f7cc6da11a60208b5b9406d12a635614ffd914360001b611564565b60000160009054906101000a900460ff161561107d576110788361156e565b611196565b8273ffffffffffffffffffffffffffffffffffffffff166352d1902d6040518163ffffffff1660e01b8152600401602060405180830381865afa9250505080156110e557506040513d601f19601f820116820180604052508101906110e29190612c1b565b60015b611124576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161111b90612cba565b60405180910390fd5b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc60001b8114611189576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161118090612d4c565b60405180910390fd5b50611195838383611627565b5b505050565b6111a3610b72565b73ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611210576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161120790612db8565b60405180910390fd5b565b60008061121e83611653565b905061128684806101400190611234919061268b565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050508261168990919063ffffffff16565b73ffffffffffffffffffffffffffffffffffffffff16600060029054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146112e45760019150506112ea565b60009150505b92915050565b50565b6000811461138c5760003373ffffffffffffffffffffffffffffffffffffffff16827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9060405161134390612dfe565b600060405180830381858888f193505050503d8060008114611381576040519150601f19603f3d011682016040523d82523d6000602084013e611386565b606091505b50509050505b50565b600060029054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16148061141657503073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b611455576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161144c90612e5f565b60405180910390fd5b565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b80600060026101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600060029054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff167f47e55c76e7a6f1fd8996a1da8008c1ea29699cca35e7bcd057f2dec313b6e5de60405160405180910390a350565b6000819050919050565b6000819050919050565b61157781611457565b6115b6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115ad90612ef1565b60405180910390fd5b806115e37f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc60001b61155a565b60000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b611630836116b0565b60008251118061163d5750805b1561164e5761164c83836116ff565b505b505050565b60007f19457468657265756d205369676e6564204d6573736167653a0a33320000000060005281601c52603c6000209050919050565b6000806000611698858561172c565b915091506116a58161177d565b819250505092915050565b6116b98161156e565b8073ffffffffffffffffffffffffffffffffffffffff167fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b60405160405180910390a250565b606061172483836040518060600160405280602781526020016131d1602791396118e3565b905092915050565b600080604183510361176d5760008060006020860151925060408601519150606086015160001a905061176187828585611969565b94509450505050611776565b60006002915091505b9250929050565b6000600481111561179157611790612f11565b5b8160048111156117a4576117a3612f11565b5b03156118e057600160048111156117be576117bd612f11565b5b8160048111156117d1576117d0612f11565b5b03611811576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161180890612f8c565b60405180910390fd5b6002600481111561182557611824612f11565b5b81600481111561183857611837612f11565b5b03611878576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161186f90612ff8565b60405180910390fd5b6003600481111561188c5761188b612f11565b5b81600481111561189f5761189e612f11565b5b036118df576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016118d69061308a565b60405180910390fd5b5b50565b60606000808573ffffffffffffffffffffffffffffffffffffffff168560405161190d9190612bef565b600060405180830381855af49150503d8060008114611948576040519150601f19603f3d011682016040523d82523d6000602084013e61194d565b606091505b509150915061195e86838387611a4b565b925050509392505050565b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08360001c11156119a4576000600391509150611a42565b6000600187878787604051600081526020016040526040516119c994939291906130b9565b6020604051602081039080840390855afa1580156119eb573d6000803e3d6000fd5b505050602060405103519050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603611a3957600060019250925050611a42565b80600092509250505b94509492505050565b60608315611aad576000835103611aa557611a6585611457565b611aa4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a9b9061314a565b60405180910390fd5b5b829050611ab8565b611ab78383611ac0565b5b949350505050565b600082511115611ad35781518083602001fd5b806040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611b0791906131ae565b60405180910390fd5b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611b4f82611b24565b9050919050565b611b5f81611b44565b8114611b6a57600080fd5b50565b600081359050611b7c81611b56565b92915050565b6000819050919050565b611b9581611b82565b8114611ba057600080fd5b50565b600081359050611bb281611b8c565b92915050565b600080fd5b600080fd5b600080fd5b60008083601f840112611bdd57611bdc611bb8565b5b8235905067ffffffffffffffff811115611bfa57611bf9611bbd565b5b602083019150836001820283011115611c1657611c15611bc2565b5b9250929050565b60008060008060008060008060c0898b031215611c3d57611c3c611b1a565b5b6000611c4b8b828c01611b6d565b9850506020611c5c8b828c01611b6d565b9750506040611c6d8b828c01611b6d565b9650506060611c7e8b828c01611ba3565b955050608089013567ffffffffffffffff811115611c9f57611c9e611b1f565b5b611cab8b828c01611bc7565b945094505060a089013567ffffffffffffffff811115611cce57611ccd611b1f565b5b611cda8b828c01611bc7565b92509250509295985092959890939650565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b611d2181611cec565b8114611d2c57600080fd5b50565b600081359050611d3e81611d18565b92915050565b600060208284031215611d5a57611d59611b1a565b5b6000611d6884828501611d2f565b91505092915050565b60008115159050919050565b611d8681611d71565b82525050565b6000602082019050611da16000830184611d7d565b92915050565b600080600080600060808688031215611dc357611dc2611b1a565b5b6000611dd188828901611b6d565b9550506020611de288828901611b6d565b9450506040611df388828901611ba3565b935050606086013567ffffffffffffffff811115611e1457611e13611b1f565b5b611e2088828901611bc7565b92509250509295509295909350565b611e3881611cec565b82525050565b6000602082019050611e536000830184611e2f565b92915050565b60008083601f840112611e6f57611e6e611bb8565b5b8235905067ffffffffffffffff811115611e8c57611e8b611bbd565b5b602083019150836020820283011115611ea857611ea7611bc2565b5b9250929050565b60008083601f840112611ec557611ec4611bb8565b5b8235905067ffffffffffffffff811115611ee257611ee1611bbd565b5b602083019150836020820283011115611efe57611efd611bc2565b5b9250929050565b60008060008060408587031215611f1f57611f1e611b1a565b5b600085013567ffffffffffffffff811115611f3d57611f3c611b1f565b5b611f4987828801611e59565b9450945050602085013567ffffffffffffffff811115611f6c57611f6b611b1f565b5b611f7887828801611eaf565b925092505092959194509250565b600060208284031215611f9c57611f9b611b1a565b5b6000611faa84828501611b6d565b91505092915050565b600080fd5b60006101608284031215611fcf57611fce611fb3565b5b81905092915050565b6000819050919050565b611feb81611fd8565b8114611ff657600080fd5b50565b60008135905061200881611fe2565b92915050565b60008060006060848603121561202757612026611b1a565b5b600084013567ffffffffffffffff81111561204557612044611b1f565b5b61205186828701611fb8565b935050602061206286828701611ff9565b925050604061207386828701611ba3565b9150509250925092565b61208681611b82565b82525050565b60006020820190506120a1600083018461207d565b92915050565b60006120b282611b24565b9050919050565b6120c2816120a7565b81146120cd57600080fd5b50565b6000813590506120df816120b9565b92915050565b600080604083850312156120fc576120fb611b1a565b5b600061210a858286016120d0565b925050602061211b85828601611ba3565b9150509250929050565b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6121738261212a565b810181811067ffffffffffffffff821117156121925761219161213b565b5b80604052505050565b60006121a5611b10565b90506121b1828261216a565b919050565b600067ffffffffffffffff8211156121d1576121d061213b565b5b6121da8261212a565b9050602081019050919050565b82818337600083830152505050565b6000612209612204846121b6565b61219b565b90508281526020810184848401111561222557612224612125565b5b6122308482856121e7565b509392505050565b600082601f83011261224d5761224c611bb8565b5b813561225d8482602086016121f6565b91505092915050565b6000806040838503121561227d5761227c611b1a565b5b600061228b85828601611b6d565b925050602083013567ffffffffffffffff8111156122ac576122ab611b1f565b5b6122b885828601612238565b9150509250929050565b6122cb81611fd8565b82525050565b60006020820190506122e660008301846122c2565b92915050565b6122f581611b44565b82525050565b600060208201905061231060008301846122ec565b92915050565b6000819050919050565b600061233b61233661233184611b24565b612316565b611b24565b9050919050565b600061234d82612320565b9050919050565b600061235f82612342565b9050919050565b61236f81612354565b82525050565b600060208201905061238a6000830184612366565b92915050565b600080600080606085870312156123aa576123a9611b1a565b5b60006123b887828801611b6d565b94505060206123c987828801611ba3565b935050604085013567ffffffffffffffff8111156123ea576123e9611b1f565b5b6123f687828801611bc7565b925092505092959194509250565b60008083601f84011261241a57612419611bb8565b5b8235905067ffffffffffffffff81111561243757612436611bbd565b5b60208301915083602082028301111561245357612452611bc2565b5b9250929050565b60008060008060008060008060a0898b03121561247a57612479611b1a565b5b60006124888b828c01611b6d565b98505060206124998b828c01611b6d565b975050604089013567ffffffffffffffff8111156124ba576124b9611b1f565b5b6124c68b828c01612404565b9650965050606089013567ffffffffffffffff8111156124e9576124e8611b1f565b5b6124f58b828c01612404565b9450945050608089013567ffffffffffffffff81111561251857612517611b1f565b5b6125248b828c01611bc7565b92509250509295985092959890939650565b60008060008060008060a0878903121561255357612552611b1a565b5b600061256189828a01611b6d565b965050602061257289828a01611b6d565b955050604061258389828a01611ba3565b945050606061259489828a01611ba3565b935050608087013567ffffffffffffffff8111156125b5576125b4611b1f565b5b6125c189828a01611bc7565b92509250509295509295509295565b600082825260208201905092915050565b7f77726f6e67206172726179206c656e6774687300000000000000000000000000600082015250565b60006126176013836125d0565b9150612622826125e1565b602082019050919050565b600060208201905081810360008301526126468161260a565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b600080833560016020038436030381126126a8576126a761267c565b5b80840192508235915067ffffffffffffffff8211156126ca576126c9612681565b5b6020830192506001820236038313156126e6576126e5612686565b5b509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061272882611b82565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361275a576127596126ee565b5b600182019050919050565b7f46756e6374696f6e206d7573742062652063616c6c6564207468726f7567682060008201527f64656c656761746563616c6c0000000000000000000000000000000000000000602082015250565b60006127c1602c836125d0565b91506127cc82612765565b604082019050919050565b600060208201905081810360008301526127f0816127b4565b9050919050565b7f46756e6374696f6e206d7573742062652063616c6c6564207468726f7567682060008201527f6163746976652070726f78790000000000000000000000000000000000000000602082015250565b6000612853602c836125d0565b915061285e826127f7565b604082019050919050565b6000602082019050818103600083015261288281612846565b9050919050565b612892816120a7565b82525050565b60006040820190506128ad6000830185612889565b6128ba602083018461207d565b9392505050565b7f555550535570677261646561626c653a206d757374206e6f742062652063616c60008201527f6c6564207468726f7567682064656c656761746563616c6c0000000000000000602082015250565b600061291d6038836125d0565b9150612928826128c1565b604082019050919050565b6000602082019050818103600083015261294c81612910565b9050919050565b60008151905061296281611b8c565b92915050565b60006020828403121561297e5761297d611b1a565b5b600061298c84828501612953565b91505092915050565b7f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160008201527f647920696e697469616c697a6564000000000000000000000000000000000000602082015250565b60006129f1602e836125d0565b91506129fc82612995565b604082019050919050565b60006020820190508181036000830152612a20816129e4565b9050919050565b6000819050919050565b600060ff82169050919050565b6000612a59612a54612a4f84612a27565b612316565b612a31565b9050919050565b612a6981612a3e565b82525050565b6000602082019050612a846000830184612a60565b92915050565b6000819050919050565b600077ffffffffffffffffffffffffffffffffffffffffffffffff82169050919050565b6000612ad3612ace612ac984612a8a565b612316565b612a94565b9050919050565b612ae381612ab8565b82525050565b6000604082019050612afe60008301856122ec565b612b0b6020830184612ada565b9392505050565b7f6163636f756e743a206e6f74204f776e6572206f7220456e747279506f696e74600082015250565b6000612b486020836125d0565b9150612b5382612b12565b602082019050919050565b60006020820190508181036000830152612b7781612b3b565b9050919050565b600081519050919050565b600081905092915050565b60005b83811015612bb2578082015181840152602081019050612b97565b60008484015250505050565b6000612bc982612b7e565b612bd38185612b89565b9350612be3818560208601612b94565b80840191505092915050565b6000612bfb8284612bbe565b915081905092915050565b600081519050612c1581611fe2565b92915050565b600060208284031215612c3157612c30611b1a565b5b6000612c3f84828501612c06565b91505092915050565b7f45524331393637557067726164653a206e657720696d706c656d656e7461746960008201527f6f6e206973206e6f742055555053000000000000000000000000000000000000602082015250565b6000612ca4602e836125d0565b9150612caf82612c48565b604082019050919050565b60006020820190508181036000830152612cd381612c97565b9050919050565b7f45524331393637557067726164653a20756e737570706f727465642070726f7860008201527f6961626c65555549440000000000000000000000000000000000000000000000602082015250565b6000612d366029836125d0565b9150612d4182612cda565b604082019050919050565b60006020820190508181036000830152612d6581612d29565b9050919050565b7f6163636f756e743a206e6f742066726f6d20456e747279506f696e7400000000600082015250565b6000612da2601c836125d0565b9150612dad82612d6c565b602082019050919050565b60006020820190508181036000830152612dd181612d95565b9050919050565b50565b6000612de8600083612b89565b9150612df382612dd8565b600082019050919050565b6000612e0982612ddb565b9150819050919050565b7f6f6e6c79206f776e657200000000000000000000000000000000000000000000600082015250565b6000612e49600a836125d0565b9150612e5482612e13565b602082019050919050565b60006020820190508181036000830152612e7881612e3c565b9050919050565b7f455243313936373a206e657720696d706c656d656e746174696f6e206973206e60008201527f6f74206120636f6e747261637400000000000000000000000000000000000000602082015250565b6000612edb602d836125d0565b9150612ee682612e7f565b604082019050919050565b60006020820190508181036000830152612f0a81612ece565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b7f45434453413a20696e76616c6964207369676e61747572650000000000000000600082015250565b6000612f766018836125d0565b9150612f8182612f40565b602082019050919050565b60006020820190508181036000830152612fa581612f69565b9050919050565b7f45434453413a20696e76616c6964207369676e6174757265206c656e67746800600082015250565b6000612fe2601f836125d0565b9150612fed82612fac565b602082019050919050565b6000602082019050818103600083015261301181612fd5565b9050919050565b7f45434453413a20696e76616c6964207369676e6174757265202773272076616c60008201527f7565000000000000000000000000000000000000000000000000000000000000602082015250565b60006130746022836125d0565b915061307f82613018565b604082019050919050565b600060208201905081810360008301526130a381613067565b9050919050565b6130b381612a31565b82525050565b60006080820190506130ce60008301876122c2565b6130db60208301866130aa565b6130e860408301856122c2565b6130f560608301846122c2565b95945050505050565b7f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000600082015250565b6000613134601d836125d0565b915061313f826130fe565b602082019050919050565b6000602082019050818103600083015261316381613127565b9050919050565b600081519050919050565b60006131808261316a565b61318a81856125d0565b935061319a818560208601612b94565b6131a38161212a565b840191505092915050565b600060208201905081810360008301526131c88184613175565b90509291505056fe416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c206661696c6564a2646970667358221220184807e69f413ed78a569bed2504b99812aa82b1a70ece7822885b1e418066e864736f6c63430008130033"}}},{package:"$root$",file:"test/e2e/seeder/contracts/simpleAccountFactory.ts"}],[4898,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.verifyingPaymasterBytecode=f.verifyingPaymasterAbi=void 0;f.verifyingPaymasterAbi=[{inputs:[{internalType:"contract IEntryPoint",name:"_entryPoint",type:"address"},{internalType:"address",name:"_verifyingSigner",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"uint32",name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"entryPoint",outputs:[{internalType:"contract IEntryPoint",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDeposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"initCode",type:"bytes"},{internalType:"bytes",name:"callData",type:"bytes"},{internalType:"uint256",name:"callGasLimit",type:"uint256"},{internalType:"uint256",name:"verificationGasLimit",type:"uint256"},{internalType:"uint256",name:"preVerificationGas",type:"uint256"},{internalType:"uint256",name:"maxFeePerGas",type:"uint256"},{internalType:"uint256",name:"maxPriorityFeePerGas",type:"uint256"},{internalType:"bytes",name:"paymasterAndData",type:"bytes"},{internalType:"bytes",name:"signature",type:"bytes"}],internalType:"struct UserOperation",name:"userOp",type:"tuple"},{internalType:"uint48",name:"validUntil",type:"uint48"},{internalType:"uint48",name:"validAfter",type:"uint48"}],name:"getHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paymasterAndData",type:"bytes"}],name:"parsePaymasterAndData",outputs:[{internalType:"uint48",name:"validUntil",type:"uint48"},{internalType:"uint48",name:"validAfter",type:"uint48"},{internalType:"bytes",name:"signature",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"enum IPaymaster.PostOpMode",name:"mode",type:"uint8"},{internalType:"bytes",name:"context",type:"bytes"},{internalType:"uint256",name:"actualGasCost",type:"uint256"}],name:"postOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"senderNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"initCode",type:"bytes"},{internalType:"bytes",name:"callData",type:"bytes"},{internalType:"uint256",name:"callGasLimit",type:"uint256"},{internalType:"uint256",name:"verificationGasLimit",type:"uint256"},{internalType:"uint256",name:"preVerificationGas",type:"uint256"},{internalType:"uint256",name:"maxFeePerGas",type:"uint256"},{internalType:"uint256",name:"maxPriorityFeePerGas",type:"uint256"},{internalType:"bytes",name:"paymasterAndData",type:"bytes"},{internalType:"bytes",name:"signature",type:"bytes"}],internalType:"struct UserOperation",name:"userOp",type:"tuple"},{internalType:"bytes32",name:"userOpHash",type:"bytes32"},{internalType:"uint256",name:"maxCost",type:"uint256"}],name:"validatePaymasterUserOp",outputs:[{internalType:"bytes",name:"context",type:"bytes"},{internalType:"uint256",name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"verifyingSigner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address payable",name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"withdrawAddress",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"}],f.verifyingPaymasterBytecode="0x60c0604052346200007b576200001f620000186200014f565b9062000176565b6040516114f96200026382396080518181816104ce015281816108f5015281816109d201528181610a4d01528181610adb01528181610b7901528181610bed0152610c8f015260a0518181816101f80152610ff601526114f990f35b600080fd5b634e487b7160e01b600052604160045260246000fd5b90601f01601f191681019081106001600160401b03821117620000b857604052565b62000080565b90620000d5620000cd60405190565b928362000096565b565b6001600160a01b031690565b90565b6001600160a01b0381165b036200007b57565b90505190620000d582620000e6565b6001600160a01b038116620000f1565b90505190620000d58262000108565b91906040838203126200007b57620000e390620001458185620000f9565b9360200162000118565b620001726200175c803803806200016681620000be565b92833981019062000127565b9091565b620001819062000186565b60a052565b6200019062000195565b608052565b620000d53362000200565b620000e390620000d7906001600160a01b031682565b620000e390620001a0565b620000e390620001b6565b90620001e0620000e3620001fc92620001c1565b82546001600160a01b0319166001600160a01b03919091161790565b9055565b6000546001600160a01b0316906200021a816000620001cc565b620002516200024a7f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e093620001c1565b91620001c1565b916200025c60405190565b600090a356fe6080604052600436101561001257600080fd5b60003560e01c80630396cb6014610102578063205c2878146100fd57806323d9ac9b146100f8578063715018a6146100f35780638da5cb5b146100ee57806394d4ad60146100e957806394e1fc19146100e4578063a9a23409146100df578063b0d691fe146100da578063bb9fe6bf146100d5578063c23a5cea146100d0578063c399ec88146100cb578063d0e30db0146100c6578063f2fde38b146100c15763f465c77e036101165761062f565b610565565b610552565b610537565b61051f565b6104f3565b6104b5565b61045d565b6103d6565b610337565b61024a565b610232565b6101e3565b6101bb565b610141565b63ffffffff81165b0361011657565b600080fd5b9050359061012882610107565b565b906020828203126101165761013e9161011b565b90565b61015461014f36600461012a565b610aa7565b604051005b0390f35b6001600160a01b031690565b6001600160a01b03811661010f565b9050359061012882610169565b8061010f565b9050359061012882610185565b91906040838203126101165761013e906101b28185610178565b9360200161018b565b34610116576101546101ce366004610198565b90610a2f565b600091031261011657565b9052565b34610116576101f33660046101d4565b6101597f00000000000000000000000000000000000000000000000000000000000000005b604051918291826001600160a01b03909116815260200190565b34610116576102423660046101d4565b610154610729565b346101165761025a3660046101d4565b610159610218610671565b909182601f830112156101165781359167ffffffffffffffff831161011657602001926001830284011161011657565b9060208282031261011657813567ffffffffffffffff8111610116576102bb9201610265565b9091565b90826000939282370152565b91906102e9816102e2816102f39560209181520190565b80956102bf565b601f01601f191690565b0190565b61032a61013e959394929461031b6060840196600085019065ffffffffffff169052565b65ffffffffffff166020830152565b60408185039101526102cb565b346101165761015961035361034d366004610295565b9061148b565b9061036094929460405190565b948594856102f7565b90816101609103126101165790565b65ffffffffffff811661010f565b9050359061012882610378565b909160608284031261011657813567ffffffffffffffff8111610116576103bf8461013e928501610369565b936103cd8160208601610386565b93604001610386565b34610116576101596103f26103ec366004610393565b91610dec565b6040519182918290815260200190565b6003111561011657565b9050359061012882610402565b906060828203126101165761042e818361040c565b92602083013567ffffffffffffffff8111610116576104528361013e928601610265565b93909460400161018b565b346101165761046d366004610419565b9291909161086a565b61013e9061015d906001600160a01b031682565b61013e90610476565b61013e9061048a565b6101df90610493565b602081019291610128919061049c565b34610116576104c53660046101d4565b604051806101597f0000000000000000000000000000000000000000000000000000000000000000826104a5565b34610116576105033660046101d4565b610154610bd1565b906020828203126101165761013e91610178565b346101165761015461053236600461050b565b610c33565b34610116576105473660046101d4565b6101596103f2610ad1565b61055d3660046101d4565b6101546108f0565b346101165761015461057836600461050b565b6107c5565b909160608284031261011657813567ffffffffffffffff8111610116576105a98461013e928501610369565b936105b7816020860161018b565b9360400161018b565b60005b8381106105d35750506000910152565b81810151838201526020016105c3565b6106046102e96020936102f3936105f8815190565b80835293849260200190565b958691016105c0565b9291602061062a61012893604087019087820360008901526105e3565b940152565b346101165761064861064236600461057d565b91610857565b9061015961065560405190565b9283928361060d565b61013e9061015d565b61013e905461065e565b61013e6000610667565b1561068257565b60405162461bcd60e51b8152806106cb600482016020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b0390fd5b6106f96106da610671565b6106f36106e63361015d565b916001600160a01b031690565b1461067b565b610128610717565b61015d61013e61013e9290565b61013e90610701565b610128610724600061070e565b6107fe565b6101286106cf565b610128906107406106da610671565b6107a0565b1561074c57565b60405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608490fd5b610128906107246107b461015d600061070e565b6001600160a01b0383161415610745565b61012890610731565b906107de61013e6107fa92610493565b82546001600160a01b0319166001600160a01b03919091161790565b9055565b6108086000610667565b906108148160006107ce565b6108476108417f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e093610493565b91610493565b9161085160405190565b600090a3565b6102bb929190610865610c80565b610f93565b610872610c80565b60405162461bcd60e51b815260206004820152600d60248201526c6d757374206f7665727269646560981b6044820152606490fd5b634e487b7160e01b600052604160045260246000fd5b90601f01601f1916810190811067ffffffffffffffff8211176108df57604052565b6108a7565b6040513d6000823e3d90fd5b6109197f0000000000000000000000000000000000000000000000000000000000000000610493565b63b760faf990349061092a30610493565b90803b15610116576109526000936109699561094560405190565b9687958694859360e01b90565b83526001600160a01b031660048301526024820190565b03925af180156109925761097a5750565b61012890600061098a81836108bd565b8101906101d4565b6108e4565b90610128916109a76106da610671565b6109cd565b6001600160a01b0390911681526040810192916101289160200152565b0152565b6109f67f0000000000000000000000000000000000000000000000000000000000000000610493565b9063205c287891803b1561011657610a2460008094610969610a1760405190565b9788968795869460e01b90565b8452600484016109ac565b9061012891610997565b61012890610a486106da610671565b610a717f0000000000000000000000000000000000000000000000000000000000000000610493565b630396cb60913491803b1561011657610a936000936109699561094560405190565b835263ffffffff1660048301526024820190565b61012890610a39565b9050519061012882610185565b906020828203126101165761013e91610ab0565b610b286020610aff7f0000000000000000000000000000000000000000000000000000000000000000610493565b6370a0823190610952610b1130610493565b92610b1b60405190565b9586948593849360e01b90565b03915afa90811561099257600091610b3e575090565b61013e915060203d8111610b5f575b610b5781836108bd565b810190610abd565b503d610b4d565b610b716106da610671565b610128610b9d7f0000000000000000000000000000000000000000000000000000000000000000610493565b63bb9fe6bf90803b1561011657610bc391600091610bba60405190565b93849260e01b90565b825281838160048101610969565b610128610b66565b61012890610be86106da610671565b610c117f0000000000000000000000000000000000000000000000000000000000000000610493565b9063c23a5cea90823b1561011657610969926109526000809461094560405190565b61012890610bd9565b15610c4357565b60405162461bcd60e51b815260206004820152601560248201527414d95b99195c881b9bdd08115b9d1c9e541bda5b9d605a1b6044820152606490fd5b61012833610cb36106e661015d7f0000000000000000000000000000000000000000000000000000000000000000610493565b14610c3c565b3561013e81610185565b903590601e193682900301821215610116570180359067ffffffffffffffff8211610116576020019136829003831361011657565b90610128610d0560405190565b92836108bd565b67ffffffffffffffff81116108df57602090601f01601f19160190565b90929192610d3e610d3982610d0c565b610cf8565b9381855260208501908284011161011657610128926102bf565b61013e913691610d29565b9a98969492909d9c9b99979593916101a08c019e60008d01610d8c916001600160a01b03169052565b60208c015260408b015260608a0152608089015260a088015260c087015260e08601526101008501526101208401526001600160a01b031661014083015265ffffffffffff16610160820152610180016101289165ffffffffffff169052565b91610df683610ec7565b610e0260208501610cb9565b91610e106040860186610cc3565b610e1991610d58565b8051906020012093610e2e6060870187610cc3565b610e3791610d58565b8051906020012095610e4b60808201610cb9565b90610e5860a08201610cb9565b90610e6560c08201610cb9565b90610e7260e08201610cb9565b9061010001610e8090610cb9565b91469330610e8d90610493565b95610e9760405190565b9c8d9c60208e019c610ea99c8e610d63565b908103825203610eb990826108bd565b8051906020012090565b2090565b610edd61013e91610ed6600090565b503561048a565b61048a565b61013e61013e61013e9290565b602080825261013e91016040808252906020017f566572696679696e675061796d61737465723a20696e76616c6964207369676e81527f6174757265206c656e67746820696e207061796d6173746572416e644461746160208201520190565b15610f5657565b60405162461bcd60e51b8152806106cb60048201610eef565b90610f7c610d3983610d0c565b918252565b61013e6000610f6f565b61013e610f81565b610ff39250610fee91506110216106e661015d61101b610fba61034d610120870187610cc3565b939299918a8299610fe9610fcf88859e965090565b610fd96040610ee2565b8114908115611049575b50610f4f565b610dec565b61135d565b917f000000000000000000000000000000000000000000000000000000000000000096610d58565b9061105f565b0361103e576110319160006113d5565b9061103a610f8b565b9190565b6110319160016113d5565b905061105861103a6041610ee2565b1438610fe3565b815161106e61103a6041610ee2565b036110915761013e91906020820151906060604084015193015160001a90611262565b8151916040926110a361103a85610ee2565b036110ba5761013e926020820151910151916110ff565b60405162461bcd60e51b815260206004820152601f60248201527f45434453413a20696e76616c6964207369676e6174757265206c656e677468006044820152606490fd5b61013e9291906001600160ff1b0383169260ff1c601b0190611262565b61013e90610ee2565b1561112c57565b60405162461bcd60e51b815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202773272076616c604482015261756560f01b6064820152608490fd5b61118961013e61013e9290565b60ff1690565b1561119657565b60405162461bcd60e51b815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202776272076616c604482015261756560f01b6064820152608490fd5b6109c96101289461120f606094989795611205608086019a6000870152565b60ff166020850152565b6040830152565b1561121d57565b60405162461bcd60e51b815260206004820152601860248201527f45434453413a20696e76616c6964207369676e617475726500000000000000006044820152606490fd5b6112de602094600094611273600090565b506112b36112808361111c565b6112ac61103a7f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0610ee2565b1115611125565b6112bd601b61117c565b60ff8616148015611310575b6112d29061118f565b604051948594856111e6565b838052039060015afa156109925760005161013e6112ff61015d600061070e565b6001600160a01b0383161415611216565b506112d261131e601c61117c565b60ff87161490506112c9565b906102f3610f7c6020937f19457468657265756d205369676e6564204d6573736167653a0a3332000000008152601c0190565b61138561136960405190565b809261137960208301918261132a565b908103825203826108bd565b610ec3611390825190565b9160200190565b61013e61013e61013e9265ffffffffffff1690565b61013e906113c061103a61013e9460ff1690565b901b90565b61013e61013e61013e9260ff1690565b6114269161141c916000901561142a575061141561140f6113ff6113f9600161117c565b93611397565b61140960a061117c565b906113ac565b916113c5565b1792611397565b61140960d061117c565b1790565b61140f6113ff6113f96114159361117c565b61013e6014610ee2565b61013e6054610ee2565b90939293848311610116578411610116578101920390565b91906040838203126101165761013e906114828185610386565b93602001610386565b916102bb808361149961143c565b6114bb6114b36102bb6114aa611446565b8094868c611450565b810190611468565b96909761145056fea26469706673582212208899fb33dd8c69445c982f410a39c7677f7257ec7ab219d04e93a9f633a42ddb64736f6c63430008140033"}}},{package:"$root$",file:"test/e2e/seeder/contracts/verifyingPaymaster.ts"}],[4899,{"./contracts/entrypoint":4896,"./contracts/simpleAccountFactory":4897,"./contracts/verifyingPaymaster":4898,"@metamask/test-dapp/dist/constants.json":2438},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){const{hstBytecode:n,hstAbi:r,piggybankBytecode:a,piggybankAbi:i,nftsAbi:s,nftsBytecode:o,erc1155Abi:c,erc1155Bytecode:d,failingContractAbi:u,failingContractBytecode:l,multisigAbi:b,multisigBytecode:h}=e("@metamask/test-dapp/dist/constants.json"),{entrypointAbi:p,entrypointBytecode:m}=e("./contracts/entrypoint"),{simpleAccountFactoryAbi:y,simpleAccountFactoryBytecode:g}=e("./contracts/simpleAccountFactory"),{verifyingPaymasterAbi:_,verifyingPaymasterBytecode:w}=e("./contracts/verifyingPaymaster"),T={HST:"hst",NFTS:"nfts",ERC1155:"erc1155",PIGGYBANK:"piggybank",FAILING:"failing",MULTISIG:"multisig",ENTRYPOINT:"entrypoint",SIMPLE_ACCOUNT_FACTORY:"simpleAccountFactory",VERIFYING_PAYMASTER:"verifyingPaymaster"},v={[T.HST]:{initialAmount:10,tokenName:"TST",decimalUnits:4,tokenSymbol:"TST",bytecode:n,abi:r},[T.NFTS]:{bytecode:o,abi:s},[T.ERC1155]:{bytecode:d,abi:c},[T.PIGGYBANK]:{bytecode:a,abi:i},[T.FAILING]:{bytecode:l,abi:u},[T.MULTISIG]:{bytecode:h,abi:b},[T.ENTRYPOINT]:{bytecode:m,abi:p},[T.SIMPLE_ACCOUNT_FACTORY]:{abi:y,bytecode:g},[T.VERIFYING_PAYMASTER]:{abi:_,bytecode:w}};t.exports={SMART_CONTRACTS:T,contractConfiguration:v}}}},{package:"$root$",file:"test/e2e/seeder/smart-contracts.js"}],[49,{"./state-utils":117,"@metamask/utils":2530,uuid:4744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.PatchStore=void 0;var n=e("@metamask/utils"),r=e("uuid"),a=e("./state-utils");function i(e,t,f){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var f=e[Symbol.toPrimitive];if(f!==undefined){var n=f.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:f,enumerable:!0,configurable:!0,writable:!0}):e[t]=f,e}const s=(0,n.createProjectLogger)("patch-store");f.PatchStore=class{constructor(e){i(this,"id",void 0),i(this,"observableStore",void 0),i(this,"pendingPatches",new Map),i(this,"listener",void 0),this.id=(0,r.v4)(),this.observableStore=e,this.listener=this._onStateChange.bind(this),this.observableStore.on("stateChange",this.listener),s("Created",this.id)}flushPendingPatches(){const e=[...this.pendingPatches.values()];this.pendingPatches.clear();for(const t of e)s("Flushed",t.path.join("."),this.id,t);return e}destroy(){this.observableStore.removeListener("stateChange",this.listener),s("Destroyed",this.id)}_onStateChange({oldState:e,newState:t}){const f=(0,a.sanitizeUIState)(t),n=this._generatePatches(e,f),r=Boolean(t.vault);if(r&&n.push({op:"replace",path:["isInitialized"],value:r}),n.length)for(const e of n){const t=e.path.join(".");this.pendingPatches.set(t,e),s("Updated",t,this.id,e)}}_generatePatches(e,t){return Object.keys(t).map((f=>{const n=e[f],r=t[f];return n===r?null:{op:"replace",path:[f],value:r}})).filter(Boolean)}}}}},{package:"$root$",file:"app/scripts/lib/PatchStore.ts"}],[4900,{"./keyring-utils":4901,"@ethereumjs/tx":451,"@metamask/eth-sig-util":1377,buffer:3319,"ethereumjs-util":3559},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){(function(t){(function(){Object.defineProperty(f,"__esModule",{value:!0}),f.KNOWN_PUBLIC_KEY_ADDRESSES=f.KNOWN_PUBLIC_KEY=f.KNOWN_PRIVATE_KEYS=f.FakeTrezorBridge=f.FakeLedgerBridge=f.FakeKeyringBridge=f.CHAIN_CODE=void 0;var n=e("@ethereumjs/tx"),r=e("@metamask/eth-sig-util"),a=e("ethereumjs-util"),i=e("./keyring-utils");function s(e,t,f){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,f)}function o(e,t,f){return function(e,t,f){if(t.set)t.set.call(e,f);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=f}}(e,c(e,t,"set"),f),f}function c(e,t,f){if(!t.has(e))throw new TypeError("attempted to "+f+" private field on non-instance");return t.get(e)}const d=f.KNOWN_PUBLIC_KEY="03752603a8131fd03fe726434e82a181c3a6bc227a44660ab774a482d29d1172c3",u=f.CHAIN_CODE="2b73df9ce5df820c728c8f77d51a72ec578e25c6a3c5e32b65fd43d2b4fb0e63",l=f.KNOWN_PUBLIC_KEY_ADDRESSES=[{address:"0xF68464152d7289D7eA9a2bEC2E0035c45188223c",balance:null,index:0},{address:"0x9EE70472c9D1B1679A33f2f0549Ab5BFFCE118eF",balance:null,index:1},{address:"0x3185aC9266D3DF3D95dC847e2B88b52F12A34C21",balance:null,index:2},{address:"0x49EED7a86c1C404e2666Ac12BF00Af63804AC78d",balance:null,index:3},{address:"0x1d374341feBd02C2F30929d2B4a767676799E1f2",balance:null,index:4}],b=f.KNOWN_PRIVATE_KEYS=["d41051826c32a548e55aa3e0dee93e96425b0f355df1e06d1595ed69385f8dc3","780f45733fe48f03ab993b071a11e77147ca959d417e048c7da5ac06b8283e51","daf3144f471e0531e5efd6e81b4907a4154fec5fdb53cf4f94c4b4195e6473fb","841f90906439526b3771c0aa51f93f6aae5c5ee0fdc73d0d8ff7f8a9b28754d7","7df6c85f059939631c05e72b6fc3c54423754a5162ae4a69b14b38219c430665"];var h=new WeakMap;class p{constructor({publicKeyPayload:e}){s(this,h,{writable:!0,value:void 0}),o(this,h,e)}async init(){return Promise.resolve()}async getPublicKey(){return function(e,t){return t.get?t.get.call(e):t.value}(e=this,c(e,h,"get"));var e}}f.FakeKeyringBridge=p;f.FakeTrezorBridge=class extends p{constructor(){super({publicKeyPayload:{success:!0,payload:{publicKey:d,chainCode:u,address:l[0].address}}})}async dispose(){return Promise.resolve()}async ethereumSignTransaction({transaction:e}){const f=i.Common.custom({chain:{name:"localhost",chainId:e.chainId,networkId:e.chainId},chainId:e.chainId,hardfork:"istanbul"}),r=n.Transaction.fromTxData(e,{common:f}).sign(t.from(b[0],"hex"));return{id:1,success:!0,payload:{v:r.v,r:r.r,s:r.s,serializedTx:(0,i.addHexPrefix)((0,a.bufferToHex)(r.serialize()))}}}async ethereumSignTypedData(e){const t={types:e.data.types,domain:e.data.domain,primaryType:e.data.primaryType,message:e.data.message},f=(0,r.signTypedData)({privateKey:b[0],data:t,version:r.SignTypedDataVersion.V4});return{id:1,success:!0,payload:{address:l[0].address,signature:f}}}};f.FakeLedgerBridge=class extends p{constructor(){super({publicKeyPayload:{publicKey:d,chainCode:"0x1"}})}async destroy(){return Promise.resolve()}updateTransportMethod(){return!0}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"test/stub/keyring-bridge.js"}],[4901,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.Common=void 0,f.addHexPrefix=function(e){if(e.startsWith("0x"))return e;return`0x${e}`};class n{constructor({chain:e,hardfork:t}){this.chain=e,this.hardfork=t}static custom({chain:e,chainId:t,networkId:f},r={}){return new n({chain:{name:e.name||"custom-chain",chainId:t||e.chainId,networkId:f||e.networkId},hardfork:r.hardfork||"istanbul"})}copy(){return new n({chain:this.chain,hardfork:this.hardfork})}gteHardfork(){return!0}chainId(){return BigInt(this.chain.chainId)}}f.Common=n}}},{package:"$root$",file:"test/stub/keyring-utils.js"}],[4902,{"../../shared/constants/network":4831,"@metamask/network-controller":1622,uuid:4744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.mockNetworkStateOld=f.mockNetworkState=void 0;var n=e("@metamask/network-controller"),r=e("uuid"),a=e("../../shared/constants/network");f.mockNetworkStateOld=(...e)=>{const t=e.map((e=>({id:e.id??(0,r.v4)(),chainId:e.chainId,rpcUrl:"rpcUrl"in e?e.rpcUrl:`https://localhost/rpc/${e.chainId}`,nickname:"nickname"in e?e.nickname:a.NETWORK_TO_NAME_MAP[e.chainId],ticker:"ticker"in e?e.ticker:a.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[e.chainId],...(!("blockExplorerUrl"in e)||e.blockExplorerUrl)&&{rpcPrefs:{blockExplorerUrl:e.blockExplorerUrl??`https://localhost/blockExplorer/${e.chainId}`}}}))),f=e.reduce(((e,f,r)=>({...e,[t[r].id]:f.metadata??{EIPS:{},status:n.NetworkStatus.Available}})),{});return{selectedNetworkClientId:t[0].id,networkConfigurations:t.reduce(((e,t)=>({...e,[t.id]:t})),{}),networksMetadata:f}};f.mockNetworkState=(...e)=>{if(new Set(e.map((e=>e.chainId))).size!==e.length)throw"mockNetworkState doesnt currently support multiple rpc urls per chain id";const t=e.map((e=>{const t=!("blockExplorerUrl"in e)||e.blockExplorerUrl?e.blockExplorerUrl??`https://localhost/blockExplorer/${e.chainId}`:undefined,f="rpcUrl"in e?e.rpcUrl:`https://localhost/rpc/${e.chainId}`;return{chainId:e.chainId,blockExplorerUrls:t?[t]:[],defaultBlockExplorerUrlIndex:t?0:undefined,rpcEndpoints:[{networkClientId:e.id??(0,r.v4)(),type:n.RpcEndpointType.Custom,url:f}],defaultRpcEndpointIndex:0,name:"nickname"in e?e.nickname:a.NETWORK_TO_NAME_MAP[e.chainId],nativeCurrency:"ticker"in e?e.ticker:a.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[e.chainId]}})),f=e.reduce(((e,f,r)=>({...e,[t[r].rpcEndpoints[0].networkClientId]:f.metadata??{EIPS:{},status:n.NetworkStatus.Available}})),{});return{selectedNetworkClientId:t[0].rpcEndpoints[0].networkClientId,networkConfigurationsByChainId:t.reduce(((e,t)=>({...e,[t.chainId]:t})),{}),networksMetadata:f}}}}},{package:"$root$",file:"test/stub/networks.ts"}],[5,{"../../../shared/constants/network":4831},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.SINGLE_CALL_BALANCES_ADDRESSES=void 0;var n=e("../../../shared/constants/network");f.SINGLE_CALL_BALANCES_ADDRESSES={[n.CHAIN_IDS.MAINNET]:"0xb1f8e55c7f64d203c1400b9d8555d050f94adf39",[n.CHAIN_IDS.GOERLI]:"0x9788C4E93f9002a7ad8e72633b11E8d1ecd51f9b",[n.CHAIN_IDS.SEPOLIA]:"",[n.CHAIN_IDS.BSC]:"0x2352c63A83f9Fd126af8676146721Fa00924d7e4",[n.CHAIN_IDS.OPTIMISM]:"0xB1c568e9C3E6bdaf755A60c7418C269eb11524FC",[n.CHAIN_IDS.POLYGON]:"0x2352c63A83f9Fd126af8676146721Fa00924d7e4",[n.CHAIN_IDS.AVALANCHE]:"0xD023D153a0DFa485130ECFdE2FAA7e612EF94818",[n.CHAIN_IDS.FANTOM]:"0x07f697424ABe762bB808c109860c04eA488ff92B",[n.CHAIN_IDS.ARBITRUM]:"0x151E24A486D7258dd7C33Fb67E4bB01919B7B32c",[n.CHAIN_IDS.BLAST]:"0xfd5730e96f9dffae40d99b77015bd42816280998",[n.CHAIN_IDS.LINEA_GOERLI]:"0x10dAd7Ca3921471f616db788D9300DC97Db01783",[n.CHAIN_IDS.LINEA_MAINNET]:"0xF62e6a41561b3650a69Bb03199C735e3E3328c0D",[n.CHAIN_IDS.AURORA]:"0x1286415D333855237f89Df27D388127181448538",[n.CHAIN_IDS.BASE]:"0x6AA75276052D96696134252587894ef5FFA520af",[n.CHAIN_IDS.ZKSYNC_ERA]:"0x458fEd3144680a5b8bcfaa0F9594aa19B4Ea2D34"}}}},{package:"$root$",file:"app/scripts/constants/contracts.ts"}],[50,{"@metamask/name-controller":1587,"@metamask/snaps-utils":2384,loglevel:4170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.SnapsNameProvider=void 0;var n,r=e("@metamask/name-controller"),a=e("@metamask/snaps-utils"),i=(n=e("loglevel"))&&n.__esModule?n:{default:n};function s(e,t){o(e,t),t.add(e)}function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,l(e,t,"get"))}function d(e,t,f){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return f}function u(e,t,f){return function(e,t,f){if(t.set)t.set.call(e,f);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=f}}(e,l(e,t,"set"),f),f}function l(e,t,f){if(!t.has(e))throw new TypeError("attempted to "+f+" private field on non-instance");return t.get(e)}var b=new WeakMap,h=new WeakSet,p=new WeakSet;function m(){const e=c(this,b).call("PermissionController:getState").subjects;return c(this,b).call("SnapController:getAll").filter((({id:t})=>{var f;return null===(f=e[t])||void 0===f?void 0:f.permissions["endowment:name-lookup"]}))}async function y(e,t){const{variation:f,value:n}=t,r=e.id,s={chainId:`eip155:${parseInt(f,16)}`,address:n};let o,d;try{const t=await c(this,b).call("SnapController:handleRequest",{snapId:e.id,origin:"",handler:a.HandlerType.OnNameLookup,request:{jsonrpc:"2.0",method:" ",params:s}}),f=null==t?void 0:t.resolvedDomains;o=f?[...new Set(f.map((e=>e.resolvedDomain)))]:[]}catch(t){i.default.error("Snap name provider request failed",{snapId:e.id,request:s,error:t}),d=t}return{sourceId:r,result:{proposedNames:o,error:d}}}f.SnapsNameProvider=class{constructor({messenger:e}){s(this,p),s(this,h),function(e,t,f){o(e,t),t.set(e,f)}(this,b,{writable:!0,value:void 0}),u(this,b,e)}getMetadata(){const e=d(this,h,m).call(this);return{sourceIds:{[r.NameType.ETHEREUM_ADDRESS]:e.map((e=>e.id))},sourceLabels:e.reduce(((e,t)=>{const f=c(this,b).call("SnapController:get",t.id),n=null==f?void 0:f.manifest.proposedName;return{...e,[t.id]:n||t.id}}),{})}}async getProposedNames(e){const t=d(this,h,m).call(this);return{results:(await Promise.all(t.map((t=>d(this,p,y).call(this,t,e))))).reduce(((e,t)=>{const{sourceId:f,result:n}=t;return{...e,[f]:n}}),{})}}}}}},{package:"$root$",file:"app/scripts/lib/SnapsNameProvider.ts"}],[51,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){function n(e,t,f){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var f=e[Symbol.toPrimitive];if(f!==undefined){var n=f.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:f,enumerable:!0,configurable:!0,writable:!0}):e[t]=f,e}Object.defineProperty(f,"__esModule",{value:!0}),f.WeakRefObjectMap=void 0;class r{constructor(){n(this,"map",void 0),this.map=new Map}set(e,t){const f={};for(const e in t){if(!Object.prototype.hasOwnProperty.call(t,e))continue;const n=t[e];if("object"!=typeof n||null===n)throw new Error(`Property ${String(e)} is not an object and cannot be weakly referenced.`);f[e]=new WeakRef(n)}return this.map.set(e,f),this}get(e){const t=this.map.get(e);if(!t)return undefined;const f={};for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const r=t[n].deref();if(r===undefined)return this.map.delete(e),undefined;f[n]=r}return f}has(e){return this.get(e)!==undefined}delete(e){return this.get(e)!==undefined&&this.map.delete(e)}clear(){this.map.clear()}get size(){return this.map.size}entries(){const e=[];return this.map.forEach(((t,f)=>{const n=this.get(f);n!==undefined&&e.push([f,n])})),e.values()}keys(){return this.map.keys()}values(){const e=[];return this.map.forEach(((t,f)=>{const n=this.get(f);n!==undefined&&e.push(n)})),e.values()}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return"WeakRefObjectMap"}forEach(e,t){this.map.forEach(((f,n)=>{const r=this.get(n);r!==undefined&&(t?e.call(t,r,n,this):e(r,n,this))}))}}f.WeakRefObjectMap=r}}},{package:"$root$",file:"app/scripts/lib/WeakRefObjectMap.ts"}],[52,{"../../../shared/constants/network":4831,"../constants/contracts":5,"./util":129,"@ethersproject/contracts":508,"@ethersproject/providers":546,"@metamask/eth-query":1375,"@metamask/obs-store":1752,lodash:4164,loglevel:4170,pify:4300,"single-call-balance-checker-abi":4657,uuid:4744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=p(e("@metamask/eth-query")),r=e("uuid"),a=e("@metamask/obs-store"),i=p(e("loglevel")),s=p(e("pify")),o=e("@ethersproject/providers"),c=e("@ethersproject/contracts"),d=p(e("single-call-balance-checker-abi")),u=e("lodash"),l=e("../../../shared/constants/network"),b=e("../constants/contracts"),h=e("./util");function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){g(e,t),t.add(e)}function y(e,t,f){g(e,t),t.set(e,f)}function g(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _(e,t,f){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return f}function w(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,v(e,t,"get"))}function T(e,t,f){return function(e,t,f){if(t.set)t.set.call(e,f);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=f}}(e,v(e,t,"set"),f),f}function v(e,t,f){if(!t.has(e))throw new TypeError("attempted to "+f+" private field on non-instance");return t.get(e)}var E=new WeakMap,k=new WeakMap,S=new WeakMap,A=new WeakMap,C=new WeakMap,P=new WeakSet,M=new WeakSet,I=new WeakSet,x=new WeakSet,O=new WeakMap,N=new WeakSet,R=new WeakSet,D=new WeakSet;function L(e){if(e){const t=this.getNetworkClientById(e);return{chainId:t.configuration.chainId,provider:t.provider,blockTracker:t.blockTracker,identifier:this.getNetworkIdentifier(t.configuration)}}return{chainId:this.getCurrentChainId(),provider:w(this,S),blockTracker:w(this,A),identifier:this.getNetworkIdentifier()}}function j(e){if(w(this,k)[e])return;const{blockTracker:t}=_(this,P,L).call(this,e),f=_(this,N,F).bind(this,e);t.addListener("latest",f),w(this,k)[e]=f,this.updateAccounts(e)}function U(e){if(!w(this,k)[e])return;const{blockTracker:t}=_(this,P,L).call(this,e);t.removeListener("latest",w(this,k)[e]),delete w(this,k)[e]}function B(e){const{accounts:t,accountsByChainId:f}=this.store.getState();if(f[e])return(0,u.cloneDeep)(f[e]);const n={};return Object.keys(t).forEach((e=>{n[e]={}})),n}async function F(e,t){const{chainId:f,provider:r}=_(this,P,L).call(this,e);w(this,C)[f]=t;const a=await(0,s.default)(new n.default(r)).getBlockByNumber(t,!1);if(!a)return;const o=a.gasLimit,{currentBlockGasLimitByChainId:c}=this.store.getState();this.store.updateState({...f===this.getCurrentChainId()&&{currentBlockGasLimit:o},currentBlockGasLimitByChainId:{...c,[f]:o}});try{await this.updateAccounts(e)}catch(e){i.default.error(e)}}async function G(e,t,f){const{useMultiAccountBalanceChecker:r}=this.preferencesController.store.getState();let a="0x0";try{a=await(0,s.default)(new n.default(t)).getBalance(e)}catch(e){var i;if("eth_getBalance"!==(null===(i=e.data)||void 0===i||null===(i=i.request)||void 0===i?void 0:i.method))throw e}const o={address:e,balance:a},c=_(this,x,B).call(this,f);if(!c[e])return;let d=c;r||(d={},Object.keys(c).forEach((t=>{e!==t&&(d[t]={address:t,balance:null})}))),d[e]=o;const{accountsByChainId:u}=this.store.getState();this.store.updateState({...f===this.getCurrentChainId()&&{accounts:d},accountsByChainId:{...u,[f]:d}})}async function H(e,t,f,n){const r=await new c.Contract(t,d.default,new o.Web3Provider(f)),a=["0x0000000000000000000000000000000000000000"];try{const t=await r.balances(e,a),f=_(this,x,B).call(this,n),i={};Object.keys(f).forEach((t=>{e.includes(t)||(i[t]={address:t,balance:null})})),e.forEach(((e,f)=>{const n=t[f]?t[f].toHexString():"0x0";i[e]={address:e,balance:n}}));const{accountsByChainId:s}=this.store.getState();this.store.updateState({...n===this.getCurrentChainId()&&{accounts:i},accountsByChainId:{...s,[n]:i}})}catch(t){i.default.warn("MetaMask - Account Tracker single call balance fetch failed",t),Promise.allSettled(e.map((e=>_(this,R,G).call(this,e,f,n))))}}f.default=class{constructor(e={}){m(this,D),m(this,R),m(this,N),m(this,x),m(this,I),m(this,M),m(this,P),y(this,E,{writable:!0,value:new Map}),y(this,k,{writable:!0,value:{}}),y(this,S,{writable:!0,value:null}),y(this,A,{writable:!0,value:null}),y(this,C,{writable:!0,value:{}}),y(this,O,{writable:!0,value:async e=>{await _(this,N,F).call(this,null,e)}});const t={accounts:{},currentBlockGasLimit:"",accountsByChainId:{},currentBlockGasLimitByChainId:{}};this.store=new a.ObservableStore({...t,...e.initState}),this.resetState=()=>{this.store.updateState(t)},T(this,S,e.provider),T(this,A,e.blockTracker),this.getCurrentChainId=e.getCurrentChainId,this.getNetworkClientById=e.getNetworkClientById,this.getNetworkIdentifier=e.getNetworkIdentifier,this.preferencesController=e.preferencesController,this.onboardingController=e.onboardingController,this.controllerMessenger=e.controllerMessenger,e.onAccountRemoved((e=>this.removeAccounts([e]))),this.controllerMessenger.subscribe("OnboardingController:stateChange",(0,h.previousValueComparator)(((e,t)=>{const{completedOnboarding:f}=e,{completedOnboarding:n}=t;!f&&n&&this.updateAccountsAllActiveNetworks()}),this.onboardingController.state)),this.selectedAccount=this.controllerMessenger.call("AccountsController:getSelectedAccount"),this.controllerMessenger.subscribe("AccountsController:selectedEvmAccountChange",(e=>{const{useMultiAccountBalanceChecker:t}=this.preferencesController.store.getState();this.selectedAccount.id===e.id||t||(this.selectedAccount=e,this.updateAccountsAllActiveNetworks())}))}start(){T(this,C,{[this.getCurrentChainId()]:w(this,A).getCurrentBlock()}),w(this,A).once("latest",(e=>{w(this,C)[this.getCurrentChainId()]=e})),w(this,A).removeListener("latest",w(this,O)),w(this,A).addListener("latest",w(this,O)),this.updateAccounts()}stop(){w(this,A).removeListener("latest",w(this,O))}startPollingByNetworkClientId(e){const t=(0,r.v4)(),f=w(this,E).get(e);if(f)f.add(t);else{const f=new Set;f.add(t),w(this,E).set(e,f),_(this,M,j).call(this,e)}return t}stopAllPolling(){this.stop(),w(this,E).forEach(((e,t)=>{e.forEach((e=>{this.stopPollingByPollingToken(e)}))}))}stopPollingByPollingToken(e){if(!e)throw new Error("pollingToken required");let t=!1;if(w(this,E).forEach(((f,n)=>{f.has(e)&&(t=!0,f.delete(e),0===f.size&&(w(this,E).delete(n),_(this,I,U).call(this,n)))})),!t)throw new Error("pollingToken not found")}syncWithAddresses(e){const{accounts:t}=this.store.getState(),f=Object.keys(t),n=[];e.forEach((e=>{f.includes(e)||n.push(e)}));const r=[];f.forEach((t=>{e.includes(t)||r.push(t)})),this.addAccounts(n),this.removeAccounts(r)}addAccounts(e){const{accounts:t,accountsByChainId:f}=this.store.getState(),n=(0,u.cloneDeep)(t),r=(0,u.cloneDeep)(f);e.forEach((e=>{n[e]={}})),Object.keys(r).forEach((t=>{e.forEach((e=>{r[t][e]={}}))})),this.store.updateState({accounts:n,accountsByChainId:r}),w(this,C)[this.getCurrentChainId()]&&this.updateAccounts(),w(this,E).forEach(((e,t)=>{const{chainId:f}=_(this,P,L).call(this,t);w(this,C)[f]&&this.updateAccounts(t)}))}removeAccounts(e){const{accounts:t,accountsByChainId:f}=this.store.getState(),n=(0,u.cloneDeep)(t),r=(0,u.cloneDeep)(f);e.forEach((e=>{delete n[e]})),Object.keys(r).forEach((t=>{e.forEach((e=>{delete r[t][e]}))})),this.store.updateState({accounts:n,accountsByChainId:r})}clearAccounts(){this.store.updateState({accounts:{},accountsByChainId:{[this.getCurrentChainId()]:{}}})}async updateAccountsAllActiveNetworks(){await this.updateAccounts(),await Promise.all(Array.from(w(this,E)).map((([e])=>this.updateAccounts(e))))}async updateAccounts(e){const{completedOnboarding:t}=this.onboardingController.state;if(!t)return;const{chainId:f,provider:n,identifier:r}=_(this,P,L).call(this,e),{useMultiAccountBalanceChecker:a}=this.preferencesController.store.getState();let i=[];if(a){const{accounts:e}=this.store.getState();i=Object.keys(e)}else{i=[this.controllerMessenger.call("AccountsController:getSelectedAccount").address]}const s=b.SINGLE_CALL_BALANCES_ADDRESSES[f];r!==l.LOCALHOST_RPC_URL&&"http://127.0.0.1:8545"!==r&&s?await _(this,D,H).call(this,i,s,n,f):await Promise.all(i.map((e=>_(this,R,G).call(this,e,n,f))))}}}}},{package:"$root$",file:"app/scripts/lib/account-tracker.js"}],[53,{"../../../../shared/lib/multichain":4852,"./BalancesTracker":54,"@metamask/base-controller":1184,"@metamask/keyring-api":1516,"@metamask/snaps-utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.defaultState=f.BalancesController=f.BALANCES_UPDATE_TIME=void 0;var n=e("@metamask/base-controller"),r=e("@metamask/keyring-api"),a=e("@metamask/snaps-utils"),i=e("../../../../shared/lib/multichain"),s=e("./BalancesTracker");function o(e,t){c(e,t),t.add(e)}function c(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,b(e,t,"get"))}function u(e,t,f){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return f}function l(e,t,f){return function(e,t,f){if(t.set)t.set.call(e,f);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=f}}(e,b(e,t,"set"),f),f}function b(e,t,f){if(!t.has(e))throw new TypeError("attempted to "+f+" private field on non-instance");return t.get(e)}const h=f.defaultState={balances:{}},p={balances:{persist:!0,anonymous:!1}},m=["bip122:000000000933ea01ad0ee984209779ba/slip44:0"],y=["bip122:000000000019d6689c085ae165831e93/slip44:0"],g=6e5,_=f.BALANCES_UPDATE_TIME=3e5;var w=new WeakMap,T=new WeakSet,v=new WeakSet,E=new WeakSet,k=new WeakSet,S=new WeakSet,A=new WeakSet,C=new WeakSet,P=new WeakSet,M=new WeakSet;class I extends n.BaseController{constructor({messenger:e,state:t}){var f,n,r;super({messenger:e,name:"BalancesController",metadata:p,state:{...h,...t}}),o(this,M),o(this,P),o(this,C),o(this,A),o(this,S),o(this,k),o(this,E),o(this,v),o(this,T),r={writable:!0,value:void 0},c(f=this,n=w),n.set(f,r),l(this,w,new s.BalancesTracker((async e=>await u(this,k,R).call(this,e))));for(const e of u(this,v,O).call(this))u(this,S,D).call(this,e)&&d(this,w).track(e.id,_);this.messagingSystem.subscribe("AccountsController:accountAdded",(e=>u(this,A,L).call(this,e))),this.messagingSystem.subscribe("AccountsController:accountRemoved",(e=>u(this,C,j).call(this,e)))}async start(){d(this,w).start()}async stop(){d(this,w).stop()}async updateBalance(e){await d(this,w).updateBalance(e)}async updateBalances(){await d(this,w).updateBalances()}}function x(){return this.messagingSystem.call("AccountsController:listMultichainAccounts")}function O(){return u(this,T,x).call(this).filter((e=>e.type===r.BtcAccountType.P2wpkh))}function N(e){const t=u(this,T,x).call(this).find((t=>t.id===e));if(!t)throw new Error(`Unknown account: ${e}`);if(!u(this,S,D).call(this,t))throw new Error(`Account is not a non-EVM account: ${e}`);return t}async function R(e){const t=u(this,E,N).call(this,e),f={balances:{}};t.metadata.snap&&(f.balances[t.id]=await u(this,P,U).call(this,t.id,t.metadata.snap.id,(0,i.isBtcMainnetAddress)(t.address)?y:m)),this.update((e=>({...e,balances:{...e.balances,...f.balances}})))}function D(e){return!(0,r.isEvmAccountType)(e.type)&&e.metadata.snap!==undefined}async function L(e){u(this,S,D).call(this,e)&&d(this,w).track(e.id,g)}async function j(e){d(this,w).isTracked(e)&&d(this,w).untrack(e),e in this.state.balances&&this.update((t=>(delete t.balances[e],t)))}async function U(e,t,f){return await u(this,M,B).call(this,t).getAccountBalances(e,f)}function B(e){return new r.KeyringClient({send:async t=>await this.messagingSystem.call("SnapController:handleRequest",{snapId:e,origin:"metamask",handler:a.HandlerType.OnKeyringRequest,request:t})})}f.BalancesController=I}}},{package:"$root$",file:"app/scripts/lib/accounts/BalancesController.ts"}],[54,{"./Poller":55},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.BalancesTracker=void 0;var n=e("./Poller");function r(e,t,f){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,f)}function a(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,s(e,t,"get"))}function i(e,t,f){return function(e,t,f){if(t.set)t.set.call(e,f);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=f}}(e,s(e,t,"set"),f),f}function s(e,t,f){if(!t.has(e))throw new TypeError("attempted to "+f+" private field on non-instance");return t.get(e)}var o=new WeakMap,c=new WeakMap,d=new WeakMap;f.BalancesTracker=class{constructor(e){r(this,o,{writable:!0,value:void 0}),r(this,c,{writable:!0,value:void 0}),r(this,d,{writable:!0,value:{}}),i(this,c,e),i(this,o,new n.Poller((()=>{this.updateBalances()}),3e4))}async start(){a(this,o).start()}async stop(){a(this,o).stop()}isTracked(e){return e in a(this,d)}assertBeingTracked(e){if(!this.isTracked(e))throw new Error(`Account is not being tracked: ${e}`)}track(e,t){this.isTracked(e)||(a(this,d)[e]={lastUpdated:0,blockTime:t})}untrack(e){this.assertBeingTracked(e),delete a(this,d)[e]}async updateBalance(e){this.assertBeingTracked(e);const t=a(this,d)[e];Date.now()-t.lastUpdated>=t.blockTime&&(await a(this,c).call(this,e),a(this,d)[e].lastUpdated=Date.now())}async updateBalances(){await Promise.allSettled(Object.keys(a(this,d)).map((async e=>{await this.updateBalance(e)})))}}}}},{package:"$root$",file:"app/scripts/lib/accounts/BalancesTracker.ts"}],[55,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){function n(e,t,f){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,f)}function r(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,i(e,t,"get"))}function a(e,t,f){return function(e,t,f){if(t.set)t.set.call(e,f);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=f}}(e,i(e,t,"set"),f),f}function i(e,t,f){if(!t.has(e))throw new TypeError("attempted to "+f+" private field on non-instance");return t.get(e)}Object.defineProperty(f,"__esModule",{value:!0}),f.Poller=void 0;var s=new WeakMap,o=new WeakMap,c=new WeakMap;f.Poller=class{constructor(e,t){n(this,s,{writable:!0,value:void 0}),n(this,o,{writable:!0,value:void 0}),n(this,c,{writable:!0,value:undefined}),a(this,s,t),a(this,o,e)}start(){r(this,c)||a(this,c,setInterval(r(this,o),r(this,s)))}stop(){r(this,c)&&(clearInterval(r(this,c)),a(this,c,undefined))}}}}},{package:"$root$",file:"app/scripts/lib/accounts/Poller.ts"}],[56,{"../../../shared/modules/string-utils":4886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=e("../../../shared/modules/string-utils");f.default=class{constructor(e={}){const{preferencesController:t,addressBookController:f,accountsController:n,networkController:r,trackMetaMetricsEvent:a}=e;this.preferencesController=t,this.accountsController=n,this.addressBookController=f,this.networkController=r,this._trackMetaMetricsEvent=a}async restoreUserData(e){const t=this.preferencesController.store.getState(),{preferences:f,addressBook:n,network:r,internalAccounts:a}=JSON.parse(e);f&&(f.identities=t.identities,f.lostIdentities=t.lostIdentities,f.selectedAddress=t.selectedAddress,this.preferencesController.store.updateState(f)),n&&this.addressBookController.update(n,!0),r&&this.networkController.loadBackup(r),a&&this.accountsController.loadBackup(a),(f||n||r||a)&&this._trackMetaMetricsEvent({event:"User Data Imported",category:"Backup"})}async backupUserData(){const e={preferences:{...this.preferencesController.store.getState()},internalAccounts:{internalAccounts:this.accountsController.state.internalAccounts},addressBook:{...this.addressBookController.state},network:{networkConfigurationsByChainId:this.networkController.state.networkConfigurationsByChainId}};delete e.preferences.identities,delete e.preferences.lostIdentities,delete e.preferences.selectedAddress;const t=JSON.stringify(e),f=new Date,r=e=>(0,n.prependZero)(e,2);return{fileName:`MetaMaskUserData.${f.getFullYear()}_${r(f.getMonth()+1)}_${r(f.getDay())}_${r(f.getHours())}_${r(f.getMinutes())}_${r(f.getDay())}.json`,data:t}}}}}},{package:"$root$",file:"app/scripts/lib/backup.js"}],[57,{"../../../shared/constants/time":4843,loglevel:4170,"readable-stream":4577},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.THREE_MINUTES=void 0,f.default=function(){const e=o();return new r.Transform({transform(t,f,n){const r=t.id===undefined,i=e.add(t.id);r||i?n(null,t):(a.default.debug(`RPC request with id "${t.id}" already seen.`),n())},objectMode:!0})};var n,r=e("readable-stream"),a=(n=e("loglevel"))&&n.__esModule?n:{default:n},i=e("../../../shared/constants/time");const s=f.THREE_MINUTES=3*i.MINUTE,o=()=>{const e=new Map;return setInterval((()=>{const t=Date.now()-s;for(const[f,n]of e.entries()){if(!(n<=t))break;e.delete(f)}}),s),{add:t=>!e.has(t)&&(e.set(t,Date.now()),!0)}}}}},{package:"$root$",file:"app/scripts/lib/createDupeReqFilterStream.ts"}],[58,{"../../../shared/constants/permissions":4835,"../controllers/permissions":25,"@metamask/keyring-api":1516},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function({messenger:e}){return function(t,f,r,a){const s=e.call("AccountsController:getSelectedAccount");if((0,n.isEvmAccountType)(s.type))return r();if(i.includes(t.method))return a(new Error(`Non-EVM account cannot request this method: ${t.method}`));if("wallet_requestPermissions"===t.method&&null!=t&&t.params&&Array.isArray(t.params)){const e=Object.keys(t.params[0]);if(i.some((t=>e.includes(t))))return a(new Error(`Non-EVM account cannot request this method: ${e.toString()}`))}return r()}};var n=e("@metamask/keyring-api"),r=e("../../../shared/constants/permissions"),a=e("../controllers/permissions");const i=[...Object.values(r.RestrictedEthMethods),...a.unrestrictedEthSigningMethods]}}},{package:"$root$",file:"app/scripts/lib/createEvmMethodsToNonEvmAccountReqFilterMiddleware.ts"}],[5890,{"../../../app/scripts/controllers/bridge/types":15,"../../../shared/constants/bridge":4816,"../../../shared/constants/time":4843,"../../../shared/lib/fetch-with-cache":4849,"../../../shared/lib/swaps-utils":4854,"../../../shared/modules/conversion.utils":4865,"@metamask/utils":2530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.fetchBridgeFeatureFlags=async function(){const e=`${i.BRIDGE_API_BASE_URL}/getAllFeatureFlags`,t=await(0,o.default)({url:e,fetchOptions:{method:"GET",headers:u},cacheOptions:{cacheRefreshTime:l},functionName:"fetchBridgeFeatureFlags"});if(h([{property:b.EXTENSION_SUPPORT,type:"boolean",validator:e=>"boolean"==typeof e},{property:b.NETWORK_SRC_ALLOWLIST,type:"object",validator:e=>Object.values(e).every((e=>"number"==typeof e))},{property:b.NETWORK_DEST_ALLOWLIST,type:"object",validator:e=>Object.values(e).every((e=>"number"==typeof e))}],t,e))return{[a.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]:t[b.EXTENSION_SUPPORT],[a.BridgeFeatureFlagsKey.NETWORK_SRC_ALLOWLIST]:t[b.NETWORK_SRC_ALLOWLIST].map((e=>(0,r.add0x)((0,d.decimalToHex)(e)))),[a.BridgeFeatureFlagsKey.NETWORK_DEST_ALLOWLIST]:t[b.NETWORK_DEST_ALLOWLIST].map((e=>(0,r.add0x)((0,d.decimalToHex)(e))))};return{[a.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]:!1,[a.BridgeFeatureFlagsKey.NETWORK_SRC_ALLOWLIST]:[],[a.BridgeFeatureFlagsKey.NETWORK_DEST_ALLOWLIST]:[]}};var n,r=e("@metamask/utils"),a=e("../../../app/scripts/controllers/bridge/types"),i=e("../../../shared/constants/bridge"),s=e("../../../shared/constants/time"),o=(n=e("../../../shared/lib/fetch-with-cache"))&&n.__esModule?n:{default:n},c=e("../../../shared/lib/swaps-utils"),d=e("../../../shared/modules/conversion.utils");const u={"X-Client-Id":i.BRIDGE_CLIENT_ID},l=10*s.MINUTE;var b=function(e){return e.EXTENSION_SUPPORT="extension-support",e.NETWORK_SRC_ALLOWLIST="src-network-allowlist",e.NETWORK_DEST_ALLOWLIST="dest-network-allowlist",e}(b||{});const h=(e,t,f)=>(0,c.validateData)(e,t,f)}}},{package:"$root$",file:"ui/pages/bridge/bridge.util.ts"}],[59,{loglevel:4170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(e){return function(t,f,n){n((n=>{f.error&&r.default.debug("Error in RPC response:\n",f),t.isMetamaskInternal||(r.default.info(`RPC (${e.origin}): ${t.method} -> ${f.error?"error":"success"}`),n())}))}};var n,r=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createLoggerMiddleware.js"}],[6,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.COOKIE_ID_MARKETING_WHITELIST_ORIGINS=f.COOKIE_ID_MARKETING_WHITELIST=void 0;const n=f.COOKIE_ID_MARKETING_WHITELIST=["https://metamask.io","https://learn.metamask.io","https://mmi-support.zendesk.com","https://community.metamask.io","https://support.metamask.io"];f.COOKIE_ID_MARKETING_WHITELIST_ORIGINS=n.map((e=>new URL(e).origin))}}},{package:"$root$",file:"app/scripts/constants/marketing-site-whitelist.ts"}],[60,{"./stream-utils":118,"eth-rpc-errors":3544},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=e("eth-rpc-errors"),r=e("./stream-utils");f.default=(e,t)=>async f=>{if(!(0,r.isStreamWritable)(t))return;if(!e[f.method])return void t.write({jsonrpc:"2.0",error:n.ethErrors.rpc.methodNotFound({message:`${f.method} not found`}),id:f.id});let a,i;try{a=await e[f.method](...f.params)}catch(e){i=e}(0,r.isStreamWritable)(t)?i?t.write({jsonrpc:"2.0",error:(0,n.serializeError)(i,{shouldIncludeStack:!0}),id:f.id}):t.write({jsonrpc:"2.0",result:a,id:f.id}):i&&console.error(i)}}}},{package:"$root$",file:"app/scripts/lib/createMetaRPCHandler.js"}],[61,{"./middleware/pending":80,"@metamask/eth-json-rpc-middleware":1357,"json-rpc-engine":4013},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function({version:e,getAccounts:t,processTransaction:f,processTypedMessage:i,processTypedMessageV3:s,processTypedMessageV4:o,processPersonalMessage:c,processDecryptMessage:d,processEncryptionPublicKey:u,getPendingNonce:l,getPendingTransactionByHash:b}){return(0,n.mergeMiddleware)([(0,n.createScaffoldMiddleware)({eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`}),(0,r.createWalletMiddleware)({getAccounts:t,processTransaction:f,processTypedMessage:i,processTypedMessageV3:s,processTypedMessageV4:o,processPersonalMessage:c,processDecryptMessage:d,processEncryptionPublicKey:u}),(0,a.createPendingNonceMiddleware)({getPendingNonce:l}),(0,a.createPendingTxMiddleware)({getPendingTransactionByHash:b})])};var n=e("json-rpc-engine"),r=e("@metamask/eth-json-rpc-middleware"),a=e("./middleware/pending")}}},{package:"$root$",file:"app/scripts/lib/createMetamaskMiddleware.js"}],[62,{loglevel:4170,"webextension-polyfill":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function({location:e,registerOnboarding:t}){return async function(f,a,i,s){try{if("wallet_registerOnboarding"!==f.method)return void i();f.tabId&&f.tabId!==r.default.tabs.TAB_ID_NONE?await t(e,f.tabId):n.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),a.result=!0,s()}catch(e){s(e)}}};var n=a(e("loglevel")),r=a(e("webextension-polyfill"));function a(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/createOnboardingMiddleware.js"}],[621,{"@ethereumjs/tx":451,"@ethereumjs/util":463,"@keystonehq/bc-ur-registry-eth":627,buffer:3319,hdkey:3959,rlp:624,uuid:4744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(f,"__esModule",{value:!0});var r=n(e("hdkey")),a=e("@ethereumjs/util"),i=n(e("rlp")),s=e("@ethereumjs/tx"),o=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid");const d="QR Hardware Wallet Device",u="m",l="0/*";var b,h;!function(e){e.hd="hd",e.pubkey="pubkey"}(b||(b={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(h||(h={}));class p{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type=d,this.requestSignature=async(e,t,f,n)=>{const r=await this.getInteraction().requestSignature(t,f,n),a=r.getRequestId(),i=r.getSignature();if(a){if(c.stringify(a)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId")}return{r:i.slice(0,32),s:i.slice(32,64),v:i.slice(64)}},this.__readCryptoHDKey=e=>{var t,f;const n=`m/${e.getOrigin().getPath()}`,r=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),a=(null==(f=e.getChildren())?void 0:f.getPath())||l,i=e.getName();if(e.getNote()===h.standard?this.keyringAccount=h.standard:e.getNote()===h.ledger_legacy&&(this.keyringAccount=h.ledger_legacy),!r)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const s=e.getBip32Key();this.xfp=r,this.xpub=s,this.hdPath=n,this.childrenPath=a,i!==undefined&&""!==i&&(this.name=i),this.initialized=!0},this.__readCryptoAccount=e=>{var t,f;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let r=!1;const i=e.getOutputDescriptors();if(!i||0===i.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(i.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(f=e.getOutputDescriptors())||f.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),f=`M/${t.getOrigin().getPath()}`,n="0x"+a.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===h.ledger_live&&(this.keyringAccount=h.ledger_live),this.paths[a.toChecksumAddress(n)]===undefined&&(r=!0),this.paths[a.toChecksumAddress(n)]=f}}catch(e){throw new Error(`KeystoneError#invalid_data: ${e}`)}})),r},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,f=t+this.perPage,n=[];for(let e=t;e<f;e++){const t=await this.__addressFromIndex(u,e);n.push({address:t,balance:null,index:e}),this.indexes[a.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,f=t+this.perPage,n=[];for(let e=t;e<f;e++){const t=await this.__addressFromIndex(u,e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===b.hd){this.checkKeyring(),this.hdk||(this.hdk=r.fromExtendedKey(this.xpub));const f=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${f}`),i="0x"+a.publicToAddress(n.publicKey,!0).toString("hex");return a.toChecksumAddress(i)}{const e=Object.keys(this.paths)[t];if(e)return a.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=b.hd,this.keyringAccount=h.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath=l,this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===o.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=b.hd,this.__readCryptoHDKey(e)):(this.keyringMode=b.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||b.hd,this.keyringAccount=e.keyringAccount||h.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||l)}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,f=t+e,n=[];for(let e=t;e<f;e++){const t=await this.__addressFromIndex(u,e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===b.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,f){const n=0===f.type?o.DataType.transaction:o.DataType.typedTransaction;let r;r=0===f.type?t.from(i.encode(f.getMessageToSign(!1))):f.getMessageToSign(!1);const a=await this._pathFromAddress(e),d=Number(f.common.chainId()),u=c.v4(),l=o.EthSignRequest.constructETHRequest(r,n,a,this.xfp,u,d),{r:b,s:h,v:p}=await this.requestSignature(u,l,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return s.TransactionFactory.fromTxData({...f.toJSON(),type:f.type,r:b,s:h,v:p},{common:f.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,f){const n=a.stripHexPrefix(f),r=await this._pathFromAddress(e),i=c.v4(),s=o.EthSignRequest.constructETHRequest(t.from(n,"hex"),o.DataType.personalMessage,r,this.xfp,i,undefined,e),{r:d,s:u,v:l}=await this.requestSignature(i,s,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([d,u,l]).toString("hex")}async signTypedData(e,f){const n=await this._pathFromAddress(e),r=c.v4(),a=o.EthSignRequest.constructETHRequest(t.from(JSON.stringify(f),"utf-8"),o.DataType.typedData,n,this.xfp,r,undefined,e),{r:i,s:s,v:d}=await this.requestSignature(r,a,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([i,s,d]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===b.hd){const t=a.toChecksumAddress(e);let f=this.indexes[t];if(void 0===f)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex(u,e)){f=e;break}if(void 0===f)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",f.toString()).replace(/\*/g,"0")}`}{const t=a.toChecksumAddress(e),f=this.paths[t];if(void 0===f)throw new Error("Unknown address");return f}}}p.type=d,f.BaseKeyring=p}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.development.js"}],[622,{"@ethereumjs/tx":451,"@ethereumjs/util":463,"@keystonehq/bc-ur-registry-eth":627,buffer:3319,hdkey:3959,rlp:624,uuid:4744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(f,"__esModule",{value:!0});var r,a,i=n(e("hdkey")),s=e("@ethereumjs/util"),o=n(e("rlp")),c=e("@ethereumjs/tx"),d=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid");!function(e){e.hd="hd",e.pubkey="pubkey"}(r||(r={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(a||(a={}));class l{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type="QR Hardware Wallet Device",this.requestSignature=async(e,t,f,n)=>{const r=await this.getInteraction().requestSignature(t,f,n),a=r.getRequestId(),i=r.getSignature();if(a&&u.stringify(a)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId");return{r:i.slice(0,32),s:i.slice(32,64),v:i.slice(64)}},this.__readCryptoHDKey=e=>{var t,f;const n="m/"+e.getOrigin().getPath(),r=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),i=(null==(f=e.getChildren())?void 0:f.getPath())||"0/*",s=e.getName();if(e.getNote()===a.standard?this.keyringAccount=a.standard:e.getNote()===a.ledger_legacy&&(this.keyringAccount=a.ledger_legacy),!r)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const o=e.getBip32Key();this.xfp=r,this.xpub=o,this.hdPath=n,this.childrenPath=i,void 0!==s&&""!==s&&(this.name=s),this.initialized=!0},this.__readCryptoAccount=e=>{var t,f;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let r=!1;const i=e.getOutputDescriptors();if(!i||0===i.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(i.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(f=e.getOutputDescriptors())||f.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),f="M/"+t.getOrigin().getPath(),n="0x"+s.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===a.ledger_live&&(this.keyringAccount=a.ledger_live),void 0===this.paths[s.toChecksumAddress(n)]&&(r=!0),this.paths[s.toChecksumAddress(n)]=f}}catch(e){throw new Error("KeystoneError#invalid_data: "+e)}})),r},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,f=t+this.perPage,n=[];for(let e=t;e<f;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e}),this.indexes[s.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,f=t+this.perPage,n=[];for(let e=t;e<f;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===r.hd){this.checkKeyring(),this.hdk||(this.hdk=i.fromExtendedKey(this.xpub));const f=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${f}`),r="0x"+s.publicToAddress(n.publicKey,!0).toString("hex");return s.toChecksumAddress(r)}{const e=Object.keys(this.paths)[t];if(e)return s.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=r.hd,this.keyringAccount=a.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath="0/*",this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===d.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=r.hd,this.__readCryptoHDKey(e)):(this.keyringMode=r.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||r.hd,this.keyringAccount=e.keyringAccount||a.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||"0/*")}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,f=t+e,n=[];for(let e=t;e<f;e++){const t=await this.__addressFromIndex("m",e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===r.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,f){const n=0===f.type?d.DataType.transaction:d.DataType.typedTransaction;let r;r=0===f.type?t.from(o.encode(f.getMessageToSign(!1))):f.getMessageToSign(!1);const a=await this._pathFromAddress(e),i=Number(f.common.chainId()),s=u.v4(),l=d.EthSignRequest.constructETHRequest(r,n,a,this.xfp,s,i),{r:b,s:h,v:p}=await this.requestSignature(s,l,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return c.TransactionFactory.fromTxData({...f.toJSON(),type:f.type,r:b,s:h,v:p},{common:f.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,f){const n=s.stripHexPrefix(f),r=await this._pathFromAddress(e),a=u.v4(),i=d.EthSignRequest.constructETHRequest(t.from(n,"hex"),d.DataType.personalMessage,r,this.xfp,a,void 0,e),{r:o,s:c,v:l}=await this.requestSignature(a,i,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([o,c,l]).toString("hex")}async signTypedData(e,f){const n=await this._pathFromAddress(e),r=u.v4(),a=d.EthSignRequest.constructETHRequest(t.from(JSON.stringify(f),"utf-8"),d.DataType.typedData,n,this.xfp,r,void 0,e),{r:i,s:s,v:o}=await this.requestSignature(r,a,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([i,s,o]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===r.hd){const t=s.toChecksumAddress(e);let f=this.indexes[t];if(void 0===f)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex("m",e)){f=e;break}if(void 0===f)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",f.toString()).replace(/\*/g,"0")}`}{const t=s.toChecksumAddress(e),f=this.paths[t];if(void 0===f)throw new Error("Unknown address");return f}}}l.type="QR Hardware Wallet Device",f.BaseKeyring=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.production.min.js"}],[623,{"./base-eth-keyring.cjs.development.js":621,"./base-eth-keyring.cjs.production.min.js":622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports=e("./base-eth-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/index.js"}],[624,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){function n(e){if(Array.isArray(e)){const t=[];for(let f=0;f<e.length;f++)t.push(n(e[f]));const f=b(...t);return b(i(f.length,192),f)}const t=y(e);return 1===t.length&&t[0]<128?t:b(i(t.length,128),t)}function r(e,t,f){if(f>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,f)}function a(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return u(d(e))}function i(e,t){if(e<56)return Uint8Array.from([e+t]);const f=p(e),n=p(t+55+f.length/2);return Uint8Array.from(l(n+f))}function s(e,t=!1){if(!e||0===e.length)return Uint8Array.from([]);const f=o(y(e));if(t)return f;if(0!==f.remainder.length)throw new Error("invalid RLP: remainder must be zero");return f.data}function o(e){let t,f,n,i,s;const c=[],d=e[0];if(d<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(d<=183){if(t=d-127,n=128===d?Uint8Array.from([]):r(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}if(d<=191){if(f=d-182,e.length-1<f)throw new Error("invalid RLP: not enough bytes for string length");if(t=a(r(e,1,f)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=r(e,f,t+f),{data:n,remainder:e.slice(t+f)}}if(d<=247){for(t=d-191,i=r(e,1,t);i.length;)s=o(i),c.push(s.data),i=s.remainder;return{data:c,remainder:e.slice(t)}}{if(f=d-246,t=a(r(e,1,f)),t<56)throw new Error("invalid RLP: encoded list too short");const n=f+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(i=r(e,f,n);i.length;)s=o(i),c.push(s.data),i=s.remainder;return{data:c,remainder:e.slice(n)}}}Object.defineProperty(f,"__esModule",{value:!0}),f.utils=f.decode=f.encode=void 0,f.encode=n,f.decode=s;const c=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function d(e){let t="";for(let f=0;f<e.length;f++)t+=c[e[f]];return t}function u(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function l(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let f=0;f<t.length;f++){const n=2*f;t[f]=u(e.slice(n,n+2))}return t}function b(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),f=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const r=e[t];f.set(r,n),n+=r.length}return f}function h(e){return(new TextEncoder).encode(e)}function p(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function m(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return m(e)?l((t="string"!=typeof(f=e)?f:m(f)?f.slice(2):f).length%2?`0${t}`:t):h(e);var t,f;if("number"==typeof e||"bigint"==typeof e)return e?l(p(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}f.utils={bytesToHex:d,concatBytes:b,hexToBytes:l,utf8ToBytes:h};const g={encode:n,decode:s};f.default=g}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>rlp",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/rlp/dist/index.js"}],[63,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(e){return function(t,f,n){t.origin=e.origin,n()}}}}},{package:"$root$",file:"app/scripts/lib/createOriginMiddleware.js"}],[64,{"../../../shared/constants/app":4815,"../../../shared/constants/metametrics":4827,"../../../shared/constants/security-provider":4837,"../../../shared/constants/signatures":4838,"../../../shared/constants/transaction":4845,"../../../shared/modules/transaction.utils":4888,"../../../ui/helpers/utils/metrics":5806,"../../../ui/pages/confirmations/utils/confirm":6214,"./snap-keyring/metrics":113,"@metamask/controller-utils":1210,"eth-rpc-errors":3544,"ethereumjs-util":3559},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function({getMetricsState:e,rateLimitTimeout:t=3e5,rateLimitSamplePercent:f=.001,globalRateLimitTimeout:v=3e5,globalRateLimitMaxAmount:E=10,getAccountType:k,getDeviceModel:S,isConfirmationRedesignEnabled:A,snapAndHardwareMessenger:C,appStateController:P,metaMetricsController:M}){return async function(I,x,O){const{origin:N,method:R,params:D}=I,L=m[R];let j;switch(L){case p.TIMEOUT:j=void 0!==w[R];break;case p.NON_RATE_LIMITED:j=!1;break;case p.BLOCKED:j=!0;break;default:case p.RANDOM_SAMPLE:j=Math.random()>=f}const U=E>0&&T>=E,B=!0===e().participateInMetaMetrics,F=g[R],G={};let H;const q=N!==i.ORIGIN_METAMASK&&!j&&!U&&!0===B;if(q){const e=F?F.REQUESTED:s.MetaMetricsEventName.ProviderMethodCalled;if(e===s.MetaMetricsEventName.SignatureRequested){var K,$,W,Y,z;let e;var V,J;if(G.signature_type=R,(0,a.isValidAddress)(null==I||null===(K=I.params)||void 0===K?void 0:K[1]))e=null==I||null===(V=I.params)||void 0===V?void 0:V[0];else e=null==I||null===(J=I.params)||void 0===J?void 0:J[1];null!==($=I.securityAlertResponse)&&void 0!==$&&$.providerRequestsCount&&Object.keys(I.securityAlertResponse.providerRequestsCount).forEach((e=>{G[`ppom_${e}_count`]=I.securityAlertResponse.providerRequestsCount[e]})),G.security_alert_response=(null===(W=I.securityAlertResponse)||void 0===W?void 0:W.result_type)??c.BlockaidResultType.NotApplicable,G.security_alert_reason=(null===(Y=I.securityAlertResponse)||void 0===Y?void 0:Y.reason)??c.BlockaidReason.notApplicable,null!==(z=I.securityAlertResponse)&&void 0!==z&&z.description&&(G.security_alert_description=I.securityAlertResponse.description);A()&&b.REDESIGN_APPROVAL_TYPES.find((e=>e===y[R]))&&(G.ui_customizations=[...G.ui_customizations||[],s.MetaMetricsEventUiCustomization.RedesignedConfirmation]);const t=await(0,h.getSnapAndHardwareInfoForMetrics)(k,S,C);Object.assign(G,t);try{if(R===i.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,n.detectSIWE)({data:e});t&&(G.ui_customizations=[...G.ui_customizations||[],s.MetaMetricsEventUiCustomization.Siwe])}else if(R===i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4){const t=(0,o.parseTypedDataMessage)(e);H={},G.eip712_primary_type=t.primaryType,H.eip712_verifyingContract=t.domain.verifyingContract,H.eip712_domain_version=t.domain.version,H.eip712_domain_name=t.domain.name,d.PRIMARY_TYPES_PERMIT.includes(t.primaryType)?G.ui_customizations=[...G.ui_customizations||[],s.MetaMetricsEventUiCustomization.Permit]:d.PRIMARY_TYPES_ORDER.includes(t.primaryType)&&(G.ui_customizations=[...G.ui_customizations||[],s.MetaMetricsEventUiCustomization.Order])}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Errored - ${e}`)}}else G.method=R;const f=_[R];if(f&&(G.params=f(D)),e===s.MetaMetricsEventName.SignatureRequested){!function(e,t,f){e.createEventFragment({category:s.MetaMetricsEventCategory.InpageProvider,initialEvent:s.MetaMetricsEventName.SignatureRequested,successEvent:s.MetaMetricsEventName.SignatureApproved,failureEvent:s.MetaMetricsEventName.SignatureRejected,uniqueIdentifier:(0,l.generateSignatureUniqueId)(t.id),persist:!0,referrer:{url:t.origin},...f})}(M,I,{properties:G,sensitiveProperties:H})}else M.trackEvent({event:e,category:s.MetaMetricsEventCategory.InpageProvider,referrer:{url:N},properties:G});L===p.TIMEOUT&&(w[R]=setTimeout((()=>{delete w[R]}),t)),T+=1,setTimeout((()=>{T-=1}),v)}O((async e=>{var t,f,n,a;if(!1===q||void 0===F)return e();const i=null===(t=x.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.location;let o;(null===(f=x.error)||void 0===f?void 0:f.code)===r.errorCodes.provider.userRejectedRequest?o=F.REJECTED:(null===(n=x.error)||void 0===n?void 0:n.code)===r.errorCodes.rpc.internal&&"Request rejected by user or snap."===(null===(a=x.error)||void 0===a?void 0:a.message)?(o=F.REJECTED,G.status=x.error.message):o=F.APPROVED;let c={};if(u.SIGNING_METHODS.includes(R)){var d;const e=P.getSignatureSecurityAlertResponse(null===(d=I.securityAlertResponse)||void 0===d?void 0:d.securityAlertId);c=(0,l.getBlockaidMetricsProps)({securityAlertResponse:e})}const b={...G,...c,location:i};if(o===s.MetaMetricsEventName.SignatureRejected||o===s.MetaMetricsEventName.SignatureApproved){const e={abandoned:o===F.REJECTED};!function(e,t,f,n){const r=(0,l.generateSignatureUniqueId)(t.id);e.updateEventFragment(r,n),e.finalizeEventFragment(r,f)}(M,I,e,{properties:b,sensitiveProperties:H})}else M.trackEvent({event:o,category:s.MetaMetricsEventCategory.InpageProvider,referrer:{url:N},properties:b});return e()}))}};var n=e("@metamask/controller-utils"),r=e("eth-rpc-errors"),a=e("ethereumjs-util"),i=e("../../../shared/constants/app"),s=e("../../../shared/constants/metametrics"),o=e("../../../shared/modules/transaction.utils"),c=e("../../../shared/constants/security-provider"),d=e("../../../shared/constants/signatures"),u=e("../../../shared/constants/transaction"),l=e("../../../ui/helpers/utils/metrics"),b=e("../../../ui/pages/confirmations/utils/confirm"),h=e("./snap-keyring/metrics");const p={TIMEOUT:"timeout",BLOCKED:"blocked",NON_RATE_LIMITED:"non_rate_limited",RANDOM_SAMPLE:"random_sample"},m={[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:p.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:p.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:p.NON_RATE_LIMITED,[i.MESSAGE_TYPE.PERSONAL_SIGN]:p.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_DECRYPT]:p.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:p.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:p.TIMEOUT,[i.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:p.TIMEOUT,[i.MESSAGE_TYPE.SEND_METADATA]:p.BLOCKED,[i.MESSAGE_TYPE.ETH_CHAIN_ID]:p.BLOCKED,[i.MESSAGE_TYPE.ETH_ACCOUNTS]:p.BLOCKED,[i.MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE]:p.BLOCKED,[i.MESSAGE_TYPE.GET_PROVIDER_STATE]:p.BLOCKED},y={[i.MESSAGE_TYPE.PERSONAL_SIGN]:n.ApprovalType.PersonalSign,[i.MESSAGE_TYPE.SIGN]:n.ApprovalType.SignTransaction,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:n.ApprovalType.EthSignTypedData,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1]:n.ApprovalType.EthSignTypedData,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:n.ApprovalType.EthSignTypedData,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:n.ApprovalType.EthSignTypedData},g={[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:{APPROVED:s.MetaMetricsEventName.SignatureApproved,REJECTED:s.MetaMetricsEventName.SignatureRejected,REQUESTED:s.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:{APPROVED:s.MetaMetricsEventName.SignatureApproved,REJECTED:s.MetaMetricsEventName.SignatureRejected,REQUESTED:s.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:{APPROVED:s.MetaMetricsEventName.SignatureApproved,REJECTED:s.MetaMetricsEventName.SignatureRejected,REQUESTED:s.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.PERSONAL_SIGN]:{APPROVED:s.MetaMetricsEventName.SignatureApproved,REJECTED:s.MetaMetricsEventName.SignatureRejected,REQUESTED:s.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.ETH_DECRYPT]:{APPROVED:s.MetaMetricsEventName.DecryptionApproved,REJECTED:s.MetaMetricsEventName.DecryptionRejected,REQUESTED:s.MetaMetricsEventName.DecryptionRequested},[i.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:{APPROVED:s.MetaMetricsEventName.EncryptionPublicKeyApproved,REJECTED:s.MetaMetricsEventName.EncryptionPublicKeyRejected,REQUESTED:s.MetaMetricsEventName.EncryptionPublicKeyRequested},[i.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:{APPROVED:s.MetaMetricsEventName.PermissionsApproved,REJECTED:s.MetaMetricsEventName.PermissionsRejected,REQUESTED:s.MetaMetricsEventName.PermissionsRequested},[i.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:{APPROVED:s.MetaMetricsEventName.PermissionsApproved,REJECTED:s.MetaMetricsEventName.PermissionsRejected,REQUESTED:s.MetaMetricsEventName.PermissionsRequested}},_={[i.MESSAGE_TYPE.WATCH_ASSET]:({type:e})=>({type:e})},w={};let T=0}}},{package:"$root$",file:"app/scripts/lib/createRPCMethodTrackingMiddleware.js"}],[65,{"promise-to-callback":4308,"readable-stream":4577},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(e,t){return new i(e,t)};var n,r=e("readable-stream"),a=(n=e("promise-to-callback"))&&n.__esModule?n:{default:n};class i extends r.Writable{constructor(e,t){super({objectMode:!0,...t}),this._asyncWriteFn=e}_write(e,t,f){(0,a.default)(this._asyncWriteFn(e,t))(f)}}}}},{package:"$root$",file:"app/scripts/lib/createStreamSink.js"}],[654,{"./metamask-airgapped-keyring.cjs.development.js":655,"./metamask-airgapped-keyring.cjs.production.min.js":656},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports=e("./metamask-airgapped-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/index.js"}],[655,{"@ethereumjs/tx":451,"@keystonehq/base-eth-keyring":623,"@keystonehq/bc-ur-registry-eth":627,"@metamask/obs-store":661,buffer:3319,events:3629,rlp:4593,uuid:4744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){(function(t){(function(){Object.defineProperty(f,"__esModule",{value:!0});var n,r=e("@keystonehq/base-eth-keyring"),a=e("events"),i=e("@metamask/obs-store"),s=e("@keystonehq/bc-ur-registry-eth"),o=e("uuid"),c=e("@ethereumjs/tx"),d=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class u extends a.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(`${e}-signed`),this.removeAllListeners(`${e}-canceled`)},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,f)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(f=>{const n=s.CryptoHDKey.fromCBOR(t.from(f,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(f=>{const n=s.CryptoAccount.fromCBOR(t.from(f,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),f(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,f,n)=>new Promise(((r,a)=>{const i=e.toUR(),c=e.getRequestId(),d=o.stringify(c),u={requestId:d,payload:{type:i.type,cbor:i.cbor.toString("hex")},title:f,description:n};this.memStore.updateState({sign:{request:u}}),this.once(`${d}-signed`,(e=>{const f=s.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),r(f)})),this.once(`${d}-canceled`,(()=>{this.resetState(),a(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(`${e}-signed`,t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(`${t}-canceled`)}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},u.instance)return u.instance;this.memStore=new i.ObservableStore({sync:{reading:!1},sign:{},_version:1}),u.instance=this}}class l extends r.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new u,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=undefined,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,l.instance)return l.instance.deserialize(e),l.instance;l.instance=this}async signTransaction(e,t){const f=0===t.type?s.DataType.transaction:s.DataType.typedTransaction;let n;n=0===t.type?d.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const r=await this._pathFromAddress(e),a=t.common.chainId(),i=o.v4(),u=s.EthSignRequest.constructETHRequest(n,f,r,this.xfp,i,a,e),{r:l,s:b,v:h}=await this.requestSignature(i,u,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),p=t.toJSON();p.v=h,p.s=b,p.r=l,p.type=t.type;return c.TransactionFactory.fromTxData(p,{common:t.common})}}l.type=r.BaseKeyring.type,f.MetaMaskKeyring=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.development.js"}],[656,{"@ethereumjs/tx":451,"@keystonehq/base-eth-keyring":623,"@keystonehq/bc-ur-registry-eth":627,"@metamask/obs-store":661,buffer:3319,events:3629,rlp:4593,uuid:4744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){(function(t){(function(){Object.defineProperty(f,"__esModule",{value:!0});var n,r=e("@keystonehq/base-eth-keyring"),a=e("events"),i=e("@metamask/obs-store"),s=e("@keystonehq/bc-ur-registry-eth"),o=e("uuid"),c=e("@ethereumjs/tx"),d=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class u extends a.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(e+"-signed"),this.removeAllListeners(e+"-canceled")},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,f)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(f=>{const n=s.CryptoHDKey.fromCBOR(t.from(f,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(f=>{const n=s.CryptoAccount.fromCBOR(t.from(f,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),f(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,f,n)=>new Promise(((r,a)=>{const i=e.toUR(),c=e.getRequestId(),d=o.stringify(c),u={requestId:d,payload:{type:i.type,cbor:i.cbor.toString("hex")},title:f,description:n};this.memStore.updateState({sign:{request:u}}),this.once(d+"-signed",(e=>{const f=s.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),r(f)})),this.once(d+"-canceled",(()=>{this.resetState(),a(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(e+"-signed",t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(t+"-canceled")}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},u.instance)return u.instance;this.memStore=new i.ObservableStore({sync:{reading:!1},sign:{},_version:1}),u.instance=this}}class l extends r.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new u,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=void 0,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,l.instance)return l.instance.deserialize(e),l.instance;l.instance=this}async signTransaction(e,t){const f=0===t.type?s.DataType.transaction:s.DataType.typedTransaction;let n;n=0===t.type?d.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const r=await this._pathFromAddress(e),a=t.common.chainId(),i=o.v4(),u=s.EthSignRequest.constructETHRequest(n,f,r,this.xfp,i,a,e),{r:l,s:b,v:h}=await this.requestSignature(i,u,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),p=t.toJSON();return p.v=h,p.s=b,p.r=l,p.type=t.type,c.TransactionFactory.fromTxData(p,{common:t.common})}}l.type=r.BaseKeyring.type,f.MetaMaskKeyring=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.production.min.js"}],[657,{"./ObservableStore":659},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.ComposedStore=void 0;const n=e("./ObservableStore");class r extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const f=t=>{const f=this.getState();f[e]=t,this.putState(f)};t.subscribe(f),f(t.getState())}}f.ComposedStore=r}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[658,{"./ObservableStore":659},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.MergedStore=void 0;const n=e("./ObservableStore");class r extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}f.MergedStore=r}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/MergedStore.js"}],[659,{"@metamask/safe-event-emitter":663},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(f,"__esModule",{value:!0}),f.ObservableStore=void 0;const r=n(e("@metamask/safe-event-emitter"));class a extends r.default{constructor(e){super(),this._state=e||{}}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}f.ObservableStore=a}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[66,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(e){return function(t,f,n){t.tabId=e.tabId,n()}}}}},{package:"$root$",file:"app/scripts/lib/createTabIdMiddleware.js"}],[660,{stream:4668},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.storeAsStream=void 0;const n=e("stream");class r extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const f=super.pipe(e,t);return e.write(this.obsStore.getState()),f}_write(e,t,f){this.obsStore.putState(e),f()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}f.storeAsStream=function(e){return new r(e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/asStream.js"}],[661,{"./ComposedStore":657,"./MergedStore":658,"./ObservableStore":659,"./asStream":660,"./transform":662},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){var n=this&&this.__createBinding||(Object.create?function(e,t,f,n){n===undefined&&(n=f),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[f]}})}:function(e,t,f,n){n===undefined&&(n=f),e[n]=t[f]}),r=this&&this.__exportStar||function(e,t){for(var f in e)"default"===f||Object.prototype.hasOwnProperty.call(t,f)||n(t,e,f)};Object.defineProperty(f,"__esModule",{value:!0}),r(e("./asStream"),f),r(e("./ComposedStore"),f),r(e("./MergedStore"),f),r(e("./ObservableStore"),f),r(e("./transform"),f)}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/index.js"}],[662,{through2:676},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.storeTransformStream=void 0;const n=e("through2");f.storeTransformStream=function(e){return n.obj(((t,f,n)=>{try{return n(null,e(t)),undefined}catch(e){return n(e),undefined}}))}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/transform.js"}],[663,{events:3629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0});const n=e("events");function r(e,t,f){try{Reflect.apply(e,t,f)}catch(e){setTimeout((()=>{throw e}))}}class a extends n.EventEmitter{emit(e,...t){let f="error"===e;const n=this._events;if(n!==undefined)f=f&&n.error===undefined;else if(!f)return!1;if(f){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const f=new Error("Unhandled error."+(e?` (${e.message})`:""));throw f.context=e,f}const a=n[e];if(a===undefined)return!1;if("function"==typeof a)r(a,this,t);else{const e=a.length,f=function(e){const t=e.length,f=new Array(t);for(let n=0;n<t;n+=1)f[n]=e[n];return f}(a);for(let n=0;n<e;n+=1)r(f[n],this,t)}return!0}}f.default=a}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>@metamask/safe-event-emitter",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/safe-event-emitter/index.js"}],[664,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream>isarray",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/isarray/index.js"}],[665,{"./_stream_readable":667,"./_stream_writable":669,"core-util-is":3381,inherits:3974,"process-nextick-args":4306},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){var n=e("process-nextick-args"),r=Object.keys||function(e){var t=[];for(var f in e)t.push(f);return t};t.exports=u;var a=Object.create(e("core-util-is"));a.inherits=e("inherits");var i=e("./_stream_readable"),s=e("./_stream_writable");a.inherits(u,i);for(var o=r(s.prototype),c=0;c<o.length;c++){var d=o[c];u.prototype[d]||(u.prototype[d]=s.prototype[d])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||n.nextTick(b,this)}function b(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/readable-stream/lib/_stream_duplex.js"}],[666,{"./_stream_transform":668,"core-util-is":3381,inherits:3974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports=a;var n=e("./_stream_transform"),r=Object.create(e("core-util-is"));function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}r.inherits=e("inherits"),r.inherits(a,n),a.prototype._transform=function(e,t,f){f(null,e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/readable-stream/lib/_stream_passthrough.js"}],[667,{"./_stream_duplex":665,"./internal/streams/BufferList":670,"./internal/streams/destroy":671,"./internal/streams/stream":672,_process:4307,"core-util-is":3381,events:3629,inherits:3974,isarray:664,"process-nextick-args":4306,"safe-buffer":674,"string_decoder/":675,util:3284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){(function(f){(function(){var n=e("process-nextick-args");t.exports=g;var r,a=e("isarray");g.ReadableState=y;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),o=e("safe-buffer").Buffer,c=global.Uint8Array||function(){};var d=Object.create(e("core-util-is"));d.inherits=e("inherits");var u=e("util"),l=void 0;l=u&&u.debuglog?u.debuglog("stream"):function(){};var b,h=e("./internal/streams/BufferList"),p=e("./internal/streams/destroy");d.inherits(g,s);var m=["error","close","destroy","pause","resume"];function y(t,f){t=t||{};var n=f instanceof(r=r||e("./_stream_duplex"));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var a=t.highWaterMark,i=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:n&&(i||0===i)?i:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(b||(b=e("string_decoder/").StringDecoder),this.decoder=new b(t.encoding),this.encoding=t.encoding)}function g(t){if(r=r||e("./_stream_duplex"),!(this instanceof g))return new g(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function _(e,t,f,n,r){var a,i=e._readableState;null===t?(i.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var f=t.decoder.end();f&&f.length&&(t.buffer.push(f),t.length+=t.objectMode?1:f.length)}t.ended=!0,E(e)}(e,i)):(r||(a=function(e,t){var f;n=t,o.isBuffer(n)||n instanceof c||"string"==typeof t||t===undefined||e.objectMode||(f=new TypeError("Invalid non-string/buffer chunk"));var n;return f}(i,t)),a?e.emit("error",a):i.objectMode||t&&t.length>0?("string"==typeof t||i.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!f?(t=i.decoder.write(t),i.objectMode||0!==t.length?w(e,i,t,!1):S(e,i)):w(e,i,t,!1))):n||(i.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(i)}function w(e,t,f,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",f),e.read(0)):(t.length+=t.objectMode?1:f.length,n?t.buffer.unshift(f):t.buffer.push(f),t.needReadable&&E(e)),S(e,t)}Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),g.prototype.destroy=p.destroy,g.prototype._undestroy=p.undestroy,g.prototype._destroy=function(e,t){this.push(null),t(e)},g.prototype.push=function(e,t){var f,n=this._readableState;return n.objectMode?f=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),f=!0),_(this,e,t,!1,f)},g.prototype.unshift=function(e){return _(this,e,null,!0,!1)},g.prototype.isPaused=function(){return!1===this._readableState.flowing},g.prototype.setEncoding=function(t){return b||(b=e("string_decoder/").StringDecoder),this._readableState.decoder=new b(t),this._readableState.encoding=t,this};var T=8388608;function v(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(k,e):k(e))}function k(e){l("emit readable"),e.emit("readable"),M(e)}function S(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(A,e,t))}function A(e,t){for(var f=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(l("maybeReadMore read 0"),e.read(0),f!==t.length);)f=t.length;t.readingMore=!1}function C(e){l("readable nexttick read 0"),e.read(0)}function P(e,t){t.reading||(l("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function I(e,t){return 0===t.length?null:(t.objectMode?f=t.buffer.shift():!e||e>=t.length?(f=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):f=function(e,t,f){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():f?function(e,t){var f=t.head,n=1,r=f.data;e-=r.length;for(;f=f.next;){var a=f.data,i=e>a.length?a.length:e;if(i===a.length?r+=a:r+=a.slice(0,e),0===(e-=i)){i===a.length?(++n,f.next?t.head=f.next:t.head=t.tail=null):(t.head=f,f.data=a.slice(i));break}++n}return t.length-=n,r}(e,t):function(e,t){var f=o.allocUnsafe(e),n=t.head,r=1;n.data.copy(f),e-=n.data.length;for(;n=n.next;){var a=n.data,i=e>a.length?a.length:e;if(a.copy(f,f.length-e,0,i),0===(e-=i)){i===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(i));break}++r}return t.length-=r,f}(e,t);return n}(e,t.buffer,t.decoder),f);var f}function x(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function N(e,t){for(var f=0,n=e.length;f<n;f++)if(e[f]===t)return f;return-1}g.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,f=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?x(this):E(this),null;if(0===(e=v(e,t))&&t.ended)return 0===t.length&&x(this),null;var n,r=t.needReadable;return l("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",r=!0),t.ended||t.reading?l("reading or ended",r=!1):r&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=v(f,t))),null===(n=e>0?I(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),f!==e&&t.ended&&x(this)),null!==n&&this.emit("data",n),n},g.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},g.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,l("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||!1!==t.end)&&e!==f.stdout&&e!==f.stderr?d:_;function c(t,f){l("onunpipe"),t===r&&f&&!1===f.hasUnpiped&&(f.hasUnpiped=!0,l("cleanup"),e.removeListener("close",y),e.removeListener("finish",g),e.removeListener("drain",u),e.removeListener("error",m),e.removeListener("unpipe",c),r.removeListener("end",d),r.removeListener("end",_),r.removeListener("data",p),b=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function d(){l("onend"),e.end()}s.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",c);var u=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,M(e))}}(r);e.on("drain",u);var b=!1;var h=!1;function p(t){l("ondata"),h=!1,!1!==e.write(t)||h||((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==N(s.pipes,e))&&!b&&(l("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,h=!0),r.pause())}function m(t){l("onerror",t),_(),e.removeListener("error",m),0===i(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",g),_()}function g(){l("onfinish"),e.removeListener("close",y),_()}function _(){l("unpipe"),r.unpipe(e)}return r.on("data",p),function(e,t,f){if("function"==typeof e.prependListener)return e.prependListener(t,f);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(f):e._events[t]=[f,e._events[t]]:e.on(t,f)}(e,"error",m),e.once("close",y),e.once("finish",g),e.emit("pipe",r),s.flowing||(l("pipe resume"),r.resume()),e},g.prototype.unpipe=function(e){var t=this._readableState,f={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,f)),this;if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)n[a].emit("unpipe",this,f);return this}var i=N(t.pipes,e);return-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,f)),this},g.prototype.on=function(e,t){var f=s.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):n.nextTick(C,this))}return f},g.prototype.addListener=g.prototype.on,g.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(P,e,t))}(this,e)),this},g.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this},g.prototype.wrap=function(e){var t=this,f=this._readableState,n=!1;for(var r in e.on("end",(function(){if(l("wrapped end"),f.decoder&&!f.ended){var e=f.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){(l("wrapped data"),f.decoder&&(r=f.decoder.write(r)),!f.objectMode||null!==r&&r!==undefined)&&((f.objectMode||r&&r.length)&&(t.push(r)||(n=!0,e.pause())))})),e)this[r]===undefined&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var a=0;a<m.length;a++)e.on(m[a],this.emit.bind(this,m[a]));return this._read=function(t){l("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),g._fromList=I}).call(this)}).call(this,e("_process"))}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/readable-stream/lib/_stream_readable.js"}],[668,{"./_stream_duplex":665,"core-util-is":3381,inherits:3974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports=i;var n=e("./_stream_duplex"),r=Object.create(e("core-util-is"));function a(e,t){var f=this._transformState;f.transforming=!1;var n=f.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));f.writechunk=null,f.writecb=null,null!=t&&this.push(t),n(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);n.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,f){o(e,t,f)})):o(this,null,null)}function o(e,t,f){if(t)return e.emit("error",t);if(null!=f&&e.push(f),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}r.inherits=e("inherits"),r.inherits(i,n),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,f){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,f){var n=this._transformState;if(n.writecb=f,n.writechunk=e,n.writeencoding=t,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var f=this;n.prototype._destroy.call(this,e,(function(e){t(e),f.emit("close")}))}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/readable-stream/lib/_stream_transform.js"}],[669,{"./_stream_duplex":665,"./internal/streams/destroy":671,"./internal/streams/stream":672,_process:4307,"core-util-is":3381,inherits:3974,"process-nextick-args":4306,"safe-buffer":674,timers:4685,"util-deprecate":4740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){(function(f,n){(function(){var r=e("process-nextick-args");function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,f){var n=e.entry;e.entry=null;for(;n;){var r=n.callback;t.pendingcb--,r(f),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}t.exports=y;var i,s=!f.browser&&["v0.10","v0.9."].indexOf(f.version.slice(0,5))>-1?n:r.nextTick;y.WritableState=m;var o=Object.create(e("core-util-is"));o.inherits=e("inherits");var c={deprecate:e("util-deprecate")},d=e("./internal/streams/stream"),u=e("safe-buffer").Buffer,l=global.Uint8Array||function(){};var b,h=e("./internal/streams/destroy");function p(){}function m(t,f){i=i||e("./_stream_duplex"),t=t||{};var n=f instanceof i;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var o=t.highWaterMark,c=t.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(c||0===c)?c:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var f=e._writableState,n=f.sync,a=f.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(f),t)!function(e,t,f,n,a){--t.pendingcb,f?(r.nextTick(a,n),r.nextTick(E,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(a(n),e._writableState.errorEmitted=!0,e.emit("error",n),E(e,t))}(e,f,n,t,a);else{var i=T(f);i||f.corked||f.bufferProcessing||!f.bufferedRequest||w(e,f),n?s(_,e,f,i,a):_(e,f,i,a)}}(f,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(t){if(i=i||e("./_stream_duplex"),!(b.call(y,this)||this instanceof i))return new y(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function g(e,t,f,n,r,a,i){t.writelen=n,t.writecb=i,t.writing=!0,t.sync=!0,f?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function _(e,t,f,n){f||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),E(e,t)}function w(e,t){t.bufferProcessing=!0;var f=t.bufferedRequest;if(e._writev&&f&&f.next){var n=t.bufferedRequestCount,r=new Array(n),i=t.corkedRequestsFree;i.entry=f;for(var s=0,o=!0;f;)r[s]=f,f.isBuf||(o=!1),f=f.next,s+=1;r.allBuffers=o,g(e,t,!0,t.length,r,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;f;){var c=f.chunk,d=f.encoding,u=f.callback;if(g(e,t,!1,t.objectMode?1:c.length,c,d,u),f=f.next,t.bufferedRequestCount--,t.writing)break}null===f&&(t.lastBufferedRequest=null)}t.bufferedRequest=f,t.bufferProcessing=!1}function T(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function v(e,t){e._final((function(f){t.pendingcb--,f&&e.emit("error",f),t.prefinished=!0,e.emit("prefinish"),E(e,t)}))}function E(e,t){var f=T(t);return f&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(v,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),f}o.inherits(y,d),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!b.call(this,e)||this===y&&(e&&e._writableState instanceof m)}})):b=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,f){var n,a=this._writableState,i=!1,s=!a.objectMode&&(n=e,u.isBuffer(n)||n instanceof l);return s&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(f=t,t=null),s?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof f&&(f=p),a.ended?function(e,t){var f=new Error("write after end");e.emit("error",f),r.nextTick(t,f)}(this,f):(s||function(e,t,f,n){var a=!0,i=!1;return null===f?i=new TypeError("May not write null values to stream"):"string"==typeof f||f===undefined||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),r.nextTick(n,i),a=!1),a}(this,a,e,f))&&(a.pendingcb++,i=function(e,t,f,n,r,a){if(!f){var i=function(e,t,f){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,f));return t}(t,n,r);n!==i&&(f=!0,r="buffer",n=i)}var s=t.objectMode?1:n.length;t.length+=s;var o=t.length<t.highWaterMark;o||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:r,isBuf:f,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,s,n,r,a);return o}(this,a,s,e,t,f)),i},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,f){f(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,f){var n=this._writableState;"function"==typeof e?(f=e,e=null,t=null):"function"==typeof t&&(f=t,t=null),null!==e&&e!==undefined&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,f){t.ending=!0,E(e,t),f&&(t.finished?r.nextTick(f):e.once("finish",f));t.ended=!0,e.writable=!1}(this,n,f)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=h.destroy,y.prototype._undestroy=h.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this)}).call(this,e("_process"),e("timers").setImmediate)}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/readable-stream/lib/_stream_writable.js"}],[67,{"../../../shared/constants/app":4815,"../../../shared/lib/trace":4857},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(){return async function(e,t,f){const{id:a,method:i}=e;i===n.MESSAGE_TYPE.ETH_SEND_TRANSACTION&&(e.traceContext=await(0,r.trace)({name:r.TraceName.Transaction,id:a,tags:{source:"dapp"}}),await(0,r.trace)({name:r.TraceName.Middleware,id:a,parentContext:e.traceContext})),f()}};var n=e("../../../shared/constants/app"),r=e("../../../shared/lib/trace")}}},{package:"$root$",file:"app/scripts/lib/createTracingMiddleware.ts"}],[670,{"safe-buffer":674,util:3284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){var n=e("safe-buffer").Buffer,r=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,f=""+t.data;t=t.next;)f+=e+t.data;return f},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,f,r,a=n.allocUnsafe(e>>>0),i=this.head,s=0;i;)t=i.data,f=a,r=s,t.copy(f,r),s+=i.data.length,i=i.next;return a},e}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/readable-stream/lib/internal/streams/BufferList.js"}],[671,{"process-nextick-args":4306},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){var n=e("process-nextick-args");function r(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var f=this,a=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return a||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(r,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(r,f,e),f._writableState&&(f._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[672,{events:3629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){t.exports=e("events").EventEmitter}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[673,{"./lib/_stream_duplex.js":665,"./lib/_stream_passthrough.js":666,"./lib/_stream_readable.js":667,"./lib/_stream_transform.js":668,"./lib/_stream_writable.js":669},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){(f=t.exports=e("./lib/_stream_readable.js")).Stream=f,f.Readable=f,f.Writable=e("./lib/_stream_writable.js"),f.Duplex=e("./lib/_stream_duplex.js"),f.Transform=e("./lib/_stream_transform.js"),f.PassThrough=e("./lib/_stream_passthrough.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/readable-stream/readable-browser.js"}],[674,{buffer:3319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){var n=e("buffer"),r=n.Buffer;function a(e,t){for(var f in e)t[f]=e[f]}function i(e,t,f){return r(e,t,f)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(a(n,f),f.Buffer=i),a(r,i),i.from=function(e,t,f){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,f)},i.alloc=function(e,t,f){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=r(e);return t!==undefined?"string"==typeof f?n.fill(t,f):n.fill(t):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream>safe-buffer",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/safe-buffer/index.js"}],[675,{"safe-buffer":674},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){var n=e("safe-buffer").Buffer,r=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=o,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=d,this.end=u,t=3;break;default:return this.write=l,void(this.end=b)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,f=function(e,t,f){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return f!==undefined?f:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function o(e,t){if((e.length-t)%2==0){var f=e.toString("utf16le",t);if(f){var n=f.charCodeAt(f.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],f.slice(0,-1)}return f}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var f=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,f)}return t}function d(e,t){var f=(e.length-t)%3;return 0===f?e.toString("base64",t):(this.lastNeed=3-f,this.lastTotal=3,1===f?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-f))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}f.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,f;if(this.lastNeed){if((t=this.fillLast(e))===undefined)return"";f=this.lastNeed,this.lastNeed=0}else f=0;return f<e.length?t?t+this.text(e,f):this.text(e,f):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var f=function(e,t,f){var n=t.length-1;if(n<f)return 0;var r=i(t[n]);if(r>=0)return r>0&&(e.lastNeed=r-1),r;if(--n<f||-2===r)return 0;if(r=i(t[n]),r>=0)return r>0&&(e.lastNeed=r-2),r;if(--n<f||-2===r)return 0;if(r=i(t[n]),r>=0)return r>0&&(2===r?r=0:e.lastNeed=r-3),r;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=f;var n=e.length-(f-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream>string_decoder",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/string_decoder/lib/string_decoder.js"}],[676,{_process:4307,"readable-stream":673,util:4743,xtend:4800},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){(function(f){(function(){var n=e("readable-stream").Transform,r=e("util").inherits,a=e("xtend");function i(e){n.call(this,e),this._destroyed=!1}function s(e,t,f){f(null,e)}function o(e){return function(t,f,n){return"function"==typeof t&&(n=f,f=t,t={}),"function"!=typeof f&&(f=s),"function"!=typeof n&&(n=null),e(t,f,n)}}r(i,n),i.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;f.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=o((function(e,t,f){var n=new i(e);return n._transform=t,f&&(n._flush=f),n})),t.exports.ctor=o((function(e,t,f){function n(t){if(!(this instanceof n))return new n(t);this.options=a(e,t),i.call(this,this.options)}return r(n,i),n.prototype._transform=t,f&&(n.prototype._flush=f),n})),t.exports.obj=o((function(e,t,f){var n=new i(a({objectMode:!0,highWaterMark:16},e));return n._transform=t,f&&(n._flush=f),n}))}).call(this)}).call(this,e("_process"))}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/through2/through2.js"}],[68,{"@metamask/browser-passworder":1185},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.encryptorFactory=void 0;var n=e("@metamask/browser-passworder");const r=e=>async(t,f,r,a)=>(0,n.encrypt)(t,f,r,a,{algorithm:"PBKDF2",params:{iterations:e}}),a=e=>async(t,f,r)=>(0,n.encryptWithDetail)(t,f,r,{algorithm:"PBKDF2",params:{iterations:e}}),i=e=>async(t,f,r,a)=>(0,n.keyFromPassword)(t,f,r,a??{algorithm:"PBKDF2",params:{iterations:e}}),s=e=>t=>(0,n.isVaultUpdated)(t,{algorithm:"PBKDF2",params:{iterations:e}});f.encryptorFactory=e=>({encrypt:r(e),encryptWithKey:n.encryptWithKey,encryptWithDetail:a(e),decrypt:n.decrypt,decryptWithKey:n.decryptWithKey,decryptWithDetail:n.decryptWithDetail,keyFromPassword:i(e),isVaultUpdated:s(e),importKey:n.importKey,exportKey:n.exportKey,generateSalt:n.generateSalt})}}},{package:"$root$",file:"app/scripts/lib/encryptor-factory.ts"}],[69,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;f.default=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/registry.js"}],[70,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;f.default=[{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"},{name:"value",type:"string"}],name:"setText",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"}],name:"text",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"indexedKey",type:"string"},{indexed:!1,name:"key",type:"string"}],name:"TextChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/resolver.js"}],[71,{"./contracts/registry":69,"./contracts/resolver":70,"@ensdomains/content-hash":389,"@metamask/ethjs-contract":1451,"@metamask/ethjs-query":1455,"eth-ens-namehash":3512},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=async function({provider:e,name:t}){const f=new r.default(e),c=n.default.hash(t),u=new a.default(f),l=Number.parseInt(await f.net_version(),10),b=function(e){switch(e){case 1:case 3:case 4:case 5:case 6:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(l);if(!b)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${l}"`);const h=u(s.default).at(b),p=(await h.resolver(c))[0];if(d(p))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const m=u(o.default).at(p),y=await m.supportsInterface("0xbc1c58d1"),g=await m.supportsInterface("0xd8389dc5");if(y[0]){const e=(await m.contenthash(c))[0];let t=i.default.decode(e);const f=i.default.getCodec(e);return"ipfs-ns"!==f&&"ipns-ns"!==f||(t=i.default.helpers.cidV0ToV1Base32(t)),{type:f,hash:t}}if(g[0]){const e=(await m.content(c))[0];if(d(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var n=c(e("eth-ens-namehash")),r=c(e("@metamask/ethjs-query")),a=c(e("@metamask/ethjs-contract")),i=c(e("@ensdomains/content-hash")),s=c(e("./contracts/registry")),o=c(e("./contracts/resolver"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/resolver.js"}],[72,{"../../../../shared/modules/fetch-with-timeout":4870,"./resolver":71,"base32-encode":3221,"base64-js":3222,"webextension-polyfill":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:f,getUseAddressBarEnsResolution:i}){const o=d.map((e=>`*://*.${e}/*`));return a.default.webRequest.onErrorOccurred.addListener(u,{urls:o,types:["main_frame"]}),{remove(){a.default.webRequest.onErrorOccurred.removeListener(u)}};async function u(o){const{tabId:u,url:l}=o;if(-1===u||"0x1"!==t())return;const{hostname:b,pathname:h,search:p,hash:m}=new URL(l),y=b.split("."),g=y[y.length-1];d.includes(g)&&async function({tabId:t,name:o,pathname:d,search:u,fragment:l}){const b=f(),h=i(),p=`https://app.ens.domains/name/${o}`;h&&b&&await a.default.tabs.update(t,{url:"loading.html"});let m=p;0;try{const{type:t,hash:f}=await(0,s.default)({provider:e,name:o});if("ipfs-ns"===t||"ipns-ns"===t){if(""===b)return void(m=null);const e=`https://${f}.${t.slice(0,4)}.${b}${d}${u||""}${l||""}`;try{200===(await c(e,{method:"HEAD"})).status&&(m=e)}catch(e){console.warn(e)}}else if("swarm-ns"===t)m=`https://swarm-gateways.net/bzz:/${f}${d}${u||""}${l||""}`;else if("onion"===t||"onion3"===t)m=`http://${f}.onion${d}${u||""}${l||""}`;else if("zeronet"===t)m=`http://127.0.0.1:43110/${f}${d}${u||""}${l||""}`;else if("skynet-ns"===t){const e=f.padEnd(f.length+4-f.length%4,"="),t=r.default.toByteArray(e),a={padding:!1};m=`https://${(0,n.default)(t,"RFC4648-HEX",a).toLowerCase()}.siasky.net${d}${u||""}${l||""}`}}catch(e){console.warn(e)}finally{m&&(h||!h&&m!==p)&&await a.default.tabs.update(t,{url:m})}}({tabId:u,name:b,pathname:h,search:p,fragment:m})}};var n=o(e("base32-encode")),r=o(e("base64-js")),a=o(e("webextension-polyfill")),i=o(e("../../../../shared/modules/fetch-with-timeout")),s=o(e("./resolver"));function o(e){return e&&e.__esModule?e:{default:e}}const c=(0,i.default)(),d=["eth"]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/setup.js"}],[75,{lodash:4164},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(e){return r((0,n.cloneDeep)(e),(e=>null===e?"null":typeof e))};var n=e("lodash");function r(e={},t){return Object.entries(e).forEach((([f,n])=>{e[f]="object"==typeof n&&null!==n?r(n,t):t(n)})),e}}}},{package:"$root$",file:"app/scripts/lib/getObjStructure.js"}],[76,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.hardwareKeyringBuilderFactory=function(e,t){const f=()=>new e({bridge:new t});return f.type=e.type,f}}}},{package:"$root$",file:"app/scripts/lib/hardware-keyring-builder-factory.ts"}],[8,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.PHISHING_WARNING_PAGE=f.PHISHING_STREAM=f.PHISHING_SAFELIST=f.METAMASK_PROVIDER=f.METAMASK_INPAGE=f.METAMASK_COOKIE_HANDLER=f.LEGACY_PUBLIC_CONFIG=f.LEGACY_PROVIDER=f.LEGACY_INPAGE=f.LEGACY_CONTENT_SCRIPT=f.CONTENT_SCRIPT=void 0;f.CONTENT_SCRIPT="metamask-contentscript",f.METAMASK_INPAGE="metamask-inpage",f.PHISHING_WARNING_PAGE="metamask-phishing-warning-page",f.METAMASK_COOKIE_HANDLER="metamask-cookie-handler",f.METAMASK_PROVIDER="metamask-provider",f.PHISHING_SAFELIST="metamask-phishing-safelist",f.PHISHING_STREAM="phishing",f.LEGACY_CONTENT_SCRIPT="contentscript",f.LEGACY_INPAGE="inpage",f.LEGACY_PROVIDER="provider",f.LEGACY_PUBLIC_CONFIG="publicConfig"}}},{package:"$root$",file:"app/scripts/constants/stream.ts"}],[80,{"../util":129,"json-rpc-engine":4013},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,n.createAsyncMiddleware)((async(t,f,n)=>{const{method:r,params:a}=t;if("eth_getTransactionCount"!==r)return void n();const[i,s]=a;"pending"===s?f.result=await e(i,t.networkClientId):n()}))},f.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,n.createAsyncMiddleware)((async(t,f,n)=>{const{method:a,params:i}=t;if("eth_getTransactionByHash"!==a)return void n();const[s]=i,o=e(s);o?f.result=(0,r.formatTxMetaForRpcResult)(o):n()}))};var n=e("json-rpc-engine"),r=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[81,{events:3629,loglevel:4170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=a(e("events")),r=a(e("loglevel"));function a(e){return e&&e.__esModule?e:{default:e}}class i extends n.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const f=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||f&&f.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const f of t)try{r.default.info(`Running migration ${f.version}...`);const t=await f.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==f.version)throw new Error("Migrator - Migration did not update version number correctly");e=t,r.default.info(`Migration ${f.version} complete`)}catch(t){const n=t.message;return t.message=`MetaMask Migration Error #${f.version}: ${n}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}f.default=i}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[84,{"../../../shared/constants/notifications":4832,"../platforms/extension":276,"@metamask/safe-event-emitter":1951},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=f.NOTIFICATION_MANAGER_EVENTS=void 0;var n=i(e("@metamask/safe-event-emitter")),r=i(e("../platforms/extension")),a=e("../../../shared/constants/notifications");function i(e){return e&&e.__esModule?e:{default:e}}const s=f.NOTIFICATION_MANAGER_EVENTS={POPUP_CLOSED:"onPopupClosed"};class o extends n.default{constructor(){super(),this.platform=new r.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const f=await this._getPopup(t);if(f)await this.platform.focusWindow(f.id);else{let e=0,t=0;try{const f=await this.platform.getLastFocusedWindow();t=f.top,e=Math.max(f.left+(f.width-a.NOTIFICATION_WIDTH),0)}catch(f){const{screenX:n,screenY:r,outerWidth:i}=window;t=Math.max(r,0),e=Math.max(n+(i-a.NOTIFICATION_WIDTH),0)}const f=await this.platform.openWindow({url:"notification.html",type:"popup",width:a.NOTIFICATION_WIDTH,height:a.NOTIFICATION_HEIGHT,left:e,top:t});f.left!==e&&"fullscreen"!==f.state&&await this.platform.updateWindowPosition(f.id,e,t),this._setCurrentPopupId(f.id),this._popupId=f.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(s.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}f.default=o}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[85,{"../../../../shared/constants/offscreen-communication":4833,"eth-lattice-keyring":3513},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.LatticeKeyringOffscreen=void 0;var n,r=(n=e("eth-lattice-keyring"))&&n.__esModule?n:{default:n},a=e("../../../../shared/constants/offscreen-communication");class i extends r.default{constructor(e={}){super(e)}async _getCreds(){try{const e=this.appName?this.appName:"Unknown",t=`${a.KnownOrigins.lattice}?keyring=${e}&forceLogin=true`;return await new Promise(((e,f)=>{chrome.runtime.sendMessage({target:a.OffscreenCommunicationTarget.latticeOffscreen,params:{url:t}},(t=>{t.error&&f(t.error),e(t.result)}))}))}catch(e){throw new Error(e)}}}f.LatticeKeyringOffscreen=i,function(e,t,f){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var f=e[Symbol.toPrimitive];if(f!==undefined){var n=f.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:f,enumerable:!0,configurable:!0,writable:!0}):e[t]=f}(i,"type",void 0),i.type=r.default.type}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/lattice-offscreen-keyring.ts"}],[86,{"../../../../shared/constants/offscreen-communication":4833},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.LedgerOffscreenBridge=void 0;var n=e("../../../../shared/constants/offscreen-communication");function r(e,t,f){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var f=e[Symbol.toPrimitive];if(f!==undefined){var n=f.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:f,enumerable:!0,configurable:!0,writable:!0}):e[t]=f,e}f.LedgerOffscreenBridge=class{constructor(){r(this,"isDeviceConnected",!1)}init(){return chrome.runtime.onMessage.addListener((e=>{e.target===n.OffscreenCommunicationTarget.extension&&e.event===n.OffscreenCommunicationEvents.ledgerDeviceConnect&&(this.isDeviceConnected=!0)})),Promise.resolve()}destroy(){return Promise.resolve()}getOptions(){return Promise.resolve({})}setOptions(){return Promise.resolve()}attemptMakeApp(){return new Promise(((e,t)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.makeApp},(f=>{f.success?e(!0):f.error?t(f.error):t(new Error("Unknown error occurred"))}))}))}updateTransportMethod(e){return new Promise(((t,f)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.updateTransport,params:{transportType:e}},(e=>{e.success?t(!0):f(new Error("Ledger transport could not be updated"))}))}))}getPublicKey(e){return new Promise(((t,f)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.getPublicKey,params:e},(e=>{e.success?t(e.payload):f(e.payload.error)}))}))}deviceSignTransaction(e){return new Promise(((t,f)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.signTransaction,params:e},(e=>{e.success?t(e.payload):f(e.payload.error)}))}))}deviceSignMessage(e){return new Promise(((t,f)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.signPersonalMessage,params:e},(e=>{e.success?t(e.payload):f(e.payload.error)}))}))}deviceSignTypedData(e){return new Promise(((t,f)=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.ledgerOffscreen,action:n.LedgerAction.signTypedData,params:e},(e=>{e.success?t(e.payload):f(e.payload.error)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/ledger-offscreen-bridge.ts"}],[87,{"../../../../shared/constants/offscreen-communication":4833},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.TrezorOffscreenBridge=void 0;var n=e("../../../../shared/constants/offscreen-communication");function r(e,t,f){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var f=e[Symbol.toPrimitive];if(f!==undefined){var n=f.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:f,enumerable:!0,configurable:!0,writable:!0}):e[t]=f,e}f.TrezorOffscreenBridge=class{constructor(){r(this,"model",void 0)}init(e){return chrome.runtime.onMessage.addListener((e=>{e.target===n.OffscreenCommunicationTarget.extension&&e.event===n.OffscreenCommunicationEvents.trezorDeviceConnect&&(this.model=e.payload)})),new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.init,params:e},(()=>{t()}))}))}dispose(){return new Promise((e=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.dispose},(()=>{e()}))}))}getPublicKey(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.getPublicKey,params:e},(e=>{t(e)}))}))}ethereumSignTransaction(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signTransaction,params:e},(e=>{t(e)}))}))}ethereumSignMessage(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signMessage,params:e},(e=>{t(e)}))}))}ethereumSignTypedData(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signTypedData,params:e},(e=>{t(e)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/trezor-offscreen-bridge.ts"}],[88,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){function n(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function r(e,t,f){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var f=e[Symbol.toPrimitive];if(f!==undefined){var n=f.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:f,enumerable:!0,configurable:!0,writable:!0}):e[t]=f,e}Object.defineProperty(f,"__esModule",{value:!0}),f.IndexedDBPPOMStorage=void 0;const a=async(e,t,f)=>{const n=await crypto.subtle.digest("SHA-256",t);if(Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")!==f)throw new Error(`Checksum mismatch for key ${e}`)};var i=new WeakSet;function s(e){return new Promise(((t,f)=>{const n=indexedDB.open(this.storeName,this.dbVersion);n.onerror=e=>{var t;f(new Error(`Failed to open database ${this.storeName}: ${null===(t=e.target)||void 0===t?void 0:t.error}`))},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:["name","chainId"]})},n.onsuccess=f=>{const n=f.target.result.transaction([this.storeName],e).objectStore(this.storeName);t(n)}}))}f.IndexedDBPPOMStorage=class{constructor(e,t){n(this,i),r(this,"storeName",void 0),r(this,"dbVersion",void 0),this.storeName=e,this.dbVersion=t}async objectStoreAction(e,t,f="readonly"){return new Promise(((n,r)=>{(function(e,t,f){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return f})(this,i,s).call(this,f).then((f=>{const a=f[e](t);a.onsuccess=async e=>{n(e)},a.onerror=t=>{var f;r(new Error(`Error in indexDB operation ${e}: ${null===(f=t.target)||void 0===f?void 0:f.error}`))}})).catch((e=>{r(e)}))}))}async read(e,t){var f;const n=null===(f=(await this.objectStoreAction("get",[e.name,e.chainId])).target)||void 0===f||null===(f=f.result)||void 0===f?void 0:f.data;return await a(e,n,t),n}async write(e,t,f){await a(e,t,f),await this.objectStoreAction("put",{...e,data:t},"readwrite")}async delete(e){await this.objectStoreAction("delete",[e.name,e.chainId],"readwrite")}async dir(){var e;return null===(e=(await this.objectStoreAction("getAllKeys")).target)||void 0===e?void 0:e.result.map((([e,t])=>({name:e,chainId:t})))}}}}},{package:"$root$",file:"app/scripts/lib/ppom/indexed-db-backend.ts"}],[89,{"../../../../shared/constants/app":4815,"../../../../shared/constants/security-provider":4837,"../../../../shared/constants/transaction":4845,"../../../../shared/lib/trace":4857,"../../../../ui/ducks/metamask/metamask":5759,"./ppom-util":90,"@metamask/controller-utils":1210},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.createPPOMMiddleware=function(e,t,f,u,l,b){return async(h,p,m)=>{try{var y;const p=null===(y=t.store.getState())||void 0===y?void 0:y.securityAlertsEnabled,{chainId:m}=(0,s.getProviderConfig)({metamask:f.state})??{};if(!m)return;const g=await(0,c.isChainSupported)(m);if(!p||!d.includes(h.method)||!g)return;const _=h.params[0];if("string"==typeof _){const{isSIWEMessage:e}=(0,n.detectSIWE)({data:_});if(e)return}else if(h.method===r.MESSAGE_TYPE.ETH_SEND_TRANSACTION){const{to:e}=_??{},t=l.listAccounts();if(t.some((({address:t})=>(null==t?void 0:t.toLowerCase())===(null==e?void 0:e.toLowerCase()))))return}const w=(0,c.generateSecurityAlertId)();(0,o.trace)({name:o.TraceName.PPOMValidation,parentContext:h.traceContext},(()=>(0,c.validateRequestWithPPOM)({ppomController:e,request:h,securityAlertId:w,chainId:m}).then((e=>{b(h.method,w,e)}))));const T={...i.LOADING_SECURITY_ALERT_RESPONSE,securityAlertId:w};a.SIGNING_METHODS.includes(h.method)&&u.addSignatureSecurityAlertResponse(T),h.securityAlertResponse=T}catch(e){h.securityAlertResponse=(0,c.handlePPOMError)(e,"Error createPPOMMiddleware: ")}finally{m()}}};var n=e("@metamask/controller-utils"),r=e("../../../../shared/constants/app"),a=e("../../../../shared/constants/transaction"),i=e("../../../../shared/constants/security-provider"),s=e("../../../../ui/ducks/metamask/metamask"),o=e("../../../../shared/lib/trace"),c=e("./ppom-util");const d=Object.freeze(["eth_sendRawTransaction","eth_sendTransaction",...a.SIGNING_METHODS])}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-middleware.ts"}],[9,{"@metamask/base-controller":1184},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.AccountOrderController=void 0;var n=e("@metamask/base-controller");const r={pinnedAccountList:[],hiddenAccountList:[]},a={pinnedAccountList:{persist:!0,anonymous:!0},hiddenAccountList:{persist:!0,anonymous:!0}};class i extends n.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:a,name:"AccountOrderController",state:{...r,...t}})}updateAccountsList(e){this.update((t=>(t.pinnedAccountList=e,t)))}updateHiddenAccountsList(e){this.update((t=>(t.hiddenAccountList=e,t)))}}f.AccountOrderController=i}}},{package:"$root$",file:"app/scripts/controllers/account-order.ts"}],[90,{"../../../../shared/constants/security-provider":4837,"../../../../shared/constants/transaction":4845,"./security-alerts-api":92,"@metamask/transaction-controller":2453,uuid:4744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.generateSecurityAlertId=function(){return(0,r.v4)()},f.handlePPOMError=u,f.isChainSupported=async function(e){let t=a.SECURITY_PROVIDER_SUPPORTED_CHAIN_IDS;try{(0,s.isSecurityAlertsAPIEnabled)()&&(t=await(0,s.getSecurityAlertsAPISupportedChainIds)())}catch(e){u(e,"Error fetching supported chains from security alerts API")}return t.includes(e)},f.updateSecurityAlertResponse=async function({appStateController:e,method:t,securityAlertId:f,securityAlertResponse:n,signatureController:r,transactionController:a}){const s=i.SIGNING_METHODS.includes(t),o=await async function(e,t,f,n){const r=i.SIGNING_METHODS.includes(t);for(;;){let t;if(t=r?Object.values(f.messages).find((t=>{var f;return(null===(f=t.securityAlertResponse)||void 0===f?void 0:f.securityAlertId)===e})):n.state.transactions.find((t=>{var f;return(null===(f=t.securityAlertResponse)||void 0===f?void 0:f.securityAlertId)===e})),t)return t;await new Promise((e=>setTimeout(e,100)))}}(f,t,r,a);s?e.addSignatureSecurityAlertResponse(n):a.updateSecurityAlertResponse(o.id,n)},f.validateRequestWithPPOM=async function({ppomController:e,request:t,securityAlertId:f,chainId:r}){try{const i=function(e){if(t=e,t.method!==c)return e;var t;const f=e.params[0],r=(0,n.normalizeTransactionParams)(f);return{...e,params:[r]}}(t),o=(0,s.isSecurityAlertsAPIEnabled)()?await async function(e,t,f){try{return{...await(0,s.validateWithSecurityAlertsAPI)(t,f),source:a.SecurityAlertSource.API}}catch(n){return u(n,"Error validating request with security alerts API"),await l(e,f,t)}}(e,r,i):await l(e,i,r);return{...o,securityAlertId:f}}catch(e){return u(e,"Error validating JSON RPC using PPOM: ")}};var n=e("@metamask/transaction-controller"),r=e("uuid"),a=e("../../../../shared/constants/security-provider"),i=e("../../../../shared/constants/transaction"),s=e("./security-alerts-api");const{sentry:o}=global,c="eth_sendTransaction",d={result_type:a.BlockaidResultType.Errored,reason:a.BlockaidReason.errored};function u(e,t){const f=function(e){if("object"==typeof e||"string"==typeof e)return e;return JSON.stringify(e)}(e),n=function(e){if(e instanceof Error)return`${e.name}: ${e.message}`;return JSON.stringify(e)}(e);return null==o||o.captureException(e),console.error(t,f),{...d,description:n}}async function l(e,t,f){return{...await e.usePPOM((e=>e.validateJsonRpc(t)),f),source:a.SecurityAlertSource.Local}}}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-util.ts"}],[91,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){let n;Object.defineProperty(f,"__esModule",{value:!0}),f.default=f.PPOM=void 0,f.initSync=function(e){if(n!==undefined)return n;const t=A();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const f=new WebAssembly.Instance(e,t);return C(f,e)},f.main=function(){n.main()};const r="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&r.decode();let a=null;function i(){return null!==a&&0!==a.byteLength||(a=new Uint8Array(n.memory.buffer)),a}function s(e,t){return e>>>=0,r.decode(i().subarray(e,e+t))}const o=new Array(128).fill(undefined);o.push(undefined,null,!0,!1);let c=o.length;function d(e){c===o.length&&o.push(o.length+1);const t=c;return c=o[t],o[t]=e,t}function u(e){return o[e]}function l(e){const t=u(e);return function(e){e<132||(o[e]=c,c=e)}(e),t}let b=0;const h="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},p="function"==typeof h.encodeInto?function(e,t){return h.encodeInto(e,t)}:function(e,t){const f=h.encode(e);return t.set(f),{read:e.length,written:f.length}};function m(e,t,f){if(f===undefined){const f=h.encode(e),n=t(f.length,1)>>>0;return i().subarray(n,n+f.length).set(f),b=f.length,n}let n=e.length,r=t(n,1)>>>0;const a=i();let s=0;for(;s<n;s++){const t=e.charCodeAt(s);if(t>127)break;a[r+s]=t}if(s!==n){0!==s&&(e=e.slice(s)),r=f(r,n,n=s+3*e.length,1)>>>0;const t=i().subarray(r+s,r+n);s+=p(e,t).written}return b=s,r}let y=null;function g(){return null!==y&&0!==y.byteLength||(y=new Int32Array(n.memory.buffer)),y}function _(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let f="[";t>0&&(f+=_(e[0]));for(let n=1;n<t;n++)f+=", "+_(e[n]);return f+="]",f}const f=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(!(f.length>1))return toString.call(e);if(n=f[1],"Object"==n)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:n}function w(e,t,f){n.wasm_bindgen__convert__closures__invoke1_mut(e,t,d(f))}function T(e,t){n._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__destroy(e,t)}let v=null;function E(e,t){const f=t(4*e.length,4)>>>0,r=(null!==v&&0!==v.byteLength||(v=new Uint32Array(n.memory.buffer)),v);for(let t=0;t<e.length;t++)r[f/4+t]=d(e[t]);return b=e.length,f}function k(e,t){try{return e.apply(this,t)}catch(e){n.__wbindgen_exn_store(d(e))}}class S{static __wrap(e){e>>>=0;const t=Object.create(S.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();n.__wbg_ppom_free(e)}static new(e,t){const f=E(t,n.__wbindgen_malloc),r=b;return l(n.ppom_new(d(e),f,r))}validateJsonRpc(e){return l(n.ppom_validateJsonRpc(this.__wbg_ptr,d(e)))}static version(){return l(n.ppom_version())}}function A(){const e={wbg:{}};return e.wbg.__wbg_buffer_085ec1f694018c4f=function(e){return d(u(e).buffer)},e.wbg.__wbg_call_01734de55d61e11d=function(){return k((function(e,t,f){return d(u(e).call(u(t),u(f)))}),arguments)},e.wbg.__wbg_call_4c92f6aec1e1d6e6=function(){return k((function(e,t,f,n){return d(u(e).call(u(t),u(f),u(n)))}),arguments)},e.wbg.__wbg_from_d7c216d4616bb368=function(e){return d(Array.from(u(e)))},e.wbg.__wbg_get_44be0491f933a435=function(e,t){return d(u(e)[t>>>0])},e.wbg.__wbg_length_72e2208bbc0efc61=function(e){return u(e).length},e.wbg.__wbg_length_d813e535247d427e=function(e){return u(e).length},e.wbg.__wbg_length_fff51ee6522a1a18=function(e){return u(e).length},e.wbg.__wbg_new_43f1b47c28813cbd=function(e,t){try{var f={a:e,b:t};const r=new Promise(((e,t)=>{const r=f.a;f.a=0;try{return function(e,t,f,r){n.wasm_bindgen__convert__closures__invoke2_mut(e,t,d(f),d(r))}(r,f.b,e,t)}finally{f.a=r}}));return d(r)}finally{f.a=f.b=0}},e.wbg.__wbg_new_8125e318e6245eed=function(e){return d(new Uint8Array(u(e)))},e.wbg.__wbg_parse_670c19d4e984792e=function(){return k((function(e,t){return d(JSON.parse(s(e,t)))}),arguments)},e.wbg.__wbg_ppom_new=function(e){return d(S.__wrap(e))},e.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){return d(Promise.resolve(u(e)))},e.wbg.__wbg_set_5cf90238115182c3=function(e,t,f){u(e).set(u(t),f>>>0)},e.wbg.__wbg_stringify_e25465938f3f611f=function(){return k((function(e){return d(JSON.stringify(u(e)))}),arguments)},e.wbg.__wbg_then_b2267541e2a73865=function(e,t,f){return d(u(e).then(u(t),u(f)))},e.wbg.__wbg_then_f7e06ee3c11698eb=function(e,t){return d(u(e).then(u(t)))},e.wbg.__wbindgen_cb_drop=function(e){const t=l(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},e.wbg.__wbindgen_closure_wrapper_wasm_bindgen__closure__Closure_T___wrap__breaks_if_inlined=function(e,t,f){const n=function(e,t,f,n){const r={a:e,b:t,cnt:1},a=(...e)=>{r.cnt++;const t=r.a;r.a=0;try{return n(t,r.b,...e)}finally{0==--r.cnt?f(t,r.b):r.a=t}};return a.original=r,a}(e,t,T,w);return d(n)},e.wbg.__wbindgen_debug_string=function(e,t){const f=m(_(u(t)),n.__wbindgen_malloc,n.__wbindgen_realloc),r=b;g()[e/4+1]=r,g()[e/4+0]=f},e.wbg.__wbindgen_error_new=function(e,t){return d(new Error(s(e,t)))},e.wbg.__wbindgen_is_undefined=function(e){return u(e)===undefined},e.wbg.__wbindgen_memory=function(){return d(n.memory)},e.wbg.__wbindgen_object_drop_ref=function(e){l(e)},e.wbg.__wbindgen_string_get=function(e,t){const f=u(t),r="string"==typeof f?f:undefined;var a,i=(a=r)===undefined||null===a?0:m(r,n.__wbindgen_malloc,n.__wbindgen_realloc),s=b;g()[e/4+1]=s,g()[e/4+0]=i},e.wbg.__wbindgen_string_new=function(e,t){return d(s(e,t))},e.wbg.__wbindgen_throw=function(e,t){throw new Error(s(e,t))},e}function C(e,t){return n=e.exports,P.__wbindgen_wasm_module=t,y=null,v=null,a=null,n.__wbindgen_start(),n}async function P(e){if(n!==undefined)return n;const t=A();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:f,module:r}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const f=await e.arrayBuffer();return await WebAssembly.instantiate(f,t)}{const f=await WebAssembly.instantiate(e,t);return f instanceof WebAssembly.Instance?{instance:f,module:e}:f}}(await e,t);return C(f,r)}f.PPOM=S;f.default=P}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom.js"}],[92,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.getSecurityAlertsAPISupportedChainIds=async function(){return a(r)},f.isSecurityAlertsAPIEnabled=function(){return"true"==="".toString()},f.validateWithSecurityAlertsAPI=async function(e,t){return a(`${n}/${e}`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})};const n="validate",r="supportedChains";async function a(e,t){const f=function(e){const t="http://localhost:3000";if(!t)throw new Error("Security alerts API URL is not set");return`${t}/${e}`}(e),n=await fetch(f,t);if(!n.ok)throw new Error(`Security alerts API request failed with status: ${n.status}`);return n.json()}}}},{package:"$root$",file:"app/scripts/lib/ppom/security-alerts-api.ts"}],[93,{"./handlers":99,"@metamask/permission-controller":1766,"@metamask/snaps-rpc-methods":2204,"@metamask/utils":2530,"eth-rpc-errors":3544},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.createMethodMiddleware=f.createLegacyMethodMiddleware=void 0;var n=e("@metamask/permission-controller"),r=e("@metamask/snaps-rpc-methods"),a=e("@metamask/utils"),i=e("eth-rpc-errors"),s=e("./handlers");const o=[...s.handlers,...n.permissionRpcMethods.handlers];f.createMethodMiddleware=c(o),f.createLegacyMethodMiddleware=c(s.legacyHandlers);function c(e){const t=e.reduce(((e,t)=>{for(const f of t.methodNames)e[f]=t;return e}),{}),f=new Set(e.flatMap((({hookNames:e})=>Object.getOwnPropertyNames(e))));return e=>{!function(e,t){const f=[];if(t.forEach((t=>{(0,a.hasProperty)(e,t)||f.push(t)})),f.length>0)throw new Error(`Missing expected hooks:\n\n${f.join("\n")}\n`);const n=Object.getOwnPropertyNames(e).filter((e=>!t.has(e)));if(n.length>0)throw new Error(`Received unexpected hooks:\n\n${n.join("\n")}\n`)}(e,f);return async(f,n,a,s)=>{const o=t[f.method];if(o){const{implementation:t,hookNames:c}=o;try{return await t(f,n,a,s,(0,r.selectHooks)(e,c))}catch(e){return s(e instanceof Error?e:i.ethErrors.rpc.internal({data:e}))}}return a()}}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[94,{"../../../../shared/constants/network":4831,"eth-rpc-errors":3544},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.createUnsupportedMethodMiddleware=function(){return async function(e,t,f,a){return r.UNSUPPORTED_RPC_METHODS.has(e.method)?a(n.ethErrors.rpc.methodNotSupported()):f()}};var n=e("eth-rpc-errors"),r=e("../../../../shared/constants/network")}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createUnsupportedMethodMiddleware.ts"}],[95,{"../../../../../shared/constants/app":4815,"./ethereum-chain-utils":97,"@metamask/controller-utils":1210,"@metamask/network-controller":1622,"eth-rpc-errors":3544,lodash:4164,"uri-js":4719},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=e("@metamask/controller-utils"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var f=d(t);if(f&&f.has(e))return f.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,f&&f.set(e,n),n}(e("uri-js")),a=e("@metamask/network-controller"),i=e("eth-rpc-errors"),s=e("lodash"),o=e("../../../../../shared/constants/app"),c=e("./ethereum-chain-utils");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,f=new WeakMap;return(d=function(e){return e?f:t})(e)}const u={methodNames:[o.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,f,o,{addNetwork:d,updateNetwork:u,getNetworkConfigurationByChainId:l,setActiveNetwork:b,requestUserApproval:h,startApprovalFlow:p,endApprovalFlow:m,getCurrentChainIdForDomain:y,getCaveat:g,requestPermittedChainsPermission:_,getChainPermissionsFeatureFlag:w}){let T;try{T=(0,c.validateAddEthereumChainParams)(e.params[0],o)}catch(e){return o(e)}const{chainId:v,chainName:E,firstValidBlockExplorerUrl:k,firstValidRPCUrl:S,ticker:A}=T,{origin:C}=e,P=y(C),M=l(P),I=l(v);if(I&&I.chainId===v&&I.nativeCurrency!==A)return o(i.ethErrors.rpc.invalidParams({message:`nativeCurrency.symbol does not match currency symbol for a network the user already has added with the same chainId. Received:\n${A}`}));let x,O=I,N=null==I?void 0:I.rpcEndpoints.findIndex((({url:e})=>r.equal(e,S))),R=k?null==I?void 0:I.blockExplorerUrls.findIndex((e=>r.equal(e,k))):undefined;if(!I||N!==I.defaultRpcEndpointIndex||k&&R!==I.defaultBlockExplorerUrlIndex){({id:x}=await p());try{if(await h({origin:C,type:n.ApprovalType.AddEthereumChain,requestData:{chainId:v,rpcPrefs:{blockExplorerUrl:k},chainName:E,rpcUrl:S,ticker:A}}),I){const e=(0,s.cloneDeep)(I);-1===N&&(e.rpcEndpoints=[...e.rpcEndpoints,{url:S,type:a.RpcEndpointType.Custom,name:E}],N=e.rpcEndpoints.length-1),e.defaultRpcEndpointIndex=N,k&&(-1===R&&(e.blockExplorerUrls=[...e.blockExplorerUrls,k],R=e.blockExplorerUrls.length-1),e.defaultBlockExplorerUrlIndex=R),O=await u(e.chainId,e,P===v?{replacementSelectedRpcEndpointIndex:e.defaultRpcEndpointIndex}:undefined)}else O=await d({blockExplorerUrls:k?[k]:[],defaultBlockExplorerUrlIndex:k?0:undefined,chainId:v,defaultRpcEndpointIndex:0,name:E,nativeCurrency:A,rpcEndpoints:[{url:S,name:E,type:a.RpcEndpointType.Custom}]})}catch(e){return m({id:x}),o(e)}}if(v!==P){const{networkClientId:e}=O.rpcEndpoints[O.defaultRpcEndpointIndex],f={toNetworkConfiguration:O,fromNetworkConfiguration:M};return(0,c.switchChain)(t,o,C,v,f,e,x,{getChainPermissionsFeatureFlag:w,setActiveNetwork:b,requestUserApproval:h,getCaveat:g,requestPermittedChainsPermission:_,endApprovalFlow:m})}x&&m({id:x});return t.result=null,o()},hookNames:{addNetwork:!0,updateNetwork:!0,getNetworkConfigurationByChainId:!0,setActiveNetwork:!0,requestUserApproval:!0,startApprovalFlow:!0,endApprovalFlow:!0,getCurrentChainIdForDomain:!0,getCaveat:!0,requestPermittedChainsPermission:!0,getChainPermissionsFeatureFlag:!0}};f.default=u}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[96,{"../../../../../shared/constants/app":4815},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,f,n,{getAccounts:r}){return t.result=await r(),n()},hookNames:{getAccounts:!0}};f.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.ts"}],[97,{"../../../../../shared/constants/app":4815,"../../../../../shared/constants/permissions":4835,"../../../../../shared/modules/network.utils":4876,"../../../controllers/permissions":25,"../../util":129,"@metamask/controller-utils":1210,"eth-rpc-errors":3544},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.switchChain=async function(e,t,f,a,s,c,d,{getChainPermissionsFeatureFlag:u,setActiveNetwork:l,endApprovalFlow:b,requestUserApproval:h,getCaveat:p,requestPermittedChainsPermission:m}){try{if(u()){const{value:e}=p({target:o.PermissionNames.permittedChains,caveatType:i.CaveatTypes.restrictNetworkSwitching})??{};e!==undefined&&e.includes(a)||await m([a])}else await h({origin:f,type:r.ApprovalType.SwitchEthereumChain,requestData:s});await l(c),e.result=null}catch(f){return f.code===n.errorCodes.provider.userRejectedRequest&&d?(e.result=null,t()):t(f)}finally{d&&b({id:d})}return t()},f.validateAddEthereumChainParams=function(e,t){if(!e||"object"!=typeof e)throw n.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e)}`});const{chainId:f,chainName:r,blockExplorerUrls:a,nativeCurrency:i,rpcUrls:o,...u}=e,l=Object.keys(u).filter((e=>!["iconUrls"].includes(e)));if(l.length>0)throw n.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${l}`});const b=d(f);if(!o||!Array.isArray(o)||0===o.length)throw n.ethErrors.rpc.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${o}`});const h=e=>{const t=(0,c.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname||"https:"===t.protocol)},p=o.find((e=>h(e))),m=Array.isArray(a)?a.find((e=>h(e))):null;if(!p)throw n.ethErrors.rpc.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${o}`});if("string"!=typeof r||!r)throw n.ethErrors.rpc.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${r}`});const y=r.length>100?r.substring(0,100):r;if(null!==i){if("object"!=typeof i||Array.isArray(i))throw n.ethErrors.rpc.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${i}`});if(18!==i.decimals)throw n.ethErrors.rpc.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${i.decimals}`});if(!i.symbol||"string"!=typeof i.symbol)throw n.ethErrors.rpc.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${i.symbol}`})}const g=(null==i?void 0:i.symbol)||s.UNKNOWN_TICKER_SYMBOL;if(g!==s.UNKNOWN_TICKER_SYMBOL&&("string"!=typeof g||g.length<1||g.length>6))throw n.ethErrors.rpc.invalidParams({message:`Expected 1-6 character string 'nativeCurrency.symbol'. Received:\n${g}`});return{chainId:b,chainName:y,firstValidBlockExplorerUrl:m,firstValidRPCUrl:p,ticker:g}},f.validateChainId=d,f.validateSwitchEthereumChainParams=function(e,t){var f;if(null===(f=e.params)||void 0===f||!f[0]||"object"!=typeof e.params[0])throw n.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`});const{chainId:r,...a}=e.params[0];if(Object.keys(a).length>0)throw n.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${Object.keys(a)}`});return d(r)};var n=e("eth-rpc-errors"),r=e("@metamask/controller-utils"),a=e("../../../../../shared/modules/network.utils"),i=e("../../../../../shared/constants/permissions"),s=e("../../../../../shared/constants/app"),o=e("../../../controllers/permissions"),c=e("../../util");function d(e){const t="string"==typeof e&&e.toLowerCase();if(!(0,a.isPrefixedFormattedHexString)(t))throw n.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${e}`});if(!(0,a.isSafeChainId)(parseInt(t,16)))throw n.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${t}": numerical value greater than max safe value. Received:\n${e}`});return t}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/ethereum-chain-utils.js"}],[98,{"../../../../../shared/constants/app":4815},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,f,n,{getProviderState:r}){return t.result={...await r(e.origin)},n()},hookNames:{getProviderState:!0}};f.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.js"}],[99,{"./add-ethereum-chain":95,"./eth-accounts":96,"./get-provider-state":98,"./log-web3-shim-usage":100,"./request-accounts":101,"./send-metadata":102,"./switch-ethereum-chain":103,"./watch-asset":104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.legacyHandlers=f.handlers=void 0;var n=u(e("./add-ethereum-chain")),r=u(e("./eth-accounts")),a=u(e("./get-provider-state")),i=u(e("./log-web3-shim-usage")),s=u(e("./request-accounts")),o=u(e("./send-metadata")),c=u(e("./switch-ethereum-chain")),d=u(e("./watch-asset"));function u(e){return e&&e.__esModule?e:{default:e}}f.handlers=[n.default,a.default,i.default,s.default,o.default,c.default,d.default],f.legacyHandlers=[r.default]}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/index.ts"}],[4,{"../../shared/constants/app":4815,"../../shared/constants/metametrics":4827,"../../shared/constants/offscreen-communication":4833,"../../shared/modules/browser-runtime.utils":4861,"../../shared/modules/mv3.utils":4875,"../../shared/modules/object.utils":4877,"../../test/e2e/background-socket/socket-background-to-mocha":4892,"../../test/e2e/default-fixture":4894,"../../test/stub/keyring-bridge":4900,"../../ui/selectors":6464,"./constants/marketing-site-whitelist":6,"./constants/sentry-state":7,"./first-time-state":36,"./fixtures/generate-wallet-state":37,"./lib/createStreamSink":65,"./lib/ens-ipfs/setup":72,"./lib/get-first-preferred-lang-code":74,"./lib/getObjStructure":75,"./lib/local-store":77,"./lib/migrator":81,"./lib/network-store":83,"./lib/notification-manager":84,"./lib/setup-initial-state-hooks":109,"./lib/util":129,"./metamask-controller":130,"./migrations":274,"./offscreen":275,"./platforms/extension":276,"@metamask/controller-utils":1210,"@metamask/notification-services-controller":1742,"@metamask/obs-store":1752,"@metamask/snaps-rpc-methods":2204,"@metamask/utils":2530,"debounce-stream":3461,"eth-rpc-errors":3544,events:3629,"extension-port-stream":3632,loglevel:4170,"readable-stream":4577,"webextension-polyfill":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,f){Object.defineProperty(f,"__esModule",{value:!0}),f.loadStateFromPersistence=we,f.setupController=Ee,f.statePersistenceEvents=void 0,e("./lib/setup-initial-state-hooks");var n=F(e("events")),r=e("readable-stream"),a=F(e("debounce-stream")),i=F(e("loglevel")),s=F(e("webextension-polyfill")),o=e("@metamask/obs-store"),c=e("@metamask/utils"),d=e("@metamask/controller-utils"),u=F(e("extension-port-stream")),l=e("eth-rpc-errors"),b=e("@metamask/snaps-rpc-methods"),h=e("@metamask/notification-services-controller"),p=e("../../shared/constants/app"),m=e("../../shared/constants/metametrics"),y=e("../../shared/modules/browser-runtime.utils"),g=e("../../shared/modules/mv3.utils"),_=e("../../shared/modules/object.utils"),w=(e("../../test/e2e/default-fixture"),e("../../test/e2e/background-socket/socket-background-to-mocha"),e("../../shared/constants/offscreen-communication"),e("../../test/stub/keyring-bridge")),T=e("../../ui/selectors"),v=F(e("./migrations")),E=F(e("./lib/migrator")),k=F(e("./platforms/extension")),S=F(e("./lib/local-store")),A=F(e("./lib/network-store")),C=e("./constants/sentry-state"),P=F(e("./lib/createStreamSink")),M=B(e("./lib/notification-manager")),I=B(e("./metamask-controller")),x=F(e("./first-time-state")),O=F(e("./lib/get-first-preferred-lang-code")),N=F(e("./lib/getObjStructure")),R=F(e("./lib/ens-ipfs/setup")),D=e("./lib/util"),L=(e("./fixtures/generate-wallet-state"),e("./offscreen")),j=e("./constants/marketing-site-whitelist");function U(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,f=new WeakMap;return(U=function(e){return e?f:t})(e)}function B(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var f=U(t);if(f&&f.has(e))return f.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,f&&f.set(e,n),n}function F(e){return e&&e.__esModule?e:{default:e}}const G="#0376C9",H="#D73847",q=9,K=!1,$=K?new A.default:new S.default;global.stateHooks.getMostRecentPersistedState=()=>$.mostRecentRetrievedState;const{sentry:W}=global;let Y={...x.default};const z={[p.ENVIRONMENT_TYPE_POPUP]:!0,[p.ENVIRONMENT_TYPE_NOTIFICATION]:!0,[p.ENVIRONMENT_TYPE_FULLSCREEN]:!0},V=["trezor-connect"];i.default.setLevel("info",!1);const J=new k.default,X=new M.default;let Q=0,Z=!1,ee=!1;const te={},fe={};let ne,re;const ae={};K&&(global.stateHooks.metamaskGetState=$.get.bind($));const ie=new URL("https://metamask.github.io/phishing-warning/v4.0.0/"),se=ie.toString(),oe=1e3,ce=f.statePersistenceEvents=new n.default,{promise:de,resolve:ue,reject:le}=(0,D.deferredPromise)(),be=async()=>{const e=await s.default.tabs.query({url:"<all_urls>",windowType:"normal"}).then((e=>((0,y.checkForLastErrorAndLog)(),e))).catch((()=>{(0,y.checkForLastErrorAndLog)()}));for(const t of e)s.default.tabs.sendMessage(t.id,{name:p.EXTENSION_MESSAGES.READY}).then((()=>{(0,y.checkForLastErrorAndLog)()})).catch((()=>{(0,y.checkForLastErrorAndLog)()}))};let he,pe,me;function ye(){const e=(new Date).toISOString();s.default.storage.session.set({timestamp:e})}async function ge(){try{const t=g.isManifestV3?(0,L.createOffscreen)():null,f=await we(),n=f.data,r=await(0,O.default)();let a;if(g.isManifestV3){var e;if(!1!==(null===(e=n.PreferencesController)||void 0===e?void 0:e.enableMV3TimestampSave)){const e=2e3;ye(),setInterval(ye,e)}const t=await s.default.storage.session.get(["isFirstMetaMaskControllerSetup"]);a=(null==t?void 0:t.isFirstMetaMaskControllerSetup)===undefined,await s.default.storage.session.set({isFirstMetaMaskControllerSetup:a})}Ee(n,r,K?{keyrings:{trezorBridge:w.FakeTrezorBridge,ledgerBridge:w.FakeLedgerBridge}}:{},a,f.meta,t),function(e){async function t(e,t){try{return await s.default.tabs.update(e,{url:t})}catch(e){return null==W?void 0:W.captureException(e)}}const f=!g.isManifestV3;s.default.webRequest.onBeforeRequest.addListener((n=>{if(n.tabId===s.default.tabs.TAB_ID_NONE)return{};const{completedOnboarding:r}=e.onboardingController.state;if(!r)return{};if(!e.preferencesController.store.getState().usePhishDetect)return{};if(n.initiator&&new URL(n.initiator).host===ie.host)return{};const{hostname:a,href:i,searchParams:o}=new URL(n.url);if(K&&o.has("IN_TEST_BYPASS_EARLY_PHISHING_DETECTION"))return{};e.phishingController.maybeUpdateState();const c=e.phishingController.test(n.url),d=e.phishingController.isBlockedRequest(n.url);if(!(null!=c&&c.result||d.result))return{};let u;u=null!=c&&c.result&&d.result?`${c.type} and ${d.type}`:null!=c&&c.result?c.type:d.type,e.metaMetricsController.trackEvent({event:m.MetaMetricsEventName.PhishingPageDisplayed,category:m.MetaMetricsEventCategory.Phishing,properties:{url:a,reason:u}});const l=new URLSearchParams({hostname:a,href:i}),b=new URL(se);b.hash=l.toString();const h=b.toString();return f?"sub_frame"===n.type?(t(n.tabId,h),{cancel:!0}):{redirectUrl:h}:(t(n.tabId,h),{})}),{types:["main_frame","sub_frame","xmlhttprequest"],urls:["http://*/*","https://*/*"]},f?["blocking"]:[])}(ne),g.isManifestV3||await async function(){let e;try{const t=new URL(se);let f,n;t.hash="#extensionStartup",e=window.document.createElement("iframe"),e.setAttribute("src",t.href),e.setAttribute("sandbox","allow-scripts allow-same-origin");const r=new Promise(((e,t)=>{f=e,n=t}));e.addEventListener("load",f),window.document.body.appendChild(e),setTimeout((()=>n(new _e)),oe),await r}catch(e){e instanceof _e?console.warn("Phishing warning page timeout; page not guaranteed to work offline."):console.error("Failed to initialize phishing warning page",e)}finally{e&&e.remove()}}(),await be(),i.default.info("MetaMask initialization complete."),ue()}catch(e){le(e)}}s.default.runtime.onConnect.addListener((async(...e)=>{await de,he(...e)})),s.default.runtime.onConnectExternal.addListener((async(...e)=>{var t;await de;null!==(t=e[0].sender.tab)&&void 0!==t&&t.id,pe(...e)}));class _e extends Error{constructor(){super("Timeout failed")}}async function we(){const e=new E.default({migrations:v.default,defaultVersion:null});if(e.on("error",console.warn),re=await $.get()||e.generateInitialState(Y),re&&!re.data&&(re=e.generateInitialState(Y),W.captureMessage("MetaMask - Empty vault found - unable to recover")),e.on("error",(e=>{const t=(0,N.default)(re);W.captureException(e,{extra:{vaultStructure:t}})})),re=await e.migrateData(re),!re)throw new Error("MetaMask - migrator returned undefined");if(!(0,c.isObject)(re.meta))throw new Error(`MetaMask - migrator metadata has invalid type '${typeof re.meta}'`);if("number"!=typeof re.meta.version)throw new Error(`MetaMask - migrator metadata version has invalid type '${typeof re.meta.version}'`);if(!(0,c.isObject)(re.data))throw new Error(`MetaMask - migrator data has invalid type '${typeof re.data}'`);return $.setMetadata(re.meta),$.set(re.data),re}function Te(e){var t;const{metaMetricsId:f}=ne.metaMetricsController.state;if(!(0,D.shouldEmitDappViewedEvent)(f))return;const n=ne.controllerMessenger.call("PermissionController:getPermissions",e),r=null==n||null===(t=n.eth_accounts)||void 0===t||null===(t=t.caveats[0])||void 0===t?void 0:t.value.length;if(!r)return;const a=ne.controllerMessenger.call("PreferencesController:getState"),i=Object.keys(a.identities).length;ne.metaMetricsController.trackEvent({event:m.MetaMetricsEventName.DappViewed,category:m.MetaMetricsEventCategory.InpageProvider,referrer:{url:e},properties:{is_first_visit:!1,number_of_accounts:i,number_of_accounts_connected:r}})}function ve(e){if(!e.sender||!e.sender.tab||!e.sender.url)return;const t=e.sender.tab.id,f=new URL(e.sender.url),{origin:n}=f;Object.keys(ae).includes(t)||(ae[t]=n);const r=ne.controllerMessenger.call("PermissionController:hasPermissions",n),a="New Tab"!==e.sender.tab.title;r&&a&&Te(n)}function Ee(e,t,f,n,c,y){var w;ne=new I.default({infuraProjectId:"b6bf7d3508c941499b10025c0776eaf8",showUserConfirmation:ke,initState:e,initLangCode:t,platform:J,notificationManager:X,browser:s.default,getRequestAccountTabIds:()=>fe,getOpenMetamaskTabsIds:()=>te,localStore:$,overrides:f,isFirstMetaMaskControllerSetup:n,currentMigrationVersion:c.version,featureFlags:{},offscreenPromise:y}),(0,R.default)({getCurrentChainId:()=>(0,T.getCurrentChainId)({metamask:ne.networkController.state}),getIpfsGateway:ne.preferencesController.getIpfsGateway.bind(ne.preferencesController),getUseAddressBarEnsResolution:()=>ne.preferencesController.store.getState().useAddressBarEnsResolution,provider:ne.provider}),(0,r.pipeline)((0,o.storeAsStream)(ne.store),(0,a.default)(1e3),(0,P.default)((async e=>{await $.set(e),ce.emit("state-persisted",e)})),(e=>{i.default.error("MetaMask - Persistence pipeline failed",e)})),w=ne,global.stateHooks.getSentryAppState=function(){const e=w.memStore.getState();return(0,_.maskObject)(e,C.SENTRY_BACKGROUND_STATE)};const v=()=>Q>0||Boolean(Object.keys(te).length)||Z,E=(e,t)=>{if(!1===e)ne.onClientClosed();else{if(t===p.ENVIRONMENT_TYPE_FULLSCREEN&&Boolean(Object.keys(te).length))return;ne.onEnvironmentTypeClosed(t)}};function k(e,t){return e>t?`${t}+`:String(e)}function S(){const e=A(),t=function(){try{const{isNotificationServicesEnabled:e,isFeatureAnnouncementsEnabled:t}=ne.notificationServicesController.state,f=Object.values(ne.notificationController.state.notifications).filter((e=>null===e.readDate)).length,n=t?ne.notificationServicesController.state.metamaskNotificationsList.filter((e=>!e.isRead&&e.type===h.NotificationServicesController.Constants.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT)).length:0,r=e?ne.notificationServicesController.state.metamaskNotificationsList.filter((e=>!e.isRead&&e.type!==h.NotificationServicesController.Constants.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT)).length:0;return f+n+r}catch(e){return console.error("Failed to get unread notifications count:",e),0}}();let f="",n=G;e?f=k(e,q):t>0&&(f=k(t,q),n=H);try{const e={text:f},t={color:n};g.isManifestV3?(s.default.action.setBadgeText(e),s.default.action.setBadgeBackgroundColor(t)):(s.default.browserAction.setBadgeText(e),s.default.browserAction.setBadgeBackgroundColor(t))}catch(e){console.error("Error updating browser badge:",e)}}function A(){try{let e=ne.appStateController.waitingForUnlock.length+ne.approvalController.getTotalApprovalCount();return ne.preferencesController.getUseRequestQueue()&&(e+=ne.queuedRequestController.state.queuedRequestCount),e}catch(e){return console.error("Failed to get pending approval count:",e),0}}he=async e=>{var t;const n=e.name;if(V.includes(e.name))return;let a=!1;const i=(0,D.getPlatform)(),o=null!==(t=e.sender)&&void 0!==t&&t.url?new URL(e.sender.url):null;if(a=i===p.PLATFORM_FIREFOX?z[n]:(null==o?void 0:o.origin)===`chrome-extension://${s.default.runtime.id}`,a){var c;const t=(null==f||null===(c=f.getPortStream)||void 0===c?void 0:c.call(f,e))||new u.default(e);if(ne.isClientOpen=!0,ne.setupTrustedCommunication(t,e.sender),n===p.ENVIRONMENT_TYPE_POPUP&&(Q+=1,(0,r.finished)(t,(()=>{Q-=1;const e=v();ne.isClientOpen=e,E(e,p.ENVIRONMENT_TYPE_POPUP)}))),n===p.ENVIRONMENT_TYPE_NOTIFICATION&&(Z=!0,(0,r.finished)(t,(()=>{Z=!1;const e=v();ne.isClientOpen=e,E(e,p.ENVIRONMENT_TYPE_NOTIFICATION)}))),n===p.ENVIRONMENT_TYPE_FULLSCREEN){const f=e.sender.tab.id;te[f]=!0,(0,r.finished)(t,(()=>{delete te[f];const e=v();ne.isClientOpen=e,E(e,p.ENVIRONMENT_TYPE_FULLSCREEN)}))}}else if(o&&o.origin===ie.origin&&o.pathname===ie.pathname){var d;const t=(null==f||null===(d=f.getPortStream)||void 0===d?void 0:d.call(f,e))||new u.default(e);ne.setupPhishingCommunication({connectionStream:t})}else{if(e.sender&&e.sender.tab&&e.sender.url){const t=e.sender.tab.id,f=new URL(e.sender.url),{origin:n}=f;ve(e),e.onMessage.addListener((e=>{e.data&&e.data.method===p.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS&&(fe[n]=t)}))}if(o&&j.COOKIE_ID_MARKETING_WHITELIST_ORIGINS.some((e=>e===o.origin))){var l;const t=(null==f||null===(l=f.getPortStream)||void 0===l?void 0:l.call(f,e))||new u.default(e);ne.setUpCookieHandlerCommunication({connectionStream:t})}pe(e)}},pe=e=>{var t;const n=(null==f||null===(t=f.getPortStream)||void 0===t?void 0:t.call(f,e))||new u.default(e);ne.setupUntrustedCommunicationEip1193({connectionStream:n,sender:e.sender})},me=async e=>{var t;if(V.includes(e.name))return;e.sender&&e.sender.tab&&e.sender.url&&ve(e);const n=(null==f||null===(t=f.getPortStream)||void 0===t?void 0:t.call(f,e))||new u.default(e);ne.setupUntrustedCommunicationCaip({connectionStream:n,sender:e.sender})},null!=f&&f.registerConnectListeners&&f.registerConnectListeners(he,pe),S(),ne.decryptMessageController.hub.on(I.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,S),ne.encryptionPublicKeyController.hub.on(I.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,S),ne.signatureController.hub.on(I.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,S),ne.appStateController.on(I.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,S),ne.controllerMessenger.subscribe(I.METAMASK_CONTROLLER_EVENTS.APPROVAL_STATE_CHANGE,S),ne.controllerMessenger.subscribe(I.METAMASK_CONTROLLER_EVENTS.QUEUED_REQUEST_STATE_CHANGE,S),ne.controllerMessenger.subscribe(I.METAMASK_CONTROLLER_EVENTS.METAMASK_NOTIFICATIONS_LIST_UPDATED,S),ne.controllerMessenger.subscribe(I.METAMASK_CONTROLLER_EVENTS.METAMASK_NOTIFICATIONS_MARK_AS_READ,S),ne.controllerMessenger.subscribe(I.METAMASK_CONTROLLER_EVENTS.NOTIFICATIONS_STATE_CHANGE,S),X.on(M.NOTIFICATION_MANAGER_EVENTS.POPUP_CLOSED,(({automaticallyClosed:e})=>{e?A()>0&&ke():(ne.signatureController.rejectUnapproved(m.REJECT_NOTIFICATION_CLOSE_SIG),ne.decryptMessageController.rejectUnapproved(m.REJECT_NOTIFICATION_CLOSE),ne.encryptionPublicKeyController.rejectUnapproved(m.REJECT_NOTIFICATION_CLOSE),Object.values(ne.approvalController.state.pendingApprovals).forEach((({id:e,type:t})=>{switch(t){case d.ApprovalType.SnapDialogAlert:case d.ApprovalType.SnapDialogPrompt:case b.DIALOG_APPROVAL_TYPES.default:ne.approvalController.accept(e,null);break;case d.ApprovalType.SnapDialogConfirmation:case p.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation:case p.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval:case p.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect:ne.approvalController.accept(e,!1);break;default:ne.approvalController.reject(e,l.ethErrors.provider.userRejectedRequest())}}))),S()})),Object.values(ne.snapController.state.snaps).some((e=>!e.preinstalled))&&ne.snapController.updateBlockedSnaps()}async function ke(){const e=await J.getActiveTabs(),t=Boolean(e.find((e=>te[e.id]))),f=e.length>0&&e[0].extData&&e[0].extData.indexOf("vivaldi_tab")>-1;if(!ee&&(f||0===Q)&&!t){ee=!0;try{const e=ne.appStateController.getCurrentPopupId();await X.showPopup((e=>ne.appStateController.setCurrentPopupId(e)),e)}finally{ee=!1}}}const Se=()=>{if(ne)return ne.metaMetricsController.updateTraits({[m.MetaMetricsUserTrait.InstallDateExt]:(new Date).toISOString().split("T")[0]}),void ne.metaMetricsController.addEventBeforeMetricsOptIn({category:m.MetaMetricsEventCategory.App,event:m.MetaMetricsEventName.AppInstalled,properties:{}});setTimeout((()=>{Se()}),500)};async function Ae(){Boolean(await $.get())||(Se(),J.openExtensionInBrowser()),s.default.tabs.onActivated.addListener((e=>{if(ne){const{tabId:t}=e,f=ae[t];f&&ne.permissionController.state.subjects[f]!==undefined&&Te(f)}}))}(async function(){await Ae();try{await ge(),$.cleanUpMostRecentRetrievedState()}catch(e){i.default.error(e)}})()}}},{package:"$root$",file:"app/scripts/background.js"}]],[4],{});