LavaPack.loadBundle([[6469,{".":6464,"../../shared/constants/multichain/assets":4829,"../../shared/constants/multichain/networks":4830,"../../shared/constants/network":4831,"../../shared/modules/Numeric":4860,"../ducks/metamask/metamask":5759,"@metamask/keyring-api":1516,"@metamask/utils":2530,"@reduxjs/toolkit":2594,"prop-types":4312},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkPropType=n.InternalAccountPropType=void 0,n.getMultichainBalances=A,n.getMultichainCoinRates=void 0,n.getMultichainConversionRate=function(e,t){var n;const{ticker:r}=S(e,t);return T(e,t)?(0,d.getConversionRate)(e):null===(n=N(e))||void 0===n||null===(n=n[r.toLowerCase()])||void 0===n?void 0:n.conversionRate},n.getMultichainCurrencyImage=E,n.getMultichainCurrentChainId=function(e){const{chainId:t}=S(e);return t},n.getMultichainCurrentCurrency=function(e){const t=(0,p.getCurrentCurrency)(e);if(T(e))return t;return t&&"usd"===t.toLowerCase()?"usd":S(e).ticker},n.getMultichainCurrentNetwork=function(e){return S(e)},n.getMultichainDefaultToken=h,n.getMultichainIsBitcoin=function(e,t){const n=T(e,t),{symbol:r}=h(e,t);return!n&&"BTC"===r},n.getMultichainIsEvm=T,n.getMultichainIsMainnet=y,n.getMultichainIsTestnet=_,n.getMultichainNativeCurrency=function(e,t){return T(e,t)?(0,d.getNativeCurrency)(e):S(e,t).ticker},n.getMultichainNativeCurrencyImage=function(e,t){return E(e,t)},n.getMultichainNetwork=m,n.getMultichainNetworkProviders=f,n.getMultichainProviderConfig=S,n.getMultichainSelectedAccountCachedBalance=w,n.getMultichainSelectedAccountCachedBalanceIsZero=void 0,n.getMultichainShouldShowFiat=function(e,t){const n=t??(0,p.getSelectedInternalAccount)(e),r=_(e,n),a=!r;return T(e,n)?(0,p.getShouldShowFiat)(e):a||r&&(0,p.getShowFiatInTestnets)(e)};var r,a=(r=e("prop-types"))&&r.__esModule?r:{default:r},o=e("@metamask/keyring-api"),s=e("@metamask/utils"),i=e("@reduxjs/toolkit"),c=e("../../shared/modules/Numeric"),u=e("../../shared/constants/multichain/networks"),d=e("../ducks/metamask/metamask"),l=e("../../shared/constants/multichain/assets"),g=e("../../shared/constants/network"),p=e(".");n.MultichainNetworkPropType=a.default.shape({nickname:a.default.string.isRequired,isEvmNetwork:a.default.bool.isRequired,chainId:a.default.string,network:a.default.oneOfType([a.default.shape({rpcUrl:a.default.string,type:a.default.string.isRequired,chainId:a.default.string.isRequired,ticker:a.default.string.isRequired,rpcPrefs:a.default.shape({blockExplorerUrl:a.default.string,imageUrl:a.default.string}),nickname:a.default.string,id:a.default.string}),a.default.shape({chainId:a.default.string.isRequired,ticker:a.default.string.isRequired,rpcPrefs:a.default.shape({blockExplorerUrl:a.default.string,imageUrl:a.default.string})})]).isRequired}),n.InternalAccountPropType=a.default.shape({id:a.default.string.isRequired,address:a.default.string.isRequired,metadata:a.default.shape({name:a.default.string.isRequired,snap:a.default.shape({id:a.default.string.isRequired,name:a.default.string,enabled:a.default.bool}),keyring:a.default.shape({type:a.default.string.isRequired}).isRequired}).isRequired,type:a.default.string.isRequired});function f(e){return Object.values(u.MULTICHAIN_PROVIDER_CONFIGS)}function m(e,t){if(T(e,t)){var n;const t=(0,p.getCurrentChainId)(e),r=(0,d.getProviderConfig)(e),a=t;r.rpcPrefs={...r.rpcPrefs,imageUrl:g.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[a]};return{nickname:(null===(n=(0,p.getNetworkConfigurationsByChainId)(e)[t])||void 0===n?void 0:n.name)??r.rpcUrl,isEvmNetwork:!0,chainId:`${s.KnownCaipNamespace.Eip155}:${Number(t)}`,network:r}}const r=t??(0,p.getSelectedInternalAccount)(e),a=f().find((e=>e.isAddressCompatible(r.address)));if(!a)throw new Error("Could not find non-EVM provider for the current configuration. This should never happen.");return{nickname:a.nickname,isEvmNetwork:!1,chainId:null==a?void 0:a.chainId,network:a}}function T(e,t){const n=(0,d.getCompletedOnboarding)(e),r=t??(0,p.getMaybeSelectedInternalAccount)(e);return!n||!r||(0,o.isEvmAccountType)(r.type)}function S(e,t){return m(e,t).network}function E(e,t){var n;if(T(e,t))return(0,p.getNativeCurrencyImage)(e);return null===(n=S(e,t).rpcPrefs)||void 0===n?void 0:n.imageUrl}function h(e,t){var n;return{symbol:T(e,t)?(null===(n=(0,d.getProviderConfig)(e))||void 0===n?void 0:n.ticker)??"ETH":S(e,t).ticker}}function y(e,t){const n=S(e,t??(0,p.getSelectedInternalAccount)(e));return T(e,t)?(0,p.getIsMainnet)(e):n.chainId===u.MultichainNetworks.BITCOIN}function _(e,t){const n=S(e,t??(0,p.getSelectedInternalAccount)(e));return T(e,t)?g.TEST_NETWORK_IDS.includes(n.chainId):n.chainId===u.MultichainNetworks.BITCOIN_TESTNET}function A(e){return e.metamask.balances}const N=e=>e.metamask.rates;function w(e){return T(e)?(0,p.getSelectedAccountCachedBalance)(e):function(e){var t;const n=A(e),r=(0,p.getSelectedInternalAccount)(e),a=y(e)?l.MultichainNativeAssets.BITCOIN:l.MultichainNativeAssets.BITCOIN_TESTNET;return null==n||null===(t=n[r.id])||void 0===t||null===(t=t[a])||void 0===t?void 0:t.amount}(e)}n.getMultichainCoinRates=N;n.getMultichainSelectedAccountCachedBalanceIsZero=(0,i.createSelector)([T,w],((e,t)=>{const n=e?16:10;return new c.Numeric(t,n).isZero()}))}}},{package:"$root$",file:"ui/selectors/multichain.ts"}],[647,{"./Bytes":628,"./CryptoAccount":629,"./CryptoCoinInfo":630,"./CryptoECKey":631,"./CryptoHDKey":632,"./CryptoKeypath":633,"./CryptoOutput":634,"./CryptoPSBT":635,"./Decoder":636,"./MultiKey":637,"./PathComponent":638,"./RegistryItem":639,"./RegistryType":640,"./ScriptExpression":641,"./errors":642,"./extended/CryptoMultiAccounts":643,"./extended/DerivationSchema":644,"./extended/KeyDerivation":645,"./extended/QRHardwareCall":646,"./lib":650,"./patchCBOR":651,"./types":652,"./utils":653,"buffer/":3326,tslib:4698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.extend=n.PathComponent=n.ScriptExpressions=n.MultiKey=n.CryptoPSBT=n.CryptoOutput=n.CryptoECKey=n.CryptoCoinInfoNetwork=n.CryptoCoinInfoType=n.CryptoCoinInfo=n.CryptoKeypath=n.CryptoMultiAccounts=n.CryptoHDKey=n.CryptoAccount=n.Bytes=n.URRegistryDecoder=n.DataItem=void 0;const r=e("tslib");e("./patchCBOR");const a=e("buffer/");Object.defineProperty(n,"Buffer",{enumerable:!0,get:function(){return a.Buffer}});const o=e("./CryptoHDKey");Object.defineProperty(n,"CryptoHDKey",{enumerable:!0,get:function(){return o.CryptoHDKey}});const s=e("./CryptoKeypath");Object.defineProperty(n,"CryptoKeypath",{enumerable:!0,get:function(){return s.CryptoKeypath}});const i=e("./CryptoCoinInfo");Object.defineProperty(n,"CryptoCoinInfo",{enumerable:!0,get:function(){return i.CryptoCoinInfo}}),Object.defineProperty(n,"CryptoCoinInfoType",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(n,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return i.Network}});const c=e("./CryptoECKey");Object.defineProperty(n,"CryptoECKey",{enumerable:!0,get:function(){return c.CryptoECKey}});const u=e("./Bytes");Object.defineProperty(n,"Bytes",{enumerable:!0,get:function(){return u.Bytes}});const d=e("./CryptoOutput");Object.defineProperty(n,"CryptoOutput",{enumerable:!0,get:function(){return d.CryptoOutput}});const l=e("./CryptoPSBT");Object.defineProperty(n,"CryptoPSBT",{enumerable:!0,get:function(){return l.CryptoPSBT}});const g=e("./CryptoAccount");Object.defineProperty(n,"CryptoAccount",{enumerable:!0,get:function(){return g.CryptoAccount}});const p=e("./Decoder");Object.defineProperty(n,"URRegistryDecoder",{enumerable:!0,get:function(){return p.URRegistryDecoder}});const f=e("./MultiKey");Object.defineProperty(n,"MultiKey",{enumerable:!0,get:function(){return f.MultiKey}});const m=e("./ScriptExpression");Object.defineProperty(n,"ScriptExpressions",{enumerable:!0,get:function(){return m.ScriptExpressions}});const T=e("./PathComponent");Object.defineProperty(n,"PathComponent",{enumerable:!0,get:function(){return T.PathComponent}});const S=e("./RegistryItem"),E=e("./RegistryType"),h=e("./lib");var y=e("./lib");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return y.DataItem}});const _=e("./utils"),A=e("./extended/CryptoMultiAccounts");Object.defineProperty(n,"CryptoMultiAccounts",{enumerable:!0,get:function(){return A.CryptoMultiAccounts}});const N={URRegistryDecoder:p.URRegistryDecoder,Bytes:u.Bytes,CryptoAccount:g.CryptoAccount,CryptoHDKey:o.CryptoHDKey,CryptoMultiAccounts:A.CryptoMultiAccounts,CryptoKeypath:s.CryptoKeypath,CryptoCoinInfo:i.CryptoCoinInfo,CryptoCoinInfoType:i.Type,CryptoCoinInfoNetwork:i.Network,CryptoECKey:c.CryptoECKey,CryptoOutput:d.CryptoOutput,CryptoPSBT:l.CryptoPSBT,MultiKey:f.MultiKey,ScriptExpressions:m.ScriptExpressions,PathComponent:T.PathComponent},w={addReader:h.addReader,addSemanticDecode:h.addSemanticDecode,addSemanticEncode:h.addSemanticEncode,addWriter:h.addWriter,patchTags:_.patchTags},k={RegistryTypes:E.RegistryTypes,RegistryItem:S.RegistryItem,RegistryType:E.RegistryType,decodeToDataItem:h.decodeToDataItem,encodeDataItem:h.encodeDataItem,cbor:w};n.extend=k,(0,r.__exportStar)(e("./errors"),n),(0,r.__exportStar)(e("./Decoder"),n),(0,r.__exportStar)(e("./lib"),n),(0,r.__exportStar)(e("./CryptoAccount"),n),(0,r.__exportStar)(e("./CryptoPSBT"),n),(0,r.__exportStar)(e("./CryptoHDKey"),n),(0,r.__exportStar)(e("./extended/CryptoMultiAccounts"),n),(0,r.__exportStar)(e("./extended/QRHardwareCall"),n),(0,r.__exportStar)(e("./extended/KeyDerivation"),n),(0,r.__exportStar)(e("./extended/DerivationSchema"),n),(0,r.__exportStar)(e("./CryptoOutput"),n),(0,r.__exportStar)(e("./CryptoCoinInfo"),n),(0,r.__exportStar)(e("./CryptoECKey"),n),(0,r.__exportStar)(e("./MultiKey"),n),(0,r.__exportStar)(e("./CryptoKeypath"),n),(0,r.__exportStar)(e("./patchCBOR"),n),(0,r.__exportStar)(e("./PathComponent"),n),(0,r.__exportStar)(e("./RegistryItem"),n),(0,r.__exportStar)(e("./RegistryType"),n),(0,r.__exportStar)(e("./types"),n),(0,r.__exportStar)(e("./utils"),n),n.default=N}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/index.js"}],[6471,{".":6464,"../../shared/constants/permissions":4835,"./approvals":6460,"./util":6475,"@metamask/controller-utils":1210,"@metamask/keyring-api":1516,"@metamask/snaps-rpc-methods":2204},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.activeTabHasPermissions=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r;return Boolean(Object.keys((null===(t=a[n.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},n.getAccountToConnectToActiveTab=function(e){const t=(0,u.getSelectedInternalAccount)(e),n=g(e),{metamask:{internalAccounts:{accounts:r}}}=e,a=Object.keys(r).length;if(n.length&&n.length!==a&&-1===n.findIndex((e=>e===t.address)))return(0,u.getInternalAccount)(e,t.id);return undefined},n.getAddressConnectedSubjectMap=function(e){const t=m(e),n=f(e),r={};return Object.keys(n).forEach((e=>{const{iconUrl:a,name:o}=t[e]||{};n[e].forEach((t=>{const n=o||e;r[t]=r[t]?{...r[t],[e]:{iconUrl:a,name:n}}:{[e]:{iconUrl:a,name:n}}}))})),r},n.getConnectedSubjectsForAllAddresses=void 0,n.getConnectedSubjectsForSelectedAddress=function(e){const t=(0,u.getSelectedInternalAccount)(e),n=d(e),r=m(e),a=[];return Object.entries(n).forEach((([e,n])=>{if(!T(n).includes(t.address))return;const{extensionId:o,name:s,iconUrl:i}=r[e]||{};a.push({extensionId:o,origin:e,name:s,iconUrl:i})})),a},n.getFirstPermissionRequest=function(e){const t=y(e);return t&&t[0]?t[0]:null},n.getFirstSnapInstallOrUpdateRequest=function(e){var t;return(null===(t=h(e))||void 0===t?void 0:t[0])??null},n.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,n)=>(t[n].eth_accounts&&(e[n]=JSON.parse(JSON.stringify(t[n].eth_accounts))),e)),{})},n.getOrderedConnectedAccountsForActiveTab=function(e){var t;const{activeTab:n,metamask:{permissionHistory:r}}=e,a=null===(t=r[n.origin])||void 0===t||null===(t=t.eth_accounts)||void 0===t?void 0:t.accounts,s=(0,u.getMetaMaskAccountsOrdered)(e),i=g(e);return s.filter((e=>i.includes(e.address))).filter((e=>(0,o.isEvmAccountType)(e.type))).map((e=>({...e,metadata:{...e.metadata,lastActive:null==a?void 0:a[e.address]}}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getOrderedConnectedAccountsForConnectedDapp=function(e,t){var n;const{metamask:{permissionHistory:r}}=e,a=null===(n=r[t.origin])||void 0===n||null===(n=n.eth_accounts)||void 0===n?void 0:n.accounts,s=(0,u.getMetaMaskAccountsOrdered)(e),i=p(e,t);return s.filter((e=>i.includes(e.address))).filter((e=>(0,o.isEvmAccountType)(e.type))).map((e=>({...e,metadata:{...e.metadata,lastActive:null==a?void 0:a[e.address]}}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getPermissionSubjects=d,n.getPermissionSubjectsDeepEqual=void 0,n.getPermissions=function(e,t){var n;return null===(n=d(e)[t])||void 0===n?void 0:n.permissions},n.getPermissionsForActiveTab=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r,o=(null===(t=a[n.origin])||void 0===t?void 0:t.permissions)??{};return Object.keys(o).map((e=>({key:e,value:o[e]})))},n.getPermissionsRequests=y,n.getPermittedAccounts=l,n.getPermittedAccountsByOrigin=f,n.getPermittedAccountsForCurrentTab=g,n.getPermittedAccountsForSelectedTab=p,n.getRequestState=function(e,t){var n;return null===(n=e.metamask.pendingApprovals[t])||void 0===n?void 0:n.requestState},n.getRequestType=function(e,t){var n;return null===(n=e.metamask.pendingApprovals[t])||void 0===n?void 0:n.type},n.getSnapInstallOrUpdateRequests=h,n.getSubjectMetadata=m,n.getSubjectMetadataDeepEqual=void 0,n.getSubjectsWithPermission=function(e,t){const n=d(e),r=[];return Object.entries(n).forEach((([n,{permissions:a}])=>{if(a[t]){const{extensionId:t,name:a,iconUrl:o}=(0,u.getTargetSubjectMetadata)(e,n)||{};r.push({extensionId:t,origin:n,name:a,iconUrl:o})}})),r},n.getSubjectsWithSnapPermission=function(e,t){const n=d(e);return Object.entries(n).filter((([e,{permissions:n}])=>{var r;return null===(r=n[a.WALLET_SNAP_PERMISSION_KEY])||void 0===r?void 0:r.caveats[0].value[t]})).map((([t,n])=>{const{extensionId:r,name:a,iconUrl:o}=(0,u.getTargetSubjectMetadata)(e,t)||{};return{extensionId:r,origin:t,name:a,iconUrl:o}}))},n.isAccountConnectedToCurrentTab=void 0;var r=e("@metamask/controller-utils"),a=e("@metamask/snaps-rpc-methods"),o=e("@metamask/keyring-api"),s=e("../../shared/constants/permissions"),i=e("./approvals"),c=e("./util"),u=e(".");n.getPermissionSubjectsDeepEqual=(0,c.createDeepEqualSelector)((e=>e.metamask.subjects||{}),(e=>e)),n.getSubjectMetadataDeepEqual=(0,c.createDeepEqualSelector)((e=>e.metamask.subjectMetadata),(e=>e));function d(e){return e.metamask.subjects||{}}function l(e,t){return E(S(function(e,t){var n;return t&&(null===(n=e.metamask.subjects)||void 0===n?void 0:n[t])}(e,t)))}function g(e){return l(e,(0,u.getOriginOfCurrentTab)(e))}function p(e,t){return l(e,t)}function f(e){const t=d(e);return Object.keys(t).reduce(((e,n)=>{const r=T(t[n]);return r.length>0&&(e[n]=r),e}),{})}function m(e){return e.metamask.subjectMetadata}n.getConnectedSubjectsForAllAddresses=(0,c.createDeepEqualSelector)(d,m,((e,t)=>{const n={};return Object.entries(e).forEach((([e,r])=>{T(r).forEach((r=>{n[r]||(n[r]=[]);const a=t[e];n[r].push({origin:e,...a})}))})),n}));n.isAccountConnectedToCurrentTab=(0,c.createDeepEqualSelector)(g,((e,t)=>t),((e,t)=>e.some((e=>e===t))));function T(e){return E(S(e))}function S(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t.eth_accounts)||{}}function E(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===s.CaveatTypes.restrictReturnedAccounts))}(e);return t&&Array.isArray(t.value)?t.value:[]}function h(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_installSnap"===e||"wallet_updateSnap"===e||"wallet_installSnapResult"===e)).map((({requestData:e})=>e))}function y(e){var t;return null===(t=(0,i.getApprovalRequestsByType)(e,r.ApprovalType.WalletRequestPermissions))||void 0===t?void 0:t.map((({requestData:e})=>e))}}}},{package:"$root$",file:"ui/selectors/permissions.js"}],[6472,{"../../app/scripts/controllers/bridge/types":15,"../../app/scripts/lib/util":129,"../../shared/constants/app":4815,"../../shared/constants/bridge":4816,"../../shared/constants/hardware-wallets":4823,"../../shared/constants/keyring":4824,"../../shared/constants/labels":4825,"../../shared/constants/multichain/assets":4829,"../../shared/constants/network":4831,"../../shared/constants/swaps":4841,"../../shared/constants/terms":4842,"../../shared/constants/time":4843,"../../shared/constants/tokens":4844,"../../shared/modules/conversion.utils":4865,"../../shared/modules/selectors":4883,"../../shared/modules/string-utils":4886,"../../shared/modules/transaction.utils":4888,"../../shared/notifications":4890,"../ducks/app/app":5748,"../ducks/metamask/metamask":5759,"../helpers/constants/design-system":5771,"../helpers/constants/privacy-policy":5776,"../helpers/constants/survey":5782,"../helpers/utils/util":5819,"../pages/confirmations/confirmation/templates":6147,"./multichain":6469,"./permissions":6471,"./transactions":6474,"./util":6475,"@metamask/controller-utils":1210,"@metamask/keyring-api":1516,"@metamask/name-controller":1587,"@metamask/network-controller":1622,"@metamask/permission-controller":1766,"@metamask/snaps-utils":2384,"@metamask/transaction-controller":2453,lodash:4164,reselect:4587,semver:4627},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.accountSupportsSmartTx=function(e){const t=Y(e);return Boolean("snap"!==t)},n.accountsWithSendEtherInfoSelector=le,n.checkIfMethodIsEnabled=function(e,t){const n=X(e);return Boolean(n.methods.includes(t))},n.checkNetworkAndAccountSupports1559=function(e,t){return(0,C.isEIP1559Network)(e,t)},n.checkNetworkOrAccountNotSupports1559=function(e){return(0,C.isNotEIP1559Network)(e)},n.doesAddressRequireLedgerHidConnection=function(e,t){const n=(0,C.isAddressLedger)(e,t),r=(0,C.getLedgerTransportType)(e)===T.LedgerTransportTypes.webhid,a=(0,O.getLedgerWebHidConnectedStatus)(e)!==T.WebHIDConnectedStatuses.connected,o=(0,O.getLedgerTransportStatus)(e)!==T.HardwareTransportStates.verified;return n&&r&&(a||o)},n.getAccountName=function(e,t){const n=e.find((e=>(0,R.isEqualCaseInsensitive)(e.address,t)));return n&&""!==n.metadata.name?n.metadata.name:""},n.getAccountType=Y,n.getAccountTypeForKeyring=$,n.getAccountsWithLabels=function(e){return ae(e).map((e=>{const{address:t,metadata:{name:n},balance:r}=e;return{...e,addressLabel:`${n.length<h.TRUNCATED_NAME_CHAR_LIMIT?n:`${n.slice(0,h.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,A.shortenAddress)(t)})`,label:n,balance:r}}))},n.getAddressBook=ue,n.getAddressBookEntry=de,n.getAddressBookEntryOrAccountName=function(e,t){const n=de(e,t);if(n&&""!==n.name)return n.name;const r=Object.values(Z(e)).find((e=>(0,R.isEqualCaseInsensitive)(e.address,t)));return(null==r?void 0:r.metadata.name)||t},n.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee[K(e)]},n.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},n.getAllAccountsOnNetworkAreEmpty=function(e){const t=re(e)??{},n=Object.values(t).every((e=>"0x0"===e||"0x00"===e)),r=0===ee(e);return n&&r},n.getAllConnectedAccounts=void 0,n.getAllDomains=ie,n.getAllSnapAvailableUpdates=n.getAllEnabledNetworks=void 0,n.getAllTokens=se,n.getAnySnapUpdateAvailable=void 0,n.getAppIsLoading=function(e){return e.appState.isLoading},n.getBlockExplorerLinkText=function(e,t=!1){const n=ct(e),r=Pe(e);let a={firstPart:"addBlockExplorer",secondPart:""};r.blockExplorerUrl?a=t?{firstPart:"blockExplorerView",secondPart:(0,A.getURLHostName)(r.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===n&&(a=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return a},n.getConnectedSnapsList=n.getConnectedSitesListWithNetworkInfo=n.getConnectedSitesList=n.getConfirmationExchangeRates=void 0,n.getCurrentAccountWithSendEtherInfo=ge,n.getCurrentChainId=K,n.getCurrentCurrency=function(e){return e.metamask.currentCurrency},n.getCurrentEthBalance=pe,n.getCurrentKeyring=j,n.getCurrentNetwork=void 0,n.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},n.getCustomNonceValue=function(e){return String(e.metamask.customNonceValue)},n.getCustomTokenAmount=function(e){return e.appState.customTokenAmount},n.getDetectedTokensInCurrentNetwork=function(e){var t;const n=K(e),{address:r}=X(e);return null===(t=e.metamask.allDetectedTokens)||void 0===t||null===(t=t[n])||void 0===t?void 0:t[r]},n.getEditedNetwork=function(e){return e.appState.editedNetwork},n.getEnabledSnaps=void 0,n.getEnsResolutionByAddress=function(e,t){if(e.metamask.ensResolutionsByAddress[t])return e.metamask.ensResolutionsByAddress[t];const n=de(e,t)||Q(e,t);return(null==n?void 0:n.name)||""},n.getEthereumAddressNames=function(e){var t;return(null===(t=e.metamask.names)||void 0===t?void 0:t[d.NameType.ETHEREUM_ADDRESS])||{}},n.getExternalServicesOnboardingToggleState=function(e){return e.appState.externalServicesOnboardingToggleState},n.getFeatureFlags=function(e){return e.metamask.featureFlags},n.getFeatureNotificationsEnabled=function(e){const{featureNotificationsEnabled:t=!1}=ye(e);return t},n.getFullTxData=void 0,n.getGasIsLoading=function(e){return e.appState.gasIsLoading},n.getHardwareWalletType=function(e){const t=j(e);return V(e)?t.type:undefined},n.getHiddenAccountsList=tt,n.getHideSnapBranding=void 0,n.getInfuraBlocked=function(e){return e.metamask.networksMetadata[x(e)].status===m.NetworkStatus.Blocked},n.getInterfaceContent=n.getInterface=n.getInsightSnaps=n.getInsightSnapIds=void 0,n.getInternalAccount=function(e,t){return e.metamask.internalAccounts.accounts[t]},n.getInternalAccountByAddress=Q,n.getInternalAccounts=Z,n.getInternalAccountsSortedByKeyring=void 0,n.getIpfsGateway=function(e){return e.metamask.ipfsGateway},n.getIsAddSnapAccountEnabled=function(e){return e.metamask.addSnapAccountEnabled},n.getIsAddingNewNetwork=function(e){return e.appState.isAddingNewNetwork},n.getIsBitcoinSupportEnabled=function(e){return e.metamask.bitcoinSupportEnabled},n.getIsBitcoinTestnetSupportEnabled=function(e){return e.metamask.bitcoinTestnetSupportEnabled},n.getIsBridgeChain=function(e){const t=K(e);return _.ALLOWED_BRIDGE_CHAIN_IDS.includes(t)},n.getIsBridgeEnabled=void 0,n.getIsCustomNetwork=ct,n.getIsDynamicTokenListAvailable=ot,n.getIsLineaMainnet=function(e){return K(e)===m.CHAIN_IDS.LINEA_MAINNET},n.getIsMainnet=Ee,n.getIsMultiRpcOnboarding=function(e){return e.appState.isMultiRpcOnboarding},n.getIsNetworkUsed=function(e){const t=K(e),{usedNetworks:n}=e.metamask;return Boolean(n[t])},n.getIsNonStandardEthChain=function(e){return!(Ee(e)||he(e))},n.getIsSecurityAlertsEnabled=function(e){return e.metamask.securityAlertsEnabled},n.getIsSigningQRHardwareTransaction=function(e){var t;return(null===(t=e.metamask.qrHardware)||void 0===t||null===(t=t.sign)||void 0===t?void 0:t.request)!==undefined},n.getIsSwapsChain=function(e){const t=K(e);return y.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(t)},n.getIsTestnet=he,n.getIsTokenDetectionInactiveOnMainnet=st,n.getIsTokenDetectionSupported=function(e){const t=at(e),n=ot(e);return t&&n},n.getIsWatchEthereumAccountEnabled=function(e){return e.metamask.watchEthereumAccountEnabled},n.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=at(e),n=Ee(e);return ot(e)&&!t&&!n},n.getKeyringSnapAccounts=function(e){const t=Z(e);return Object.values(t).filter((e=>{const{keyring:t}=e.metadata;return t.type===S.KeyringType.snap}))},n.getKeyringSnapRemovalResult=function(e){return e.appState.keyringRemovalSnapModal},n.getKnownMethodData=function(e,t){const{knownMethodData:n,use4ByteResolution:r}=e.metamask;if(!r||!(0,q.hasTransactionData)(t))return null;const a=(0,f.addHexPrefix)(t).slice(0,10);if(a.length<10)return null;return(null==n?void 0:n[a])??null},n.getLocale=Ve,n.getMaybeSelectedInternalAccount=function(e){var t,n;const r=null===(t=e.metamask.internalAccounts)||void 0===t?void 0:t.selectedAccount;return r?null===(n=e.metamask.internalAccounts)||void 0===n?void 0:n.accounts[r]:undefined},n.getMemoizedUnapprovedTypedMessages=n.getMemoizedUnapprovedTemplatedConfirmations=n.getMemoizedUnapprovedPersonalMessages=n.getMemoizedUnapprovedConfirmations=n.getMemoizedTxId=n.getMemoizedTargetSubjectMetadata=n.getMemoizedMetadataContract=n.getMemoizedMetaMaskInternalAccounts=n.getMemoizedInterfaces=n.getMemoizedInterfaceContent=n.getMemoizedInterface=n.getMemoizedCurrentChainId=n.getMemoizedAddressBook=void 0,n.getMetaMaskAccountBalances=ne,n.getMetaMaskAccountsOrdered=n.getMetaMaskAccountsConnected=n.getMetaMaskAccounts=void 0,n.getMetaMaskCachedBalances=re,n.getMetaMaskKeyrings=te,n.getMetaMetricsId=function(e){const{metaMetricsId:t}=e.metamask;return t},n.getNameLookupSnapsIds=n.getMultipleTargetsSubjectMetadata=n.getMetadataContractName=void 0,n.getNameSources=function(e){return e.metamask.nameSources||{}},n.getNames=function(e){return e.metamask.names||{}},n.getNativeCurrencyImage=function(e){const t=K(e);return m.CHAIN_ID_TOKEN_IMAGE_MAP[t]},n.getNetworkConfigurationsByChainId=void 0,n.getNetworkIdentifier=function(e){const{type:t,nickname:n,rpcUrl:r}=(0,C.getProviderConfig)(e);return n||r||t},n.getNetworkToAutomaticallySwitchTo=function(e){const t=nt(e),n=Be(e),r=it(e);if((0,f.getEnvironmentType)()===B.ENVIRONMENT_TYPE_POPUP&&(0,C.getIsUnlocked)(e)&&r&&n&&0===t){const t=ie(e)[n],r=rt(e);if(t&&r.id!==t)return t}return null},n.getNetworksTabSelectedNetworkConfigurationId=function(e){return e.appState.selectedNetworkConfigurationId},n.getNeverShowSwitchedNetworkMessage=function(e){return e.metamask.switchedNetworkNeverShowMessage},n.getNewNetworkAdded=function(e){return e.appState.newNetworkAddedName},n.getNewNftAddedMessage=function(e){return e.appState.newNftAddedMessage},n.getNewPrivacyPolicyToastShownDate=function(e){return e.metamask.newPrivacyPolicyToastShownDate},n.getNewTokensImported=function(e){return e.appState.newTokensImported},n.getNewTokensImportedError=function(e){return e.appState.newTokensImportedError},n.getNextSuggestedNonce=function(e){return Number(e.metamask.nextNonce)},n.getNftDetectionEnablementToast=function(e){return e.appState.showNftDetectionEnablementToast},n.getNftIsStillFetchingIndication=function(e){return e.appState.isNftStillFetchingIndication},n.getNotifications=Ze,n.getNotifySnaps=void 0,n.getNumberOfAllUnapprovedTransactionsAndMessages=nt,n.getNumberOfTokens=ee,n.getOnboardedInThisUISession=function(e){return e.appState.onboardedInThisUISession},n.getOnboardingDate=function(e){return e.metamask.onboardingDate},n.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},n.getOrderedNetworksList=function(e){return e.metamask.orderedNetworkList},n.getOriginOfCurrentTab=Be,n.getPetnamesEnabled=function(e){const{petnamesEnabled:t=!0}=ye(e);return t},n.getPinnedAccountsList=et,n.getPreferences=ye,n.getPrioritizedUnapprovedTemplatedConfirmations=n.getPreinstalledSnaps=void 0,n.getQueuedRequestCount=me,n.getReadNotificationsCount=void 0,n.getRedesignedConfirmationsEnabled=function(e){const{redesignedConfirmationsEnabled:t}=ye(e);return t},n.getRedesignedTransactionsEnabled=function(e){const{redesignedTransactionsEnabled:t}=ye(e);return t},n.getRemoteTokens=n.getRemoteTokenList=void 0,n.getRemoveNftMessage=function(e){return e.appState.removeNftMessage},n.getRequestingNetworkInfo=function(e,t){let n=t===undefined?[]:t;"string"==typeof n&&(n=[n]);const r=n.flat();return Object.values(fe(e)).filter((e=>!m.TEST_CHAINS.includes(e.chainId)&&r.includes(e.chainId)))},n.getRpcPrefsForCurrentProvider=Pe,n.getSelectedAccount=void 0,n.getSelectedAccountCachedBalance=oe,n.getSelectedAddress=function(e){var t;return null===(t=X(e))||void 0===t?void 0:t.address},n.getSelectedInternalAccount=X,n.getSelectedInternalAccountWithBalance=function(e){const t=X(e),n=ne(e)[t.address];return{...t,balance:n?n.balance:"0x0"}},n.getSelectedNetworkClientId=x,n.getSendInputCurrencySwitched=function({appState:e}){return e.sendInputCurrencySwitched},n.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=ye(e);return t},n.getShouldShowFiat=function(e){const t=K(e),n=m.TEST_NETWORK_IDS.includes(t),{showFiatInTestnets:r}=ye(e),a=(0,C.getConversionRate)(e),o=ut(e),s=Boolean(o&&a);if(n)return r&&s;return s},n.getShouldShowSeedPhraseReminder=function(e){const{tokens:t,seedPhraseBackedUp:n,dismissSeedBackUpReminder:r}=e.metamask,a=X(e)?pe(e):0;return!1===n&&(parseInt(a,16)>0||t.length>0)&&!1===r},n.getShowAccountBanner=function(e){return e.metamask.showAccountBanner},n.getShowBasicFunctionalityModal=function(e){return e.appState.showBasicFunctionalityModal},n.getShowBetaHeader=function(e){return e.metamask.showBetaHeader},n.getShowExtensionInFullSizeView=function(e){const{showExtensionInFullSizeView:t}=ye(e);return Boolean(t)},n.getShowFiatInTestnets=function(e){const{showFiatInTestnets:t}=ye(e);return t},n.getShowNetworkBanner=function(e){return e.metamask.showNetworkBanner},n.getShowOutdatedBrowserWarning=function(e){const{outdatedBrowserWarningLastShown:t}=e.metamask;if(!t)return!0;return(new Date).getTime()-t>=2*k.DAY},n.getShowPermissionsTour=function(e){return e.metamask.showPermissionsTour},n.getShowPrivacyPolicyToast=function(e){const{newPrivacyPolicyToastClickedOrClosed:t,onboardingDate:n}=e.metamask,r=new Date(P.PRIVACY_POLICY_DATE),a=new Date(Date.now());return!t&&a>=r&&(n<r||!n)},n.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:n}=e.metamask,r=(new Date).getTime(),a=n?90*k.DAY:2*k.DAY;return r-t>=a},n.getShowSurveyToast=function(e){const{surveyLinkLastClickedOrClosed:t}=e.metamask,n=new Date(`${D.SURVEY_DATE} ${D.SURVEY_START_TIME}`).getTime(),r=new Date(`${D.SURVEY_DATE} ${D.SURVEY_END_TIME}`).getTime(),a=Date.now();return a>n&&a<r&&!t},n.getShowTermsOfUse=function(e){const{termsOfUseLastAgreed:t}=e.metamask;if(!t)return!0;return new Date(t).getTime()<new Date(I.TERMS_OF_USE_LAST_UPDATED).getTime()},n.getShowTestNetworks=_e,n.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},n.getSnapMetadata=n.getSnapLatestVersion=n.getSnapInsights=n.getSnap=n.getSignatureInsightSnaps=n.getSignatureInsightSnapIds=void 0,n.getSnapRegistry=function(e){const{snapRegistryList:t}=e.metamask;return t},n.getSnapRegistryData=void 0,n.getSnaps=je,n.getSnapsInstallPrivacyWarningShown=function(e){const{snapsInstallPrivacyWarningShown:t}=e.metamask;if(t===undefined||null===t)return!1;return t},n.getSnapsList=dt,n.getSnapsMetadata=void 0,n.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),n=function(e){const t=j(e),n=(null==t?void 0:t.type)===S.KeyringType.ledger,r=window.navigator.userAgent.includes("Firefox");return{[M.NOTIFICATION_DROP_LEDGER_FIREFOX]:n&&r}}(e),r=t.filter((e=>!e.isShown&&n[e.id]));return r.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},n.getSuggestedNfts=function(e){var t;return(null===(t=Te(e))||void 0===t?void 0:t.filter((({requestData:e,type:t})=>{var n;return t===o.ApprovalType.WatchAsset&&(null==e||null===(n=e.asset)||void 0===n?void 0:n.tokenId)!==undefined})))||[]},n.getSuggestedTokens=function(e){var t;return(null===(t=Te(e))||void 0===t?void 0:t.filter((({type:e,requestData:t})=>{var n;return e===o.ApprovalType.WatchAsset&&(null==t||null===(n=t.asset)||void 0===n?void 0:n.tokenId)===undefined})))||[]},n.getSwapsDefaultToken=function(e){const t=ce(e),n=null==t?void 0:t.balance,r=K(e);return{...y.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[r],balance:(0,b.hexToDecimal)(n),string:(0,b.getValueFromWeiHex)({value:n,numberOfDecimals:4,toDenomination:"ETH"})}},n.getSwitchedNetworkDetails=function(e){const{switchedNetworkDetails:t}=e.metamask,n=fe(e);if(t){const e=Object.values(n).find((e=>e.rpcEndpoints.some((e=>e.networkClientId===t.networkClientId))));return{nickname:null==e?void 0:e.name,imageUrl:m.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==e?void 0:e.chainId],origin:null==t?void 0:t.origin}}return null},n.getTargetAccount=function(e,t){return z(e)[t]},n.getTargetAccountWithSendEtherInfo=function(e,t){const n=le(e);return(0,A.getAccountByAddress)(n,t)},n.getTargetSubjectMetadata=Ne,n.getTestNetworkBackgroundColor=function(e){const t=(0,C.getProviderConfig)(e).ticker;switch(!0){case null==t?void 0:t.includes(m.GOERLI_DISPLAY_NAME):return v.BackgroundColor.goerli;case null==t?void 0:t.includes(m.SEPOLIA_DISPLAY_NAME):return v.BackgroundColor.sepolia;default:return undefined}},n.getTheme=function(e){return e.metamask.theme},n.getTokensMarketData=n.getTokenList=n.getTokenExchangeRates=n.getTokenDetectionSupportNetworkByChainId=void 0,n.getTotalUnapprovedCount=function(e){return e.metamask.pendingApprovalCount??0},n.getTotalUnapprovedMessagesCount=function(e){const{unapprovedPersonalMsgCount:t=0,unapprovedDecryptMsgCount:n=0,unapprovedEncryptionPublicKeyMsgCount:r=0,unapprovedTypedMessagesCount:a=0}=e.metamask;return t+n+r+a},n.getTotalUnapprovedSignatureRequestCount=function(e){const{unapprovedPersonalMsgCount:t=0,unapprovedTypedMessagesCount:n=0}=e.metamask;return t+n},n.getTxData=n.getTransaction=void 0,n.getUSDConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,C.getProviderConfig)(e).ticker])||void 0===t?void 0:t.usdConversionRate},n.getUnapprovedConfirmations=void 0,n.getUnapprovedTemplatedConfirmations=Se,n.getUnapprovedTransaction=void 0,n.getUnapprovedTxCount=function(e){const t=(0,F.getUnapprovedTransactions)(e);return Object.keys(t).length},n.getUnconnectedAccounts=function(e,t){const n=ae(e),r=(0,W.getOrderedConnectedAccountsForConnectedDapp)(e,t);return n.filter((e=>!r.some((t=>t.address===e.address))))},n.getUnreadNotifications=Je,n.getUpdatedAndSortedAccounts=n.getUnreadNotificationsCount=void 0,n.getUseBlockie=function(e){return Boolean(e.metamask.useBlockie)},n.getUseCurrencyRateCheck=ut,n.getUseExternalServices=Le,n.getUseNftDetection=function(e){return Boolean(e.metamask.useNftDetection)},n.getUseNonceField=function(e){const t=(0,E.getIsSmartTransaction)(e);return Boolean(!t&&e.metamask.useNonceField)},n.getUseRequestQueue=it,n.getUseTokenDetection=at,n.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},n.getsnapsAddSnapAccountModalDismissed=function(e){const{snapsAddSnapAccountModalDismissed:t}=e.metamask;return t},n.isBalanceCached=function(e){var t;const{address:n}=X(e),r=null===(t=ne(e)[n])||void 0===t?void 0:t.balance,a=oe(e);return Boolean(!r&&a)},n.isCurrentProviderCustom=function(e){const t=(0,C.getProviderConfig)(e);return t.type===m.NETWORK_TYPES.RPC&&!Object.values(m.CHAIN_IDS).includes(t.chainId)},n.isHardwareWallet=V,n.isNetworkLoading=function(e){const t=x(e);return t&&e.metamask.networksMetadata[t].status!==m.NetworkStatus.Available},n.useSafeChainsListValidationSelector=n.selectInstalledSnaps=n.selectAllTokensFlat=n.rawStateSelector=void 0;var r,a=e("@metamask/permission-controller"),o=e("@metamask/controller-utils"),s=e("@metamask/snaps-utils"),i=e("lodash"),c=(r=e("semver"))&&r.__esModule?r:{default:r},u=e("reselect"),d=e("@metamask/name-controller"),l=e("@metamask/transaction-controller"),g=e("@metamask/keyring-api"),p=e("@metamask/network-controller"),f=e("../../app/scripts/lib/util"),m=e("../../shared/constants/network"),T=e("../../shared/constants/hardware-wallets"),S=e("../../shared/constants/keyring"),E=e("../../shared/modules/selectors"),h=e("../../shared/constants/labels"),y=e("../../shared/constants/swaps"),_=e("../../shared/constants/bridge"),A=e("../helpers/utils/util"),N=e("../pages/confirmations/confirmation/templates"),w=e("../../shared/constants/tokens"),k=e("../../shared/constants/time"),I=e("../../shared/constants/terms"),C=e("../ducks/metamask/metamask"),O=e("../ducks/app/app"),R=e("../../shared/modules/string-utils"),b=e("../../shared/modules/conversion.utils"),v=e("../helpers/constants/design-system"),M=e("../../shared/notifications"),D=e("../helpers/constants/survey"),P=e("../helpers/constants/privacy-policy"),B=e("../../shared/constants/app"),L=e("../../shared/constants/multichain/assets"),U=e("../../app/scripts/controllers/bridge/types"),q=e("../../shared/modules/transaction.utils"),F=e("./transactions"),W=e("./permissions"),H=e("./util"),G=e("./multichain");function x(e){return e.metamask.selectedNetworkClientId}function K(e){const{chainId:t}=(0,C.getProviderConfig)(e);return t}function j(e){const t=X(e);return t?t.metadata.keyring:null}function V(e){var t;const n=j(e);return Boolean(null==n||null===(t=n.type)||void 0===t?void 0:t.includes("Hardware"))}function Y(e){return $(j(e))}function $(e){if(!e)return"";const{type:t}=e;switch(t){case S.KeyringType.trezor:case S.KeyringType.ledger:case S.KeyringType.lattice:case S.KeyringType.qr:return"hardware";case S.KeyringType.imported:return"imported";case S.KeyringType.snap:return"snap";default:return"default"}}const z=n.getMetaMaskAccounts=(0,u.createSelector)(Z,ne,re,G.getMultichainBalances,G.getMultichainNetwork,((e,t,n,r,a)=>Object.values(e).reduce(((e,o)=>{let s=o;var i;(0,g.isEvmAccountType)(o.type)?null!=t&&t[o.address]&&(s={...s,...t[o.address]}):s={...s,balance:(null==r||null===(i=r[o.id])||void 0===i||null===(i=i[L.MultichainNativeAssets[a.chainId]])||void 0===i?void 0:i.amount)??"0"};return null!==s.balance&&s.balance!==undefined||(s={...s,balance:(n&&n[o.address])??"0x0"}),{...e,[o.address]:s}}),{})));function Q(e,t){return Object.values(e.metamask.internalAccounts.accounts).find((e=>(0,R.isEqualCaseInsensitive)(e.address,t)))}function X(e){const t=e.metamask.internalAccounts.selectedAccount;return e.metamask.internalAccounts.accounts[t]}function Z(e){return Object.values(e.metamask.internalAccounts.accounts)}const J=n.getInternalAccountsSortedByKeyring=(0,u.createSelector)(te,z,((e,t)=>e.map((({accounts:e})=>e)).flat().map((e=>t[e]))));function ee(e){const{tokens:t}=e.metamask;return t?t.length:0}function te(e){return e.metamask.keyrings}function ne(e){return e.metamask.accounts}function re(e){var t;const n=K(e);return null!==(t=e.metamask.accountsByChainId)&&void 0!==t&&t[n]?Object.entries(e.metamask.accountsByChainId[n]).reduce(((e,[t,n])=>(e[t]=n.balance,e)),{}):{}}const ae=n.getMetaMaskAccountsOrdered=(0,u.createSelector)(J,z,((e,t)=>e.map((e=>({...e,...t[e.address]})))));n.getMetaMaskAccountsConnected=(0,u.createSelector)(ae,(e=>e.map((({address:e})=>e.toLowerCase()))));function oe(e){const t=re(e),{address:n}=X(e);return null==t?void 0:t[n]}function se(e){return e.metamask.allTokens}n.selectAllTokensFlat=(0,u.createSelector)(se,(e=>Object.values(e).reduce(((e,t)=>{const n=Object.values(t);return e.concat(...n)}),[])));function ie(e){return e.metamask.domains}n.getConfirmationExchangeRates=e=>e.metamask.confirmationExchangeRates;const ce=n.getSelectedAccount=(0,H.createDeepEqualSelector)(z,X,((e,t)=>t?{...t,...e[t.address]}:undefined));n.getTokenExchangeRates=e=>{var t;const n=K(e),r=(null===(t=e.metamask.marketData)||void 0===t?void 0:t[n])??{};return Object.entries(r).reduce(((e,[t,n])=>(e[t]=(null==n?void 0:n.price)??null,e)),{})};function ue(e){const t=K(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function de(e,t){return ue(e).find((e=>(0,R.isEqualCaseInsensitive)(e.address,t)))}function le(e){const t=z(e),n=Z(e);return Object.values(n).map((e=>({...e,...t[e.address]})))}function ge(e){const{address:t}=X(e),n=le(e);return(0,A.getAccountByAddress)(n,t)}function pe(e){var t;return null===(t=ge(e))||void 0===t?void 0:t.balance}n.getTokensMarketData=e=>{var t;const n=K(e);return null===(t=e.metamask.marketData)||void 0===t?void 0:t[n]};const fe=n.getNetworkConfigurationsByChainId=(0,H.createDeepEqualSelector)((e=>e.metamask.networkConfigurationsByChainId),(e=>e));function me(e){return e.metamask.queuedRequestCount??0}const Te=n.getUnapprovedConfirmations=(0,H.createDeepEqualSelector)((e=>e.metamask.pendingApprovals||{}),(e=>Object.values(e)));function Se(e){return Te(e).filter((e=>N.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(e.type)))}n.getPrioritizedUnapprovedTemplatedConfirmations=(0,u.createSelector)(Se,(e=>e.filter((({type:e})=>N.PRIORITY_APPROVAL_TEMPLATE_TYPES.includes(e)))));function Ee(e){return K(e)===m.CHAIN_IDS.MAINNET}function he(e){const t=K(e);return m.TEST_CHAINS.includes(t)}function ye({metamask:e}){return e.preferences}function _e(e){const{showTestNetworks:t}=ye(e);return Boolean(t)}const Ae=(0,i.memoize)((e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`));function Ne(e,t){const n=(0,W.getSubjectMetadata)(e)[t];if((null==n?void 0:n.subjectType)===a.SubjectType.Snap){const{svgIcon:e,...t}=n;return{...t,iconUrl:e?Ae(e):null}}return n}const we=e=>e;n.rawStateSelector=we;const ke=(e,t)=>t,Ie=e=>e.metamask.snaps;n.selectInstalledSnaps=Ie;const Ce=n.getSnapRegistryData=(0,u.createSelector)([e=>{var t;return null===(t=e.metamask.database)||void 0===t?void 0:t.verifiedSnaps},ke],((e,t)=>e?e[t]:null)),Oe=n.getSnapLatestVersion=(0,u.createSelector)([Ce],(e=>e?Object.keys(e.versions).reduce(((e,t)=>c.default.gt(t,e)?t:e),"0.0.0"):null)),Re=n.getAllSnapAvailableUpdates=(0,u.createSelector)([Ie,we],((e,t)=>{const n=new Map;return Object.keys(e).forEach((r=>{const a=Oe(t,r);n.set(r,!!a&&c.default.gt(a,e[r].version))})),n})),be=(n.getAnySnapUpdateAvailable=(0,u.createSelector)([Re],(e=>[...e.values()].some((e=>!0===e)))),n.getHideSnapBranding=(0,u.createSelector)([Ie,ke],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.hideSnapBranding})),n.getMemoizedTargetSubjectMetadata=(0,H.createDeepEqualSelector)(Ne,(e=>e)),n.getMemoizedUnapprovedConfirmations=(0,H.createDeepEqualSelector)(Te,(e=>e)),n.getMemoizedUnapprovedTemplatedConfirmations=(0,H.createDeepEqualSelector)(Se,(e=>e)),(e,t)=>t),ve=n.getMemoizedInterfaces=(0,H.createDeepEqualSelector)((e=>e.metamask.interfaces),(e=>e)),Me=n.getInterface=(0,u.createSelector)([ve,be],((e,t)=>e[t])),De=(n.getMemoizedInterface=(0,H.createDeepEqualSelector)(Me,(e=>e)),n.getInterfaceContent=(0,u.createSelector)([ve,be],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.content})));n.getMemoizedInterfaceContent=(0,H.createDeepEqualSelector)(De,(e=>e)),n.getMultipleTargetsSubjectMetadata=(0,H.createDeepEqualSelector)([we,(e,t)=>t],((e,t)=>Object.keys(t??{}).reduce(((t,n)=>(t[n]=Ne(e,n),t)),{})));function Pe(e){const{rpcPrefs:t}=(0,C.getProviderConfig)(e);return t||{}}function Be(e){return e.activeTab.origin}function Le(e){return e.metamask.useExternalServices}n.getIsBridgeEnabled=(0,u.createSelector)([function(e){var t;return null===(t=e.metamask.bridgeState)||void 0===t?void 0:t.bridgeFeatureFlags},Le],((e,t)=>(t&&(null==e?void 0:e[U.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]))??!1));n.getMemoizedMetaMaskInternalAccounts=(0,H.createDeepEqualSelector)(Z,(e=>e)),n.getMemoizedAddressBook=(0,H.createDeepEqualSelector)(ue,(e=>e));const Ue=n.getRemoteTokenList=(0,H.createDeepEqualSelector)((e=>e.metamask.tokenList),(e=>e)),qe=n.getTokenList=(0,u.createSelector)(Ue,st,((e,t)=>t?w.STATIC_MAINNET_TOKEN_LIST:e)),Fe=(n.getRemoteTokens=(0,u.createSelector)(Ue,((e,t)=>t),((e,t)=>t.map((t=>e[null==t?void 0:t.toLowerCase()])))),n.getMemoizedMetadataContract=(0,u.createSelector)(((e,t)=>qe(e)),((e,t)=>t),((e,t)=>e[null==t?void 0:t.toLowerCase()]))),We=(n.getMetadataContractName=(0,u.createSelector)(Fe,(e=>(null==e?void 0:e.name)??"")),e=>e.confirmTransaction.txData);n.getTxData=We;const He=n.getUnapprovedTransaction=(0,H.createDeepEqualSelector)((e=>(0,F.getUnapprovedTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t)))),Ge=n.getTransaction=(0,H.createDeepEqualSelector)((e=>(0,F.getCurrentNetworkTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{})),xe=(n.getFullTxData=(0,H.createDeepEqualSelector)(We,((e,t,n)=>n===l.TransactionStatus.unapproved?He(e,t)??{}:Ge(e,t)),((e,t,n,r,a)=>({customTxParamsData:r,hexTransactionAmount:a})),((e,t,{customTxParamsData:n,hexTransactionAmount:r})=>{let a={...e,...t};return t&&t.simulationFails&&(a.simulationFails={...t.simulationFails}),n&&(a={...a,txParams:{...a.txParams,data:n}}),r&&(a={...a,txParams:{...a.txParams,value:r}}),a})),n.getAllConnectedAccounts=(0,H.createDeepEqualSelector)(W.getConnectedSubjectsForAllAddresses,(e=>Object.keys(e)))),Ke=n.getConnectedSitesList=(0,H.createDeepEqualSelector)(W.getConnectedSubjectsForAllAddresses,Z,xe,((e,t,n)=>{const r={};return n.forEach((n=>{e[n].forEach((e=>{const a=e.origin,o=t.find((e=>(0,R.isEqualCaseInsensitive)(e.address,n)));r[a]?(r[a].addresses.push(n),r[a].addressToNameMap[n]=(null==o?void 0:o.metadata.name)||""):r[a]={...e,addresses:[n],addressToNameMap:{[n]:(null==o?void 0:o.metadata.name)||""}}}))})),r}));n.getConnectedSnapsList=(0,H.createDeepEqualSelector)(dt,(e=>{const t={};return Object.values(e).forEach((e=>{t[e.name]||(t[e.name]=e)})),t})),n.getMemoizedCurrentChainId=(0,H.createDeepEqualSelector)(K,(e=>e)),n.getMemoizedTxId=(0,H.createDeepEqualSelector)((e=>e.appState.txId),(e=>e)),n.getMemoizedUnapprovedPersonalMessages=(0,H.createDeepEqualSelector)((e=>e.metamask.unapprovedPersonalMsgs),(e=>e)),n.getMemoizedUnapprovedTypedMessages=(0,H.createDeepEqualSelector)((e=>e.metamask.unapprovedTypedMessages),(e=>e));function je(e){return e.metamask.snaps}function Ve(e){return e.metamask.currentLocale}n.getSnap=(0,H.createDeepEqualSelector)(je,((e,t)=>t),((e,t)=>e[t]));const Ye=n.getSnapsMetadata=(0,H.createDeepEqualSelector)(Ve,je,((e,t)=>Object.values(t).reduce(((t,n)=>{const r=n.id,a=n.localizationFiles?(0,s.getLocalizedSnapManifest)(n.manifest,e,n.localizationFiles):n.manifest;return t[r]={name:a.proposedName,description:a.description},t}),{}))),$e=n.getSnapMetadata=(0,H.createDeepEqualSelector)(Ye,((e,t)=>t),((e,t)=>e[t]??{name:t?(0,s.stripSnapPrefix)(t):null})),ze=n.getEnabledSnaps=(0,H.createDeepEqualSelector)(je,(e=>Object.values(e).reduce(((e,t)=>(t.enabled&&(e[t.id]=t),e)),{}))),Qe=(n.getPreinstalledSnaps=(0,H.createDeepEqualSelector)(je,(e=>Object.values(e).reduce(((e,t)=>(t.preinstalled&&(e[t.id]=t),e)),{}))),n.getInsightSnaps=(0,H.createDeepEqualSelector)(ze,W.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:transaction-insight"]}))))),Xe=n.getSignatureInsightSnaps=(0,H.createDeepEqualSelector)(ze,W.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:signature-insight"]}))));n.getSignatureInsightSnapIds=(0,H.createDeepEqualSelector)(Xe,(e=>e.map((e=>e.id)))),n.getInsightSnapIds=(0,H.createDeepEqualSelector)(Qe,(e=>e.map((e=>e.id)))),n.getNameLookupSnapsIds=(0,H.createDeepEqualSelector)(ze,W.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:name-lookup"]})).map((e=>e.id)))),n.getNotifySnaps=(0,H.createDeepEqualSelector)(ze,W.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions.snap_notify}))));n.getSnapInsights=(0,H.createDeepEqualSelector)((function(e){return e.metamask.insights}),((e,t)=>t),((e,t)=>null==e?void 0:e[t]));function Ze(e){return Object.values(e.metamask.notifications).sort(((e,t)=>new Date(t.createdDate)-new Date(e.createdDate)))}function Je(e){return Ze(e).filter((e=>null===e.readDate))}n.getReadNotificationsCount=(0,u.createSelector)(Ze,(e=>e.filter((e=>null!==e.readDate)).length)),n.getUnreadNotificationsCount=(0,u.createSelector)(Je,(e=>e.length));function et(e){return e.metamask.pinnedAccountList}function tt(e){return e.metamask.hiddenAccountList}function nt(e){const t=(0,F.getAllUnapprovedTransactions)(e),n=me(e),r={...t,...e.metamask.unapprovedDecryptMsgs,...e.metamask.unapprovedPersonalMsgs,...e.metamask.unapprovedEncryptionPublicKeyMsgs,...e.metamask.unapprovedTypedMessages};return Object.keys(r).length+n}const rt=n.getCurrentNetwork=(0,H.createDeepEqualSelector)(fe,K,((e,t)=>{var n;const r=e[t],a=r.rpcEndpoints[r.defaultRpcEndpointIndex],o=null===(n=r.blockExplorerUrls)||void 0===n?void 0:n[r.defaultBlockExplorerUrlIndex];return{chainId:r.chainId,id:a.networkClientId,nickname:r.name,rpcUrl:a.url,ticker:r.nativeCurrency,blockExplorerUrl:o,rpcPrefs:{blockExplorerUrl:o,imageUrl:m.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[r.chainId]},...a.type===p.RpcEndpointType.Infura&&{providerType:a.networkClientId}}}));n.getConnectedSitesListWithNetworkInfo=(0,H.createDeepEqualSelector)(Ke,ie,fe,rt,((e,t,n,r)=>(Object.keys(e).forEach((a=>{const o=Object.values(n).find((e=>e.rpcEndpoints.some((e=>e.networkClientId===t[a]))));e[a].networkIconUrl=m.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==o?void 0:o.chainId]||"",e[a].networkName=(null==o?void 0:o.name)||(null==r?void 0:r.nickname)||""})),e)));function at(e){return Boolean(e.metamask.useTokenDetection)}n.getAllEnabledNetworks=(0,H.createDeepEqualSelector)(fe,_e,((e,t)=>Object.entries(e).reduce(((e,[n,r])=>(!t&&m.TEST_CHAINS.includes(n)||(e[n]=r),e)),{})));function ot(e){const t=K(e);return[m.CHAIN_IDS.MAINNET,m.CHAIN_IDS.BSC,m.CHAIN_IDS.POLYGON,m.CHAIN_IDS.AVALANCHE,m.CHAIN_IDS.LINEA_GOERLI,m.CHAIN_IDS.LINEA_SEPOLIA,m.CHAIN_IDS.LINEA_MAINNET,m.CHAIN_IDS.ARBITRUM,m.CHAIN_IDS.OPTIMISM,m.CHAIN_IDS.BASE,m.CHAIN_IDS.ZKSYNC_ERA,m.CHAIN_IDS.CRONOS,m.CHAIN_IDS.CELO,m.CHAIN_IDS.GNOSIS,m.CHAIN_IDS.FANTOM,m.CHAIN_IDS.POLYGON_ZKEVM,m.CHAIN_IDS.MOONBEAM,m.CHAIN_IDS.MOONRIVER].includes(t)}function st(e){const t=Ee(e);return!at(e)&&t}function it(e){return e.metamask.useRequestQueue}function ct(e){const t=K(e);return!m.CHAIN_ID_TO_RPC_URL_MAP[t]}n.getTokenDetectionSupportNetworkByChainId=e=>{switch(K(e)){case m.CHAIN_IDS.MAINNET:return m.MAINNET_DISPLAY_NAME;case m.CHAIN_IDS.BSC:return m.BSC_DISPLAY_NAME;case m.CHAIN_IDS.POLYGON:return m.POLYGON_DISPLAY_NAME;case m.CHAIN_IDS.AVALANCHE:return m.AVALANCHE_DISPLAY_NAME;case m.CHAIN_IDS.LINEA_GOERLI:return m.LINEA_GOERLI_DISPLAY_NAME;case m.CHAIN_IDS.LINEA_SEPOLIA:return m.LINEA_SEPOLIA_DISPLAY_NAME;case m.CHAIN_IDS.LINEA_MAINNET:return m.LINEA_MAINNET_DISPLAY_NAME;case m.CHAIN_IDS.ARBITRUM:return m.ARBITRUM_DISPLAY_NAME;case m.CHAIN_IDS.OPTIMISM:return m.OPTIMISM_DISPLAY_NAME;case m.CHAIN_IDS.BASE:return m.BASE_DISPLAY_NAME;case m.CHAIN_IDS.ZKSYNC_ERA:return m.ZK_SYNC_ERA_DISPLAY_NAME;case m.CHAIN_IDS.CRONOS:return m.CRONOS_DISPLAY_NAME;case m.CHAIN_IDS.CELO:return m.CELO_DISPLAY_NAME;case m.CHAIN_IDS.GNOSIS:return m.GNOSIS_DISPLAY_NAME;case m.CHAIN_IDS.FANTOM:return m.FANTOM_DISPLAY_NAME;case m.CHAIN_IDS.POLYGON_ZKEVM:return m.POLYGON_ZKEVM_DISPLAY_NAME;case m.CHAIN_IDS.MOONBEAM:return m.MOONBEAM_DISPLAY_NAME;case m.CHAIN_IDS.MOONRIVER:return m.MOONRIVER_DISPLAY_NAME;default:return""}};n.getUpdatedAndSortedAccounts=(0,H.createDeepEqualSelector)(ae,et,tt,W.getOrderedConnectedAccountsForActiveTab,((e,t,n,r)=>{r.forEach((t=>{const n=e.find((e=>e.id===t.id));n&&t.metadata&&(n.connections=!0,n.lastSelected=t.metadata.lastSelected)}));const a=e.filter((e=>e.connections&&e.lastSelected)),o=a.length>0?a.reduce(((e,t)=>e.lastSelected>t.lastSelected?e:t)):null;e.forEach((e=>{e.pinned=Boolean(t.includes(e.address)),e.hidden=Boolean(n.includes(e.address)),e.active=Boolean(o&&e.id===o.id)}));return[...null==t?void 0:t.map((t=>e.find((e=>e.address===t)))).filter((e=>Boolean(e&&t.includes(e.address)&&!(null!=n&&n.includes(e.address))))),...e.filter((e=>!t.includes(e.address)&&!n.includes(e.address))),...e.filter((e=>n.includes(e.address)))]}));function ut(e){return Boolean(e.metamask.useCurrencyRateCheck)}function dt(e){const t=je(e);return Object.entries(t).filter((([e,t])=>t.status!==s.SnapStatus.Installing&&(!t.preinstalled||!1===t.hidden))).map((([t,n])=>{const r=Ne(e,null==n?void 0:n.id);return{key:t,id:n.id,iconUrl:null==r?void 0:r.iconUrl,subjectType:null==r?void 0:r.subjectType,packageName:(0,s.stripSnapPrefix)(n.id),name:$e(e,n.id).name}}))}n.useSafeChainsListValidationSelector=e=>e.metamask.useSafeChainsListValidation}}},{package:"$root$",file:"ui/selectors/selectors.js"}],[6474,{"../../shared/constants/transaction":4845,"../../shared/modules/conversion.utils":4865,"../ducks/metamask/metamask":5759,"../helpers/constants/transactions":5783,"../helpers/utils/tx-helper":5818,"./approvals":6460,"./selectors":6472,"./util":6475,"@metamask/controller-utils":1210,"@metamask/smart-transactions-controller/dist/types":1971,"@metamask/transaction-controller":2453,reselect:4587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUnapprovedTransactions=n.getTransactions=n.getCurrentNetworkTransactions=n.getApprovedAndSignedTransactions=n.getAllUnapprovedTransactions=void 0,n.hasTransactionPendingApprovals=function(e){return(0,f.getApprovalRequestsByType)(e,a.ApprovalType.Transaction).length>0||(0,f.hasPendingApprovals)(e,M)},n.nonceSortedTransactionsSelector=n.nonceSortedPendingTransactionsSelector=n.nonceSortedCompletedTransactionsSelector=n.incomingTxListSelector=void 0,n.selectTransactionMetadata=D,n.unapprovedTypedMessagesSelector=n.unapprovedPersonalMsgsSelector=n.unapprovedMessagesSelector=n.unapprovedEncryptionPublicKeyMsgsSelector=n.unapprovedDecryptMsgsSelector=n.transactionsSelector=n.transactionSubSelector=n.submittedPendingTransactionsSelector=n.smartTransactionsListSelector=n.selectedAddressTxListSelector=n.selectTransactionSender=void 0;var r,a=e("@metamask/controller-utils"),o=e("reselect"),s=e("@metamask/transaction-controller"),i=e("@metamask/smart-transactions-controller/dist/types"),c=e("../helpers/constants/transactions"),u=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},d=e("../../shared/constants/transaction"),l=e("../../shared/modules/conversion.utils"),g=e("../ducks/metamask/metamask"),p=e("./selectors"),f=e("./approvals"),m=e("./util");const T=[s.TransactionType.cancel,s.TransactionType.retry],S=[i.SmartTransactionStatuses.PENDING,i.SmartTransactionStatuses.UNKNOWN,i.SmartTransactionStatuses.RESOLVED,i.SmartTransactionStatuses.CANCELLED],E=n.getTransactions=(0,m.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask??{};return null!=t&&t.length?[...t].sort(((e,t)=>e.time-t.time)):[]}),(e=>e)),h=n.getCurrentNetworkTransactions=(0,m.createDeepEqualSelector)((e=>{const t=E(e);if(!t.length)return[];const{chainId:n}=(0,g.getProviderConfig)(e);return t.filter((e=>e.chainId===n))}),(e=>e)),y=(n.getUnapprovedTransactions=(0,m.createDeepEqualSelector)((e=>{const t=h(e);return(0,m.filterAndShapeUnapprovedTransactions)(t)}),(e=>e)),n.getAllUnapprovedTransactions=(0,m.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask||[];if(null==t||!t.length)return[];const n=[...t].sort(((e,t)=>e.time-t.time));return(0,m.filterAndShapeUnapprovedTransactions)(n)}),(e=>e)),n.getApprovedAndSignedTransactions=(0,m.createDeepEqualSelector)((e=>E(e).filter((e=>[s.TransactionStatus.approved,s.TransactionStatus.signed].includes(e.status)))),(e=>e)),n.incomingTxListSelector=(0,m.createDeepEqualSelector)((e=>{const{incomingTransactionsPreferences:t}=e.metamask;if(!t)return[];const n=h(e),{address:r}=(0,p.getSelectedInternalAccount)(e);return n.filter((e=>e.type===s.TransactionType.incoming&&e.txParams.to===r))}),(e=>e))),_=e=>e.metamask.unapprovedPersonalMsgs;n.unapprovedPersonalMsgsSelector=_;const A=e=>e.metamask.unapprovedDecryptMsgs;n.unapprovedDecryptMsgsSelector=A;const N=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;n.unapprovedEncryptionPublicKeyMsgsSelector=N;const w=e=>e.metamask.unapprovedTypedMessages;n.unapprovedTypedMessagesSelector=w;const k=e=>{var t;const{address:n}=(0,p.getSelectedInternalAccount)(e);return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t||null===(t=t[(0,p.getCurrentChainId)(e)])||void 0===t?void 0:t.filter((e=>{var t;return(null===(t=e.txParams)||void 0===t?void 0:t.from)===n&&!e.confirmed&&(e.status===i.SmartTransactionStatuses.PENDING||(e.type===s.TransactionType.swap||e.type===s.TransactionType.swapApproval)&&S.includes(e.status))})).map((e=>{var t;return{...e,isSmartTransaction:!0,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?d.SmartTransactionStatus.cancelled:e.status}}))};n.smartTransactionsListSelector=k;const I=n.selectedAddressTxListSelector=(0,o.createSelector)(p.getSelectedInternalAccount,h,k,((e,t=[],n=[])=>t.filter((({txParams:t})=>t.from===e.address)).filter((({type:e})=>e!==s.TransactionType.incoming)).concat(n))),C=n.unapprovedMessagesSelector=(0,o.createSelector)(_,A,N,w,p.getCurrentChainId,((e={},t={},n={},r={},a)=>(0,u.default)({},e,t,n,r,a)||[])),O=n.transactionSubSelector=(0,o.createSelector)(C,y,((e=[],t=[])=>e.concat(t))),R=n.transactionsSelector=(0,o.createSelector)(O,I,((e=[],t=[])=>[...t.concat(e)].sort(((e,t)=>t.time-e.time)))),b=(e,t)=>{const{primaryTransaction:{time:n}={}}=t;let r=e.length;for(let t=0;t<e.length;t++){const a=e[t],{primaryTransaction:{time:o}={}}=a;if(o>n){r=t;break}}e.splice(r,0,t)},v=n.nonceSortedTransactionsSelector=(0,o.createSelector)(R,((e=[])=>{const t=[],n=[],r=[],a={};e.forEach((e=>{const{txParams:{nonce:o}={},status:i,type:u,time:d,txReceipt:g}=e;if(void 0===o||u===s.TransactionType.incoming){const r={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:o};u===s.TransactionType.incoming?n.push(r):b(t,r)}else if(o in a){var p,f;const t=a[o];((e,t)=>{const{time:n}=t;let r=e.length;for(let t=0;t<e.length;t++)if(e[t].time>n){r=t;break}e.splice(r,0,t)})(t.transactions,e);const{primaryTransaction:{time:n=0}={},initialTransaction:{time:r=0}={}}=t,l={isOnChainFailure:"0x0"===(null==g?void 0:g.status),isEphemeral:i===s.TransactionStatus.failed&&"0x0"!==(null==g?void 0:g.status),isRetryOrCancel:T.includes(u),occurredAfterPrimary:d>n,hasPriorityStatus:i in c.PRIORITY_STATUS_HASH,isConfirmed:i===s.TransactionStatus.confirmed,occurredBeforeInitial:d<r,isValidRetry:u===s.TransactionType.retry&&(i in c.PRIORITY_STATUS_HASH||i===s.TransactionStatus.dropped),isValidCancel:u===s.TransactionType.cancel&&(i in c.PRIORITY_STATUS_HASH||i===s.TransactionStatus.dropped)};l.eligibleForInitial=!l.isRetryOrCancel&&!l.isEphemeral,l.shouldBePrimary=l.isConfirmed||l.isOnChainFailure;const m={isEphemeral:t.primaryTransaction.status===s.TransactionStatus.failed&&"0x0"!==(null===(p=t.primaryTransaction)||void 0===p||null===(p=p.txReceipt)||void 0===p?void 0:p.status)},S={isEphemeral:t.initialTransaction.status===s.TransactionStatus.failed&&"0x0"!==(null===(f=t.initialTransaction.txReceipt)||void 0===f?void 0:f.status)};(l.shouldBePrimary||m.isEphemeral||l.occurredAfterPrimary&&l.hasPriorityStatus)&&(t.primaryTransaction=e),(l.occurredBeforeInitial&&l.eligibleForInitial||S.isEphemeral&&l.eligibleForInitial)&&(t.initialTransaction=e),l.isValidRetry&&(t.hasRetried=!0),l.isValidCancel&&(t.hasCancelled=!0)}else a[o]={nonce:o,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===s.TransactionType.retry&&(e.status in c.PRIORITY_STATUS_HASH||e.status===s.TransactionStatus.dropped),hasCancelled:e.type===s.TransactionType.cancel&&(e.status in c.PRIORITY_STATUS_HASH||e.status===s.TransactionStatus.dropped)},((e,t)=>{let n=e.length;for(let r=0;r<e.length;r++){const a=e[r];if(Number((0,l.hexToDecimal)(a))>Number((0,l.hexToDecimal)(t))){n=r;break}}e.splice(n,0,t)})(r,o)}));const o=r.map((e=>a[e]));return((e,t)=>{t.forEach((t=>{b(e,t)}))})(o,n),t.concat(o).map((e=>{var t;if(T.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!T.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))})),M=(n.nonceSortedPendingTransactionsSelector=(0,o.createSelector)(v,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in c.PENDING_STATUS_HASH)))),n.nonceSortedCompletedTransactionsSelector=(0,o.createSelector)(v,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in c.PENDING_STATUS_HASH))).reverse())),n.submittedPendingTransactionsSelector=(0,o.createSelector)(R,((e=[])=>e.filter((e=>e.status===s.TransactionStatus.submitted)))),[a.ApprovalType.EthDecrypt,a.ApprovalType.EthGetEncryptionPublicKey,a.ApprovalType.EthSignTypedData,a.ApprovalType.PersonalSign]);function D(e,t){return e.metamask.transactions.find((e=>e.id===t))}n.selectTransactionSender=(0,o.createSelector)(((e,t)=>D(e,t)),(e=>{var t;return null==e||null===(t=e.txParams)||void 0===t?void 0:t.from}))}}},{package:"$root$",file:"ui/selectors/transactions.js"}],[6475,{"@metamask/transaction-controller":2453,lodash:4164,reselect:4587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.filterAndShapeUnapprovedTransactions=n.createDeepEqualSelector=void 0;var r=e("@metamask/transaction-controller"),a=e("lodash"),o=e("reselect");n.createDeepEqualSelector=(0,o.createSelectorCreator)(o.defaultMemoize,a.isEqual);n.filterAndShapeUnapprovedTransactions=e=>e.filter((({status:e})=>e===r.TransactionStatus.unapproved)).reduce(((e,t)=>(e[t.id]=t,e)),{})}}},{package:"$root$",file:"ui/selectors/util.js"}],[6476,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE_TRANSACTION_PARAMS=n.UPDATE_METAMASK_STATE=n.UPDATE_CUSTOM_NONCE=n.UNLOCK_SUCCEEDED=n.UNLOCK_IN_PROGRESS=n.UNLOCK_FAILED=n.TRANSACTION_ERROR=n.TOGGLE_NETWORK_MENU=n.TOGGLE_GAS_LOADING_ANIMATION=n.TOGGLE_CURRENCY_INPUT_SWITCH=n.TOGGLE_ACCOUNT_MENU=n.SHOW_SEND_TOKEN_PAGE=n.SHOW_PRIVATE_KEY=n.SHOW_NFT_STILL_FETCHING_INDICATION=n.SHOW_NFT_DETECTION_ENABLEMENT_TOAST=n.SHOW_LOADING=n.SHOW_KEYRING_SNAP_REMOVAL_RESULT=n.SHOW_IPFS_MODAL_OPEN=n.SHOW_IPFS_MODAL_CLOSE=n.SHOW_CONF_TX_PAGE=n.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN=n.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE=n.SHOW_ACCOUNTS_PAGE=n.SET_WEBHID_CONNECTED_STATUS=n.SET_SMART_TRANSACTIONS_ERROR=n.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE=n.SET_SELECTED_NETWORK_CONFIGURATION_ID=n.SET_REQUEST_ACCOUNT_TABS=n.SET_REMOVE_NFT_MESSAGE=n.SET_PENDING_TOKENS=n.SET_PARTICIPATE_IN_METAMETRICS=n.SET_OPEN_METAMASK_TAB_IDS=n.SET_NEXT_NONCE=n.SET_NEW_TOKENS_IMPORTED_ERROR=n.SET_NEW_TOKENS_IMPORTED=n.SET_NEW_NFT_ADDED_MESSAGE=n.SET_NEW_NETWORK_ADDED=n.SET_LEDGER_TRANSPORT_STATUS=n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=n.SET_FIRST_TIME_FLOW_TYPE=n.SET_EDIT_NETWORK=n.SET_DATA_COLLECTION_FOR_MARKETING=n.SET_CUSTOM_TOKEN_AMOUNT=n.SET_CURRENT_LOCALE=n.SET_CONFIRMATION_EXCHANGE_RATES=n.SET_ACCOUNT_LABEL=n.SET_ACCOUNT_DETAILS_ADDRESS=n.SELECTED_ADDRESS_CHANGED=n.SELECTED_ACCOUNT_CHANGED=n.RESET_ONBOARDING=n.QR_CODE_DETECTED=n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON=n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF=n.ONBOARDED_IN_THIS_UI_SESSION=n.NETWORK_DROPDOWN_OPEN=n.NETWORK_DROPDOWN_CLOSE=n.MODAL_OPEN=n.MODAL_CLOSE=n.LOCK_METAMASK=n.LOADING_METHOD_DATA_STARTED=n.LOADING_METHOD_DATA_FINISHED=n.IMPORT_TOKENS_POPOVER_OPEN=n.IMPORT_TOKENS_POPOVER_CLOSE=n.IMPORT_NFTS_MODAL_OPEN=n.IMPORT_NFTS_MODAL_CLOSE=n.HIDE_WHATS_NEW_POPUP=n.HIDE_WARNING=n.HIDE_NFT_STILL_FETCHING_INDICATION=n.HIDE_LOADING=n.HIDE_KEYRING_SNAP_REMOVAL_RESULT=n.GO_HOME=n.GAS_FEE_ESTIMATES_UPDATED=n.DISPLAY_WARNING=n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=n.DEPRECATED_NETWORK_POPOVER_OPEN=n.DEPRECATED_NETWORK_POPOVER_CLOSE=n.CONNECT_ACCOUNTS_MODAL_OPEN=n.CONNECT_ACCOUNTS_MODAL_CLOSE=n.COMPLETE_ONBOARDING=n.COMPLETED_TX=n.CLOSE_WELCOME_SCREEN=n.CLEAR_SWAP_AND_SEND_STATE=n.CLEAR_PENDING_TOKENS=n.CLEAR_ACCOUNT_DETAILS=n.CHAIN_CHANGED=n.CAPTURE_SINGLE_EXCEPTION=n.ALERT_OPEN=n.ALERT_CLOSE=n.ADDRESS_BOOK_UPDATED=n.ACCOUNT_CHANGED=void 0;n.GO_HOME="GO_HOME",n.MODAL_OPEN="UI_MODAL_OPEN",n.MODAL_CLOSE="UI_MODAL_CLOSE",n.SET_CONFIRMATION_EXCHANGE_RATES="SET_CONFIRMATION_EXCHANGE_RATES",n.ALERT_OPEN="UI_ALERT_OPEN",n.ALERT_CLOSE="UI_ALERT_CLOSE",n.QR_CODE_DETECTED="UI_QR_CODE_DETECTED",n.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN",n.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE",n.IMPORT_NFTS_MODAL_OPEN="UI_IMPORT_NFTS_MODAL_OPEN",n.IMPORT_NFTS_MODAL_CLOSE="UI_IMPORT_NFTS_MODAL_CLOSE",n.SHOW_IPFS_MODAL_OPEN="UI_IPFS_MODAL_OPEN",n.SHOW_IPFS_MODAL_CLOSE="UI_IPFS_MODAL_CLOSE",n.IMPORT_TOKENS_POPOVER_OPEN="UI_IMPORT_TOKENS_POPOVER_OPEN",n.IMPORT_TOKENS_POPOVER_CLOSE="UI_IMPORT_TOKENS_POPOVER_CLOSE",n.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN="SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN",n.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE="SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE",n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON",n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF",n.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE",n.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED",n.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED",n.ACCOUNT_CHANGED="ACCOUNT_CHANGED",n.CHAIN_CHANGED="CHAIN_CHANGED",n.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED",n.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED",n.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN",n.CLEAR_SWAP_AND_SEND_STATE="CLEAR_SWAP_AND_SEND_STATE",n.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS",n.UNLOCK_FAILED="UNLOCK_FAILED",n.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED",n.LOCK_METAMASK="LOCK_METAMASK",n.DISPLAY_WARNING="DISPLAY_WARNING",n.HIDE_WARNING="HIDE_WARNING",n.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION",n.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE",n.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE",n.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE",n.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY",n.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL",n.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS",n.SET_ACCOUNT_DETAILS_ADDRESS="SET_ACCOUNT_DETAILS_ADDRESS",n.COMPLETED_TX="COMPLETED_TX",n.TRANSACTION_ERROR="TRANSACTION_ERROR",n.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS",n.SET_NEXT_NONCE="SET_NEXT_NONCE",n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH",n.SHOW_LOADING="SHOW_LOADING_INDICATION",n.HIDE_LOADING="HIDE_LOADING_INDICATION",n.SHOW_NFT_STILL_FETCHING_INDICATION="SHOW_NFT_STILL_FETCHING_INDICATION",n.HIDE_NFT_STILL_FETCHING_INDICATION="HIDE_NFT_STILL_FETCHING_INDICATION",n.SHOW_NFT_DETECTION_ENABLEMENT_TOAST="SHOW_NFT_DETECTION_ENABLEMENT_TOAST",n.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU",n.TOGGLE_NETWORK_MENU="TOGGLE_NETWORK_MENU",n.DEPRECATED_NETWORK_POPOVER_OPEN="DEPRECATED_NETWORK_POPOVER_OPEN",n.DEPRECATED_NETWORK_POPOVER_CLOSE="DEPRECATED_NETWORK_POPOVER_CLOSE",n.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE",n.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS",n.SET_DATA_COLLECTION_FOR_MARKETING="SET_DATA_COLLECTION_FOR_MARKETING",n.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE",n.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING",n.RESET_ONBOARDING="RESET_ONBOARDING",n.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION",n.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS",n.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS",n.SET_PENDING_TOKENS="SET_PENDING_TOKENS",n.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS",n.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE",n.SET_SELECTED_NETWORK_CONFIGURATION_ID="SET_SELECTED_NETWORK_CONFIGURATION_ID",n.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED",n.SET_EDIT_NETWORK="SET_EDIT_NETWORK",n.SET_NEW_NFT_ADDED_MESSAGE="SET_NEW_NFT_ADDED_MESSAGE",n.SET_REMOVE_NFT_MESSAGE="SET_REMOVE_NFT_MESSAGE",n.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED",n.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED",n.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS",n.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS",n.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP",n.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION",n.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR",n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE",n.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH",n.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED",n.SET_NEW_TOKENS_IMPORTED_ERROR="SET_NEW_TOKENS_IMPORTED_ERROR",n.SET_CUSTOM_TOKEN_AMOUNT="SET_CUSTOM_TOKEN_AMOUNT",n.CONNECT_ACCOUNTS_MODAL_OPEN="UI_CONNECT_ACCOUNTS_MODAL_OPEN",n.CONNECT_ACCOUNTS_MODAL_CLOSE="UI_CONNECT_ACCOUNTS_MODAL_CLOSE",n.SHOW_KEYRING_SNAP_REMOVAL_RESULT="SHOW_KEYRING_SNAP_REMOVAL_RESULT",n.HIDE_KEYRING_SNAP_REMOVAL_RESULT="HIDE_KEYRING_SNAP_REMOVAL_RESULT",n.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE="SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE"}}},{package:"$root$",file:"ui/store/actionConstants.ts"}],[6477,{"../../app/scripts/lib/util":129,"../../shared/constants/app":4815,"../../shared/constants/hardware-wallets":4823,"../../shared/constants/metametrics":4827,"../../shared/lib/four-byte":4850,"../../shared/lib/switch-direction":4855,"../../shared/modules/conversion.utils":4865,"../../shared/modules/error":4868,"../../shared/modules/hexstring-utils":4872,"../../shared/modules/i18n":4873,"../../shared/modules/selectors":4883,"../../shared/modules/string-utils":4886,"../ducks/alerts/unconnected-account":5747,"../ducks/metamask/metamask":5759,"../ducks/send":5764,"../helpers/constants/notifications":5775,"../pages/swaps/swaps.util":6444,"../selectors":6464,"./actionConstants":6476,"./background-connection":6478,"@metamask/keyring-controller":1548,"@sentry/browser":2639,buffer:3319,"eth-rpc-errors":3544,lodash:4164,loglevel:4170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.abortTransactionSigning=function(e){return async t=>{try{await(0,C.submitRequestToBackground)("abortTransactionSigning",[e])}catch(e){t(te(e))}}},n.addImportedTokens=function(e,t){return async n=>{try{await(0,C.submitRequestToBackground)("addImportedTokens",[e,t])}catch(e){(0,w.logErrorWithMessage)(e)}finally{await oe(n)}}},n.addMorePermittedAccounts=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,C.callBackgroundMethod)("addMorePermittedAccounts",[e,t],(e=>{e?r(e):n()}))})),await oe(n)}},n.addNetwork=function(e){return async t=>{r.default.debug("background.addNetwork",e);try{return await(0,C.submitRequestToBackground)("addNetwork",[e])}catch(e){(0,w.logErrorWithMessage)(e),t(te("Had a problem adding networks!"))}return undefined}},n.addNewAccount=function(){return r.default.debug("background.addNewAccount"),async(e,t)=>{const n=(0,l.getInternalAccounts)(t()).filter((e=>e.metadata.keyring.type===i.KeyringTypes.hd));let r;e(X());try{r=await(0,C.submitRequestToBackground)("addNewAccount",[Object.keys(n).length])}catch(t){throw e(te(t)),t}finally{e(J())}return await oe(e),r}},n.addNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||r(X());try{await(0,C.submitRequestToBackground)("addNft",[e,t])}catch(e){(0,w.logErrorWithMessage)(e),r(te(e))}finally{await oe(r),r(J())}}},n.addNftVerifyOwnership=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||r(X());try{await(0,C.submitRequestToBackground)("addNftVerifyOwnership",[e,t])}catch(e){if((0,w.isErrorWithMessage)(e)&&(e.message.includes("This NFT is not owned by the user")||e.message.includes("Unable to verify ownership")))throw e;(0,w.logErrorWithMessage)(e),r(te(e))}finally{await oe(r),r(J())}}},n.addPermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,C.callBackgroundMethod)("addPermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await oe(n)}},n.addPollingTokenToAppState=ge,n.addToAddressBook=function(e,t="",n=""){return r.default.debug("background.addToAddressBook"),async(r,a)=>{const{chainId:o}=(0,f.getProviderConfig)(a());let s;try{s=await(0,C.submitRequestToBackground)("setAddressBook",[(0,m.toChecksumHexAddress)(e),t,o,n]),await oe(r)}catch(e){throw(0,w.logErrorWithMessage)(e),r(te("Address book failed to update")),e}s||r(te("Address book failed to update"))}},n.addToken=function({address:e,symbol:t,decimals:n,image:r,networkClientId:a},o){return async s=>{if(!e)throw new Error("MetaMask - Cannot add token without address");o||s(X());try{await(0,C.submitRequestToBackground)("addToken",[{address:e,symbol:t,decimals:n,image:r,networkClientId:a}])}catch(e){(0,w.logErrorWithMessage)(e),s(te(e))}finally{await oe(s),s(J())}}},n.addTransactionAndRouteToConfirmationPage=function(e,t){return async n=>{const a=(0,C.generateActionId)();try{r.default.debug("background.addTransaction");const o=await(0,C.submitRequestToBackground)("addTransaction",[e,{...t,actionId:a,origin:u.ORIGIN_METAMASK}]);return n(V()),o}catch(e){throw n(J()),n(te(e)),e}}},n.addTransactionAndWaitForPublish=async function(e,t){r.default.debug("background.addTransactionAndWaitForPublish");const n=(0,C.generateActionId)();return await(0,C.submitRequestToBackground)("addTransactionAndWaitForPublish",[e,{...t,origin:u.ORIGIN_METAMASK,actionId:n}])},n.approvePermissionsRequest=function(e){return t=>{(0,C.callBackgroundMethod)("approvePermissionsRequest",[e],(e=>{e&&t(te(e)),oe(t)}))}},n.attemptLedgerTransportCreation=async function(){return await(0,C.submitRequestToBackground)("attemptLedgerTransportCreation")},n.automaticallySwitchNetwork=function(e,t){return async n=>{await $(e),await n(Y({networkClientId:e,origin:t})),await oe(n)}},n.backupUserData=async function(){let e;try{e=await(0,C.submitRequestToBackground)("backupUserData")}catch(e){throw(0,w.logErrorWithMessage)(e),e}return e},n.cancelDecryptMsg=function(e){return async t=>{t(X());try{await(0,C.submitRequestToBackground)("cancelDecryptMessage",[e.id])}finally{t(J())}return await oe(t),t(L(e.id)),t(Q()),e}},n.cancelEncryptionPublicKeyMsg=function(e){return async t=>{t(X());try{await(0,C.submitRequestToBackground)("cancelEncryptionPublicKey",[e.id])}finally{t(J())}return await oe(t),t(L(e.id)),t(Q()),e}},n.cancelQRHardwareSignRequest=function(){return async e=>{e(J()),await(0,C.submitRequestToBackground)("cancelQRHardwareSignRequest")}},n.cancelSmartTransaction=function(e){return async t=>{try{await(0,C.submitRequestToBackground)("cancelSmartTransaction",[e])}catch(e){if((0,w.logErrorWithMessage)(e),(0,w.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const n=(0,E.parseSmartTransactionsError)(e.message);t({type:I.SET_SMART_TRANSACTIONS_ERROR,payload:n})}throw e}}},n.cancelSyncQRHardware=function(){return async e=>{e(J()),await(0,C.submitRequestToBackground)("cancelSyncQRHardware")}},n.cancelTx=function(e,t=!0){return n=>(t&&n(X()),new Promise(((t,n)=>{(0,C.callBackgroundMethod)("rejectPendingApproval",[String(e.id),s.ethErrors.provider.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))})).then((()=>oe(n))).then((()=>(n((0,g.resetSendState)()),n(L(e.id)),n(J()),n(Q()),e))).catch((e=>{throw n(J()),e})))},n.cancelTxs=function(e){return async t=>{t(X());try{const n=e.map((({id:e})=>e)),r=n.map((e=>new Promise(((t,n)=>{(0,C.callBackgroundMethod)("rejectPendingApproval",[String(e),s.ethErrors.provider.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))}))));await Promise.all(r),await oe(t),t((0,g.resetSendState)()),n.forEach((e=>{t(L(e))}))}finally{(0,d.getEnvironmentType)()===u.ENVIRONMENT_TYPE_NOTIFICATION?fe():t(J())}}},n.captureSingleException=function(e){return async(t,n)=>{const{singleExceptions:r}=n().appState;e in r||(t({type:I.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,a.captureException)(Error(e)))}},n.checkAccountsPresence=function(e){return async()=>{try{return await(0,C.submitRequestToBackground)("checkAccountsPresence",[e])}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.checkAndUpdateAllNftsOwnershipStatus=async function(){await(0,C.submitRequestToBackground)("checkAndUpdateAllNftsOwnershipStatus")},n.checkAndUpdateSingleNftOwnershipStatus=async function(e){await(0,C.submitRequestToBackground)("checkAndUpdateSingleNftOwnershipStatus",[e,!1])},n.checkHardwareStatus=function(e,t){return r.default.debug("background.checkHardwareStatus",e,t),async n=>{n(X());let r=!1;try{r=await(0,C.submitRequestToBackground)("checkHardwareStatus",[e,t])}catch(e){throw(0,w.logErrorWithMessage)(e),n(te(e)),e}finally{n(J())}return await oe(n),r}},n.clearAccountDetails=function(){return{type:I.CLEAR_ACCOUNT_DETAILS}},n.clearPendingTokens=function(){return{type:I.CLEAR_PENDING_TOKENS}},n.clearSmartTransactionFees=function(){(0,C.submitRequestToBackground)("clearSmartTransactionFees")},n.clearSwapsQuotes=function(){return async e=>{await(0,C.submitRequestToBackground)("clearSwapsQuotes"),await oe(e)}},n.clearSwitchedNetworkDetails=function(){return async e=>{await(0,C.submitRequestToBackground)("clearSwitchedNetworkDetails",[]),await oe(e)}},n.closeCurrentNotificationWindow=Q,n.closeNotificationPopup=fe,n.closeWelcomeScreen=function(){return{type:I.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=re,n.completedTx=L,n.connectHardware=function(e,t,n,a){return r.default.debug("background.connectHardware",e,t,n),async(r,s)=>{const{ledgerTransportType:i}=s().metamask;let c;r(X(`Looking for your ${(0,o.capitalize)(e)}...`));try{if(e===T.HardwareDeviceNames.ledger&&i===T.LedgerTransportTypes.webhid){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:T.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(T.LEDGER_USB_VENDOR_ID))))throw new Error(a("ledgerWebHIDNotConnectedErrorMessage"))}c=await(0,C.submitRequestToBackground)("connectHardware",[e,t,n])}catch(t){throw(0,w.logErrorWithMessage)(t),e===T.HardwareDeviceNames.ledger&&i===T.LedgerTransportTypes.webhid&&(0,w.isErrorWithMessage)(t)&&t.message.match("Failed to open the device")?(r(te(a("ledgerDeviceOpenFailureMessage"))),new Error(a("ledgerDeviceOpenFailureMessage"))):(e!==T.HardwareDeviceNames.qr&&r(te(t)),t)}finally{r(J())}return await oe(r),c}},n.createCancelTransaction=function(e,t,n={}){let a;return r.default.debug("background.createCancelTransaction"),r=>{const o=(0,C.generateActionId)();return new Promise(((s,i)=>{(0,C.callBackgroundMethod)("createCancelTransaction",[e,t,{...n,actionId:o}],((t,n)=>{var o;if(t)return null!=t&&null!==(o=t.message)&&void 0!==o&&o.includes("Previous transaction is already confirmed")&&r(z({name:"TRANSACTION_ALREADY_CONFIRMED",originalTransactionId:e})),r(te(t)),void i(t);if(n){const e=(0,l.getCurrentNetworkTransactions)({metamask:n}),{id:t}=e[e.length-1];a=t,s()}}))})).then((()=>oe(r))).then((()=>a))}},n.createEventFragment=function(e){const t=(0,C.generateActionId)();return(0,C.submitRequestToBackground)("createEventFragment",[{...e,actionId:t}])},n.createMetaMetricsDataDeletionTask=async function(){return await(0,C.submitRequestToBackground)("createMetaMetricsDataDeletionTask")},n.createNewVault=M,n.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(X());try{await M(e);return await P(e)}catch(e){throw t(te(e)),(0,w.isErrorWithMessage)(e)?new Error(e.message):e}finally{t(J())}}},n.createNewVaultAndRestore=function(e,n){return a=>{a(X()),r.default.debug("background.createNewVaultAndRestore");const o=Array.from(t.from(n,"utf8").values());return new Promise(((t,n)=>{(0,C.callBackgroundMethod)("createNewVaultAndRestore",[e,o],(e=>{e?n(e):t()}))})).then((()=>a(q()))).then((()=>{a(j()),a(J())})).catch((e=>(a(te(e.message)),a(J()),Promise.reject(e))))}},n.createOnChainTriggers=function(){return async()=>{try{await(0,C.submitRequestToBackground)("createOnChainTriggers")}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.createRetryTransaction=function(e,t){let n;return r=>new Promise(((a,o)=>{const s=(0,C.generateActionId)();(0,C.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{actionId:s}],((e,t)=>{if(e)return r(te(e)),void o(e);if(t){const e=(0,l.getCurrentNetworkTransactions)(t);n=e[e.length-1],a()}}))})).then((()=>oe(r))).then((()=>n))},n.createSpeedUpTransaction=function(e,t,n={}){let a;return r.default.debug("background.createSpeedUpTransaction"),r=>{const o=(0,C.generateActionId)();return new Promise(((s,i)=>{(0,C.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{...n,actionId:o}],((e,t)=>{if(e)return r(te(e)),void i(e);if(t){const e=(0,l.getCurrentNetworkTransactions)(t);a=e[e.length-1],s()}}))})).then((()=>oe(r))).then((()=>a))}},n.createTransactionEventFragment=function(e){const t=(0,C.generateActionId)();return(0,C.submitRequestToBackground)("createTransactionEventFragment",[{transactionId:e,actionId:t}])},n.currencyRateStartPollingByNetworkClientId=async function(e){const t=await(0,C.submitRequestToBackground)("currencyRateStartPollingByNetworkClientId",[e]);return await ge(t),t},n.currencyRateStopPollingByPollingToken=async function(e){await(0,C.submitRequestToBackground)("currencyRateStopPollingByPollingToken",[e]),await pe(e)},n.decodeTransactionData=async function({transactionData:e,contractAddress:t,chainId:n}){return await(0,C.submitRequestToBackground)("decodeTransactionData",[{transactionData:e,contractAddress:t,chainId:n}])},n.decryptMsg=function(e){return r.default.debug("action - decryptMsg"),async t=>{t(X()),r.default.debug("actions calling background.decryptMessage");try{await(0,C.submitRequestToBackground)("decryptMessage",[e])}catch(e){throw(0,w.logErrorWithMessage)(e),t(te(e)),e}finally{t(J())}return await oe(t),t(L(e.metamaskId)),t(Q()),e}},n.decryptMsgInline=function(e){return r.default.debug("action - decryptMsgInline"),async t=>{r.default.debug("actions calling background.decryptMessageInline");try{await(0,C.submitRequestToBackground)("decryptMessageInline",[e])}catch(e){throw(0,w.logErrorWithMessage)(e),t(te(e)),e}return(await oe(t)).unapprovedDecryptMsgs[e.metamaskId]}},n.deleteExpiredNotifications=function(){return async(e,t)=>{const n=t(),r=(0,l.getNotifications)(n).filter((e=>{const t=new Date(Date.now()-_.NOTIFICATIONS_EXPIRATION_DELAY);return Boolean(e.readDate&&new Date(e.readDate)<t)})).map((({id:e})=>e));r.length&&(await(0,C.submitRequestToBackground)("dismissNotifications",[r]),await oe(e))}},n.deleteInterface=function(e){return async t=>{await(0,C.submitRequestToBackground)("deleteInterface",[e]),await oe(t)}},n.deleteOnChainTriggersByAccount=function(e){return async()=>{try{await(0,C.submitRequestToBackground)("deleteOnChainTriggersByAccount",[e])}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.detectNfts=function(){return async e=>{e(Z()),r.default.debug("background.detectNfts");try{await(0,C.submitRequestToBackground)("detectNfts")}finally{e(ee())}await oe(e)}},n.detectTokens=function(){return async e=>{e(X()),r.default.debug("background.detectTokens"),await(0,C.submitRequestToBackground)("detectTokens"),e(J()),await oe(e)}},n.disableMetamaskNotifications=function(){return async()=>{try{await(0,C.submitRequestToBackground)("disableMetamaskNotifications")}catch(e){throw r.default.error(e),e}}},n.disableProfileSyncing=function(){return async()=>{try{await(0,C.submitRequestToBackground)("disableProfileSyncing")}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.disableSnap=function(e){return async t=>{await(0,C.submitRequestToBackground)("disableSnap",[e]),await oe(t)}},n.disconnectOriginFromSnap=function(e,t){return async n=>{await(0,C.submitRequestToBackground)("disconnectOriginFromSnap",[e,t]),await oe(n)}},n.dismissNotifications=function(e){return async t=>{await(0,C.submitRequestToBackground)("dismissNotifications",[e]),await oe(t)}},n.dismissSmartTransactionsErrorMessage=function(){return{type:I.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=te,n.enableMetamaskNotifications=function(){return async()=>{try{await(0,C.submitRequestToBackground)("enableMetamaskNotifications")}catch(e){throw r.default.error(e),e}}},n.enableProfileSyncing=function(){return async()=>{try{await(0,C.submitRequestToBackground)("enableProfileSyncing")}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.enableSnap=function(e){return async t=>{await(0,C.submitRequestToBackground)("enableSnap",[e]),await oe(t)}},n.encryptionPublicKeyMsg=function(e){return r.default.debug("action - encryptionPublicKeyMsg"),async t=>{t(X()),r.default.debug("actions calling background.encryptionPublicKey");try{await(0,C.submitRequestToBackground)("encryptionPublicKey",[e])}catch(e){throw(0,w.logErrorWithMessage)(e),t(te(e)),e}finally{t(J())}return await oe(t),t(L(e.metamaskId)),t(Q()),e}},n.endBackgroundTrace=async function(e){const t=e.timestamp||performance.timeOrigin+performance.now();await(0,C.submitRequestToBackground)("endTrace",[{...e,timestamp:t}])},n.estimateGas=function(e){return(0,C.submitRequestToBackground)("estimateGas",[e])},n.exportAccount=function(e,t,n,a){return function(o){return o(X()),r.default.debug("background.verifyPassword"),new Promise(((s,i)=>{(0,C.callBackgroundMethod)("verifyPassword",[e],(function(c){if(c)return r.default.error("Error in verifying password."),o(J()),o(te("Incorrect Password.")),void i(c);r.default.debug("background.exportAccount"),(0,C.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(o(J()),e)return(0,w.logErrorWithMessage)(e),o(te("Had a problem exporting the account.")),void i(e);n(t),a(!0),s(t)}))}))}))}},n.exportAccounts=function(e,t){return function(n){return r.default.debug("background.verifyPassword"),new Promise(((a,o)=>{(0,C.callBackgroundMethod)("verifyPassword",[e],(function(s){if(s)return r.default.error("Error in submitting password."),void o(s);r.default.debug("background.exportAccounts");const i=t.map((t=>new Promise(((r,a)=>(0,C.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(e)return(0,w.logErrorWithMessage)(e),n(te("Had a problem exporting the account.")),void a(e);r(t)}))))));a(Promise.all(i))}))}))}},n.fetchAndSetQuotes=function(e,t){return async n=>{const[r,a]=await(0,C.submitRequestToBackground)("fetchAndSetQuotes",[e,t]);return await oe(n),[r,a]}},n.fetchAndUpdateMetamaskNotifications=function(){return async()=>{try{return await(0,C.submitRequestToBackground)("fetchAndUpdateMetamaskNotifications")}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.fetchSmartTransactionFees=function(e,t){return async n=>{t&&(t.value="0x0");try{const r=await await(0,C.submitRequestToBackground)("fetchSmartTransactionFees",[e,t]);return n({type:I.SET_SMART_TRANSACTIONS_ERROR,payload:null}),r}catch(e){if((0,w.logErrorWithMessage)(e),(0,w.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,E.parseSmartTransactionsError)(e.message);n({type:I.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await(0,C.submitRequestToBackground)("fetchSmartTransactionsLiveness")}catch(e){(0,w.logErrorWithMessage)(e)}}},n.finalizeEventFragment=function(e,t){return(0,C.submitRequestToBackground)("finalizeEventFragment",[e,t])},n.forceUpdateMetamaskState=oe,n.forgetDevice=function(e){return r.default.debug("background.forgetDevice",e),async t=>{t(X());try{await(0,C.submitRequestToBackground)("forgetDevice",[e])}catch(e){throw(0,w.logErrorWithMessage)(e),t(te(e)),e}finally{t(J())}await oe(t)}},n.gasFeeStartPollingByNetworkClientId=async function(e){const t=await(0,C.submitRequestToBackground)("gasFeeStartPollingByNetworkClientId",[e]);return await ge(t),t},n.gasFeeStopPollingByPollingToken=async function(e){await(0,C.submitRequestToBackground)("gasFeeStopPollingByPollingToken",[e]),await pe(e)},n.getBalancesInSingleCall=async function(e,t,n){return await(0,C.submitRequestToBackground)("getBalancesInSingleCall",[e,t,n])},n.getContractMethodData=function(e=""){return async(t,n)=>{const a=(0,d.addHexPrefix)(e).slice(0,10);if(a.length<10)return{};const{knownMethodData:o,use4ByteResolution:s}=n().metamask;if(null!=o&&o[a]&&0!==Object.keys(o[a]).length)return o[a];r.default.debug("loadingMethodData");const{name:i,params:c}=await(0,k.getMethodDataAsync)(a,s);return(0,C.callBackgroundMethod)("addKnownMethodData",[a,{name:i,params:c}],(e=>{e&&t(te(e))})),{name:i,params:c}}},n.getCurrentNetworkEIP1559Compatibility=async function(){let e;try{e=await(0,C.submitRequestToBackground)("getCurrentNetworkEIP1559Compatibility")}catch(e){console.error(e)}return e},n.getGasFeeTimeEstimate=function(e,t){return(0,C.submitRequestToBackground)("getGasFeeTimeEstimate",[e,t])},n.getLastInteractedConfirmationInfo=async function(){return await(0,C.submitRequestToBackground)("getLastInteractedConfirmationInfo")},n.getLayer1GasFee=function({chainId:e,networkClientId:t,transactionParams:n}){return async()=>await(0,C.submitRequestToBackground)("getLayer1GasFee",[{chainId:e,networkClientId:t,transactionParams:n}])},n.getNFTContractInfo=async function(e,t){return await(0,C.submitRequestToBackground)("getNFTContractInfo",[e,t])},n.getNetworkConfigurationByNetworkClientId=async function(e){let t;try{t=await(0,C.submitRequestToBackground)("getNetworkConfigurationByNetworkClientId",[e])}catch(e){console.error(e)}return t},n.getNextAvailableAccountName=async function(e){return await(0,C.submitRequestToBackground)("getNextAvailableAccountName",[e])},n.getNextNonce=function(){return async(e,t)=>{const{address:n}=(0,l.getSelectedInternalAccount)(t()),r=(0,l.getSelectedNetworkClientId)(t());let a;try{a=await(0,C.submitRequestToBackground)("getNextNonce",[n,r])}catch(t){throw e(te(t)),t}return e(ue(a)),a}},n.getOpenMetamaskTabsIds=function(){return async e=>{e(le(await(0,C.submitRequestToBackground)("getOpenMetamaskTabsIds")))}},n.getPhishingResult=async function(e){return await(0,C.submitRequestToBackground)("getPhishingResult",[e])},n.getRequestAccountTabIds=function(){return async e=>{e(de(await(0,C.submitRequestToBackground)("getRequestAccountTabIds")))}},n.getRpcMethodPreferences=function(){return async e=>{e(X()),await(0,C.submitRequestToBackground)("getRpcMethodPreferences",[]),e(J())}},n.getSeedPhrase=P,n.getSnapAccountsById=async function(e){return await(0,C.submitRequestToBackground)("getAccountsBySnapId",[e])},n.getTokenStandardAndDetails=async function(e,t,n){return await(0,C.submitRequestToBackground)("getTokenStandardAndDetails",[e,t,n])},n.getTokenSymbol=async function(e){return await(0,C.submitRequestToBackground)("getTokenSymbol",[e])},n.getTransactions=async function(e={}){return await(0,C.submitRequestToBackground)("getTransactions",[e])},n.goHome=b,n.handleSnapRequest=async function(e){return(0,C.submitRequestToBackground)("handleSnapRequest",[e])},n.hideAccountBanner=function(){return(0,C.submitRequestToBackground)("setShowAccountBanner",[!1])},n.hideAlert=function(){return{type:I.ALERT_CLOSE}},n.hideBetaHeader=function(){return(0,C.submitRequestToBackground)("setShowBetaHeader",[!1])},n.hideDeprecatedNetworkModal=function(){return{type:I.DEPRECATED_NETWORK_POPOVER_CLOSE}},n.hideImportNftsModal=function(){return{type:I.IMPORT_NFTS_MODAL_CLOSE}},n.hideImportTokensModal=function(){return{type:I.IMPORT_TOKENS_POPOVER_CLOSE}},n.hideIpfsModal=function(){return{type:I.SHOW_IPFS_MODAL_CLOSE}},n.hideKeyringRemovalResultModal=function(){return{type:I.HIDE_KEYRING_SNAP_REMOVAL_RESULT}},n.hideLoadingIndication=J,n.hideModal=function(){return{type:I.MODAL_CLOSE}},n.hideNetworkBanner=function(){return(0,C.submitRequestToBackground)("setShowNetworkBanner",[!1])},n.hideNetworkDropdown=function(){return{type:I.NETWORK_DROPDOWN_CLOSE}},n.hideNftStillFetchingIndication=ee,n.hidePermissionsTour=function(){return(0,C.submitRequestToBackground)("setShowPermissionsTour",[!1])},n.hideTestNetMessage=function(){return(0,C.submitRequestToBackground)("setShowTestnetMessageInDropdown",[!1])},n.hideWarning=function(){return{type:I.HIDE_WARNING}},n.ignoreTokens=function({tokensToIgnore:e,dontShowLoadingIndicator:t=!1}){const n=Array.isArray(e)?e:[e];return async e=>{t||e(X());try{await(0,C.submitRequestToBackground)("ignoreTokens",[n])}catch(t){(0,w.logErrorWithMessage)(t),e(te(t))}finally{await oe(e),e(J())}}},n.importNewAccount=function(e,t,n){return async a=>{a(X(n));try{r.default.debug("background.importAccountWithStrategy"),await(0,C.submitRequestToBackground)("importAccountWithStrategy",[e,t])}finally{a(J())}return await oe(a)}},n.isNftOwner=async function(e,t,n){return await(0,C.submitRequestToBackground)("isNftOwner",[e,t,n])},n.lockMetamask=function(){return r.default.debug("background.setLocked"),e=>(e(X()),x().then((()=>oe(e))).catch((t=>(e(te(t.message)),Promise.reject(t)))).then((()=>{e(J()),e({type:I.LOCK_METAMASK})})).catch((()=>{e(J()),e({type:I.LOCK_METAMASK})})))},n.markMetamaskNotificationsAsRead=function(e){return async()=>{try{await(0,C.submitRequestToBackground)("markMetamaskNotificationsAsRead",[e])}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.markNotificationsAsRead=function(e){return async t=>{await(0,C.submitRequestToBackground)("markNotificationsAsRead",[e]),await oe(t)}},n.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>{(0,C.callBackgroundMethod)("markPasswordForgotten",[],(n=>{n?t(n):e()}))}))}finally{e(J()),await oe(e)}}},n.multichainUpdateBalance=async function(e){return await(0,C.submitRequestToBackground)("multichainUpdateBalance",[e])},n.multichainUpdateBalances=async function(){return await(0,C.submitRequestToBackground)("multichainUpdateBalances",[])},n.neverShowSwitchedNetworkMessage=function(){return(0,C.submitRequestToBackground)("setSwitchedNetworkNeverShowMessage",[!0])},n.performSignIn=function(){return async()=>{try{await(0,C.submitRequestToBackground)("performSignIn")}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred during sign-in.";throw(0,w.logErrorWithMessage)(t),e}}},n.performSignOut=function(){return async()=>{try{await(0,C.submitRequestToBackground)("performSignOut")}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.qrCodeDetected=function(e){return async t=>{await t({type:I.QR_CODE_DETECTED,value:e}),t((0,g.computeEstimatedGasLimit)())}},n.rejectAllMessages=function(e){return async t=>{const n=(0,s.serializeError)(s.ethErrors.provider.userRejectedRequest());await Promise.all(e.map((async({id:e})=>await(0,C.submitRequestToBackground)("rejectPendingApproval",[e,n]))));const{pendingApprovals:r}=await oe(t);0===Object.values(r).length&&t(Q())}},n.rejectPendingApproval=function(e,t){return async n=>{await(0,C.submitRequestToBackground)("rejectPendingApproval",[e,t]);const{pendingApprovals:r}=await oe(n);0===Object.values(r).length&&n(Q())}},n.rejectPermissionsRequest=function(e){return t=>new Promise(((n,r)=>{(0,C.callBackgroundMethod)("rejectPermissionsRequest",[e],(e=>{if(e)return t(te(e)),void r(e);oe(t).then(n).catch(r)}))}))},n.removeAccount=function(e){return async t=>{t(X());try{await new Promise(((t,n)=>{(0,C.callBackgroundMethod)("removeAccount",[e],((e,r)=>{e?n(e):t(r)}))})),await oe(t)}catch(e){throw t(te(e)),e}finally{t(J())}r.default.info(`Account removed: ${e}`),t(j())}},n.removeAndIgnoreNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot ignore NFT without address");if(!t)throw new Error("MetaMask - Cannot ignore NFT without tokenID");n||r(X());try{await(0,C.submitRequestToBackground)("removeAndIgnoreNft",[e,t])}catch(e){throw(0,w.logErrorWithMessage)(e),r(te(e)),e}finally{await oe(r),r(J())}}},n.removeFromAddressBook=function(e,t){return r.default.debug("background.removeFromAddressBook"),async n=>{await(0,C.submitRequestToBackground)("removeFromAddressBook",[e,(0,m.toChecksumHexAddress)(t)]),await oe(n)}},n.removeNetwork=function(e){return async()=>{try{await(0,C.submitRequestToBackground)("removeNetwork",[e])}catch(e){(0,w.logErrorWithMessage)(e)}}},n.removeNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot remove NFT without address");if(!t)throw new Error("MetaMask - Cannot remove NFT without tokenID");n||r(X());try{await(0,C.submitRequestToBackground)("removeNft",[e,t])}catch(e){(0,w.logErrorWithMessage)(e),r(te(e))}finally{await oe(r),r(J())}}},n.removePermissionsFor=function(e){return t=>{(0,C.callBackgroundMethod)("removePermissionsFor",[e],(e=>{e&&t(te(e))}))}},n.removePermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,C.callBackgroundMethod)("removePermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await oe(n)}},n.removePollingTokenFromAppState=pe,n.removeSnap=function(e){return async(t,n)=>{var r;t(X());const a=(null===(r=(0,l.getPermissionSubjects)(n())[e])||void 0===r||null===(r=r.permissions)||void 0===r?void 0:r.snap_manageAccounts)!==undefined;try{if(a){const t=await(0,C.submitRequestToBackground)("getAccountsBySnapId",[e]);for(const e of t)await(0,C.submitRequestToBackground)("removeAccount",[e])}await(0,C.submitRequestToBackground)("removeSnap",[e]),await oe(t)}catch(e){throw t(te(e)),e}finally{t(J())}}},n.requestAccountsPermissionWithId=function(e){return async t=>{const n=await(0,C.submitRequestToBackground)("requestAccountsPermissionWithId",[e]);return await oe(t),n}},n.requestRevealSeedWords=function(e){return async t=>{t(X()),r.default.debug("background.verifyPassword");try{await D(e);return await P(e)}finally{t(J())}}},n.requestUserApproval=function({origin:e,type:t,requestData:n}){return async r=>{try{await(0,C.submitRequestToBackground)("requestUserApproval",[{origin:e,type:t,requestData:n}])}catch(e){(0,w.logErrorWithMessage)(e),r(te("Had trouble requesting user approval"))}}},n.resetAccount=function(){return e=>(e(X()),new Promise(((t,n)=>{(0,C.callBackgroundMethod)("resetAccount",[],((a,o)=>{if(e(J()),a)return(0,w.isErrorWithMessage)(a)&&e(te(a.message)),void n(a);r.default.info(`Transaction history reset for ${o}`),e(j()),t(o)}))})))},n.resetBackgroundSwapsState=function(){return async e=>{await(0,C.submitRequestToBackground)("resetSwapsState"),await oe(e)}},n.resetOnboarding=function(){return async e=>{try{await e(ce(!1)),e(ae())}catch(e){console.error(e)}}},n.resetOnboardingAction=ae,n.resetSwapsPostFetchState=function(){return async e=>{await(0,C.submitRequestToBackground)("resetPostFetchState"),await oe(e)}},n.resetViewedNotifications=function(){return(0,C.submitRequestToBackground)("resetViewedNotifications")},n.resolvePendingApproval=function(e,t){return async n=>{await(0,C.submitRequestToBackground)("resolvePendingApproval",[e,t]);const{pendingApprovals:r}=await oe(n);0===Object.values(r).length&&n(Q())}},n.restoreUserData=async function(e){try{await(0,C.submitRequestToBackground)("restoreUserData",[e])}catch(e){throw(0,w.logErrorWithMessage)(e),e}return!0},n.revokeDynamicSnapPermissions=function(e,t){return async n=>{await(0,C.submitRequestToBackground)("revokeDynamicSnapPermissions",[e,t]),await oe(n)}},n.rollbackToPreviousProvider=function(){return async e=>{try{await(0,C.submitRequestToBackground)("rollbackToPreviousProvider")}catch(t){(0,w.logErrorWithMessage)(t),e(te("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async e=>{await(0,C.submitRequestToBackground)("safeRefetchQuotes"),await oe(e)}},n.setAccountDetailsAddress=function(e){return{type:I.SET_ACCOUNT_DETAILS_ADDRESS,payload:e}},n.setAccountLabel=function(e,t){return n=>(n(X()),r.default.debug("background.setAccountLabel"),new Promise(((r,a)=>{(0,C.callBackgroundMethod)("setAccountLabel",[e,t],(o=>{if(n(J()),o)return n(te(o)),void a(o);n({type:I.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),r(e)}))})))},n.setActiveNetwork=function(e){return async t=>{r.default.debug(`background.setActiveNetwork: ${e}`);try{await(0,C.submitRequestToBackground)("setActiveNetwork",[e])}catch(e){(0,w.logErrorWithMessage)(e),t(te("Had a problem changing networks!"))}}},n.setActiveNetworkConfigurationId=$,n.setAddSnapAccountEnabled=async function(e){try{await(0,C.submitRequestToBackground)("setAddSnapAccountEnabled",[e])}catch(e){(0,w.logErrorWithMessage)(e)}},n.setAdvancedGasFee=function(e){return t=>{t(X()),r.default.debug("background.setAdvancedGasFee"),(0,C.callBackgroundMethod)("setAdvancedGasFee",[e],(e=>{t(J()),e&&t(te(e))}))}},n.setAlertEnabledness=async function(e,t){await(0,C.submitRequestToBackground)("setAlertEnabledness",[e,t])},n.setAutoLockTimeLimit=function(e){return ne("autoLockTimeLimit",e)},n.setBackgroundSwapRouteState=function(e){return async t=>{await(0,C.submitRequestToBackground)("setBackgroundSwapRouteState",[e]),await oe(t)}},n.setBitcoinSupportEnabled=async function(e){try{await(0,C.submitRequestToBackground)("setBitcoinSupportEnabled",[e])}catch(e){(0,w.logErrorWithMessage)(e)}},n.setBitcoinTestnetSupportEnabled=async function(e){try{await(0,C.submitRequestToBackground)("setBitcoinTestnetSupportEnabled",[e])}catch(e){(0,w.logErrorWithMessage)(e)}},n.setCompletedOnboarding=function(){return async e=>{e(X());try{await(0,C.submitRequestToBackground)("completeOnboarding"),e(re())}catch(t){throw e(te(t)),t}finally{e(J())}}},n.setConfirmationAdvancedDetailsOpen=function(e){return ne("showConfirmationAdvancedDetails",e)},n.setConfirmationExchangeRates=function(e){return{type:I.SET_CONFIRMATION_EXCHANGE_RATES,value:e}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{(0,C.callBackgroundMethod)("setConnectedStatusPopoverHasBeenShown",[],(e=>{if((0,w.isErrorWithMessage)(e))throw new Error(e.message)}))}},n.setCurrentCurrency=function(e){return async t=>{t(X()),r.default.debug("background.setCurrentCurrency");try{await(0,C.submitRequestToBackground)("setCurrentCurrency",[e]),await oe(t)}catch(e){return(0,w.logErrorWithMessage)(e),void t(te(e))}finally{t(J())}}},n.setCurrentExtensionPopupId=function(e){return async t=>{await(0,C.submitRequestToBackground)("setCurrentExtensionPopupId",[e]),await oe(t)}},n.setCurrentLocale=ie,n.setCustomApproveTxData=function(e){return async t=>{await(0,C.submitRequestToBackground)("setCustomApproveTxData",[e]),await oe(t)}},n.setDataCollectionForMarketing=function(e){return async t=>{r.default.debug("background.setDataCollectionForMarketing"),await(0,C.submitRequestToBackground)("setDataCollectionForMarketing",[e]),t({type:I.SET_DATA_COLLECTION_FOR_MARKETING,value:e})}},n.setDefaultHomeActiveTabName=function(e){return async t=>{await(0,C.submitRequestToBackground)("setDefaultHomeActiveTabName",[e]),await oe(t)}},n.setDismissSeedBackUpReminder=function(e){return async t=>{t(X()),await(0,C.submitRequestToBackground)("setDismissSeedBackUpReminder",[e]),t(J())}},n.setEditedNetwork=function(e=undefined){return{type:I.SET_EDIT_NETWORK,payload:e}},n.setFeatureAnnouncementsEnabled=function(e){return async()=>{try{await(0,C.submitRequestToBackground)("setFeatureAnnouncementsEnabled",[e])}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.setFeatureFlag=function(e,t,n){return r=>(r(X()),new Promise(((a,o)=>{(0,C.callBackgroundMethod)("setFeatureFlag",[e,t],((e,t)=>{if(r(J()),e)return r(te(e)),void o(e);n&&r(z({name:n})),a(t)}))})))},n.setFeatureNotificationsEnabled=function(e){return ne("featureNotificationsEnabled",e)},n.setFirstTimeFlowType=function(e){return async t=>{try{r.default.debug("background.setFirstTimeFlowType"),await(0,C.submitRequestToBackground)("setFirstTimeFlowType",[e]),t({type:I.SET_FIRST_TIME_FLOW_TYPE,value:e})}catch(e){t(te(e))}}},n.setFirstTimeUsedNetwork=function(e){return(0,C.submitRequestToBackground)("setFirstTimeUsedNetwork",[e])},n.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:I.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,payload:{device:e,path:t}}},n.setHideZeroBalanceTokens=function(e){return ne("hideZeroBalanceTokens",e)},n.setIncomingTransactionsPreferences=function(e,t){return async n=>{n(X()),r.default.debug("background.setIncomingTransactionsPreferences"),await(0,C.submitRequestToBackground)("setIncomingTransactionsPreferences",[e,t]),n(J())}},n.setInitialGasEstimate=function(e){return async t=>{await(0,C.submitRequestToBackground)("setInitialGasEstimate",[e]),await oe(t)}},n.setIpfsGateway=function(e){return t=>{r.default.debug("background.setIpfsGateway"),(0,C.callBackgroundMethod)("setIpfsGateway",[e],(e=>{e&&t(te(e))}))}},n.setIsIpfsGatewayEnabled=function(e){return t=>{r.default.debug("background.setIsIpfsGatewayEnabled"),(0,C.callBackgroundMethod)("setIsIpfsGatewayEnabled",[e],(e=>{e&&t(te(e))}))}},n.setIsProfileSyncingEnabled=function(e){return async t=>{try{t(X()),await(0,C.submitRequestToBackground)("setIsProfileSyncingEnabled",[e]),t(J())}catch(e){throw(0,w.logErrorWithMessage)(e),e}finally{t(J())}}},n.setLastActiveTime=function(){return e=>{(0,C.callBackgroundMethod)("setLastActiveTime",[],(t=>{t&&e(te(t))}))}},n.setLastInteractedConfirmationInfo=async function(e){return await(0,C.submitRequestToBackground)("setLastInteractedConfirmationInfo",[e])},n.setName=function(e){return async()=>{await(0,C.submitRequestToBackground)("setName",[e])}},n.setNetworkClientIdForDomain=function(e,t){return(0,C.submitRequestToBackground)("setNetworkClientIdForDomain",[e,t])},n.setNewNetworkAdded=function({networkConfigurationId:e,nickname:t}){return{type:I.SET_NEW_NETWORK_ADDED,payload:{networkConfigurationId:e,nickname:t}}},n.setNewNftAddedMessage=function(e){return{type:I.SET_NEW_NFT_ADDED_MESSAGE,payload:e}},n.setNewPrivacyPolicyToastClickedOrClosed=function(){return async()=>{await(0,C.submitRequestToBackground)("setNewPrivacyPolicyToastClickedOrClosed")}},n.setNewPrivacyPolicyToastShownDate=function(e){return async()=>{await(0,C.submitRequestToBackground)("setNewPrivacyPolicyToastShownDate",[e])}},n.setNewTokensImported=function(e){return{type:I.SET_NEW_TOKENS_IMPORTED,payload:e}},n.setNewTokensImportedError=function(e){return{type:I.SET_NEW_TOKENS_IMPORTED_ERROR,payload:e}},n.setNextNonce=ue,n.setOnboardingDate=function(){return async()=>{await(0,C.submitRequestToBackground)("setOnboardingDate")}},n.setOpenMetamaskTabsIDs=le,n.setOpenSeaEnabled=function(e){return async t=>{t(X()),r.default.debug("background.setOpenSeaEnabled");try{await(0,C.submitRequestToBackground)("setOpenSeaEnabled",[e])}finally{t(J())}}},n.setOutdatedBrowserWarningLastShown=function(e){return async()=>{await(0,C.submitRequestToBackground)("setOutdatedBrowserWarningLastShown",[e])}},n.setParticipateInMetaMetrics=function(e){return t=>(r.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,a)=>{(0,C.callBackgroundMethod)("setParticipateInMetaMetrics",[e],((o,s)=>{if(r.default.debug(o),o)return t(te(o)),void a(o);t({type:I.SET_PARTICIPATE_IN_METAMETRICS,value:e}),n([e,s])}))})))},n.setPendingTokens=function(e){const{customToken:t,selectedTokens:n={},tokenAddressList:r=[]}=e,a=null!=t&&t.address&&null!=t&&t.symbol&&Boolean((null==t?void 0:t.decimals)>=0&&(null==t?void 0:t.decimals)<=36)?{...n,[t.address]:{...t,isCustom:!0}}:n;return Object.keys(a).forEach((e=>{const t=r.find((t=>(0,h.isEqualCaseInsensitive)(t,e)));a[e]={...a[e],unlisted:!t}})),{type:I.SET_PENDING_TOKENS,payload:a}},n.setPetnamesEnabled=function(e){return ne("petnamesEnabled",e)},n.setPreference=ne,n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{(0,C.callBackgroundMethod)("setRecoveryPhraseReminderHasBeenShown",[],(e=>{if((0,w.isErrorWithMessage)(e))throw new Error(e.message)}))}},n.setRecoveryPhraseReminderLastShown=function(e){return()=>{(0,C.callBackgroundMethod)("setRecoveryPhraseReminderLastShown",[e],(e=>{if((0,w.isErrorWithMessage)(e))throw new Error(e.message)}))}},n.setRedesignedConfirmationsDeveloperEnabled=function(e){return ne("isRedesignedConfirmationsDeveloperEnabled",e)},n.setRedesignedConfirmationsEnabled=function(e){return ne("redesignedConfirmationsEnabled",e)},n.setRedesignedTransactionsEnabled=function(e){return ne("redesignedTransactionsEnabled",e)},n.setRemoveNftMessage=function(e){return{type:I.SET_REMOVE_NFT_MESSAGE,payload:e}},n.setRequestAccountTabIds=de,n.setSecurityAlertsEnabled=function(e){try{(0,C.submitRequestToBackground)("setSecurityAlertsEnabled",[e])}catch(e){(0,w.logErrorWithMessage)(e)}},n.setSeedPhraseBackedUp=ce,n.setSelectedAccount=function(e){return async(t,n)=>{t(X()),r.default.debug("background.setSelectedAccount");const a=n(),o=(0,f.getUnconnectedAccountAlertEnabledness)(a),s=a.activeTab.origin,i=(0,l.getInternalAccountByAddress)(a,e),c=(0,l.getPermittedAccountsForCurrentTab)(a),u=Boolean(s)&&c.includes(i.address),d=Boolean(s)&&c.includes(e),g=u&&!d;try{await K(i.id),await oe(t)}catch(e){return void t(te(e))}finally{t(J())}o&&g&&(t((0,p.switchedToUnconnectedAccount)()),await Te(s))}},n.setSelectedInternalAccount=function(e){return async t=>{t(X()),r.default.debug("background.setSelectedInternalAccount");try{await K(e)}catch(e){return void t(te(e))}finally{t(J())}}},n.setSelectedNetworkConfigurationId=function(e){return{type:I.SET_SELECTED_NETWORK_CONFIGURATION_ID,payload:e}},n.setSelectedQuoteAggId=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSelectedQuoteAggId",[e]),await oe(t)}},n.setServiceWorkerKeepAlivePreference=function(e){return async t=>{t(X()),r.default.debug("background.setServiceWorkerKeepAlivePreference");try{await(0,C.submitRequestToBackground)("setServiceWorkerKeepAlivePreference",[e])}catch(e){t(te(e))}finally{t(J())}}},n.setShowExtensionInFullSizeView=function(e){return ne("showExtensionInFullSizeView",e)},n.setShowFiatConversionOnTestnetsPreference=function(e){return ne("showFiatInTestnets",e)},n.setShowMultiRpcModal=function(e){return ne("showMultiRpcModal",e)},n.setShowNftDetectionEnablementToast=function(e){return{type:I.SHOW_NFT_DETECTION_ENABLEMENT_TOAST,payload:e}},n.setShowTestNetworks=function(e){return ne("showTestNetworks",e)},n.setSmartTransactionsOptInStatus=function(e){return async(t,n)=>{const r=(0,y.getSmartTransactionsOptInStatus)(n());me({category:S.MetaMetricsEventCategory.Settings,event:S.MetaMetricsEventName.SettingsUpdated,properties:{stx_opt_in:e,prev_stx_opt_in:r}}),await t(ne("smartTransactionsOptInStatus",e)),await oe(t)}},n.setSmartTransactionsRefreshInterval=function(e){return async()=>{try{await(0,C.submitRequestToBackground)("setStatusRefreshInterval",[e])}catch(e){(0,w.logErrorWithMessage)(e)}}},n.setSnapsAddSnapAccountModalDismissed=async function(){await(0,C.submitRequestToBackground)("setSnapsAddSnapAccountModalDismissed",[!0])},n.setSnapsInstallPrivacyWarningShownStatus=function(e){return async()=>{await(0,C.submitRequestToBackground)("setSnapsInstallPrivacyWarningShownStatus",[e])}},n.setSurveyLinkLastClickedOrClosed=function(e){return async()=>{await(0,C.submitRequestToBackground)("setSurveyLinkLastClickedOrClosed",[e])}},n.setSwapsErrorKey=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsErrorKey",[e]),await oe(t)}},n.setSwapsFeatureFlags=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsFeatureFlags",[e]),await oe(t)}},n.setSwapsLiveness=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsLiveness",[e]),await oe(t)}},n.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsQuotesPollingLimitEnabled",[e]),await oe(t)}},n.setSwapsTokens=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsTokens",[e]),await oe(t)}},n.setSwapsTxGasLimit=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await oe(t)}},n.setSwapsTxGasPrice=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsTxGasPrice",[e]),await oe(t)}},n.setSwitchedNetworkDetails=Y,n.setTermsOfUseLastAgreed=function(e){return async()=>{await(0,C.submitRequestToBackground)("setTermsOfUseLastAgreed",[e])}},n.setTheme=function(e){return async t=>{t(X()),r.default.debug("background.setTheme");try{await(0,C.submitRequestToBackground)("setTheme",[e])}finally{t(J())}}},n.setUnconnectedAccountAlertShown=Te,n.setUse4ByteResolution=function(e){return async t=>{t(X()),r.default.debug("background.setUse4ByteResolution");try{await(0,C.submitRequestToBackground)("setUse4ByteResolution",[e])}catch(e){t(te(e))}finally{t(J())}}},n.setUseAddressBarEnsResolution=function(e){return t=>{r.default.debug("background.setUseAddressBarEnsResolution"),(0,C.callBackgroundMethod)("setUseAddressBarEnsResolution",[e],(e=>{e&&t(te(e))}))}},n.setUseBlockie=function(e){return t=>{t(X()),r.default.debug("background.setUseBlockie"),(0,C.callBackgroundMethod)("setUseBlockie",[e],(e=>{t(J()),e&&t(te(e))}))}},n.setUseCurrencyRateCheck=function(e){return t=>{t(X()),r.default.debug("background.setUseCurrencyRateCheck"),(0,C.callBackgroundMethod)("setUseCurrencyRateCheck",[e],(e=>{t(J()),e&&t(te(e))}))}},n.setUseExternalNameSources=function(e){try{(0,C.submitRequestToBackground)("setUseExternalNameSources",[e])}catch(e){(0,w.logErrorWithMessage)(e)}},n.setUseMultiAccountBalanceChecker=function(e){return t=>{t(X()),r.default.debug("background.setUseMultiAccountBalanceChecker"),(0,C.callBackgroundMethod)("setUseMultiAccountBalanceChecker",[e],(e=>{t(J()),e&&t(te(e))}))}},n.setUseNativeCurrencyAsPrimaryCurrencyPreference=function(e){return ne("useNativeCurrencyAsPrimaryCurrency",e)},n.setUseNftDetection=function(e){return async t=>{t(X()),r.default.debug("background.setUseNftDetection");try{await(0,C.submitRequestToBackground)("setUseNftDetection",[e])}finally{t(J())}}},n.setUseNonceField=function(e){return async t=>{t(X()),r.default.debug("background.setUseNonceField");try{await(0,C.submitRequestToBackground)("setUseNonceField",[e])}catch(e){t(te(e))}t(J())}},n.setUsePhishDetect=function(e){return t=>{t(X()),r.default.debug("background.setUsePhishDetect"),(0,C.callBackgroundMethod)("setUsePhishDetect",[e],(e=>{t(J()),e&&t(te(e))}))}},n.setUseRequestQueue=function(e){try{(0,C.submitRequestToBackground)("setUseRequestQueue",[e])}catch(e){(0,w.logErrorWithMessage)(e)}},n.setUseSafeChainsListValidation=function(e){return t=>{t(X()),r.default.debug("background.setUseSafeChainsListValidation"),(0,C.callBackgroundMethod)("setUseSafeChainsListValidation",[e],(e=>{t(J()),e&&t(te(e))}))}},n.setUseTokenDetection=function(e){return t=>{t(X()),r.default.debug("background.setUseTokenDetection"),(0,C.callBackgroundMethod)("setUseTokenDetection",[e],(e=>{t(J()),e&&t(te(e))}))}},n.setUseTransactionSimulations=function(e){try{(0,C.submitRequestToBackground)("setUseTransactionSimulations",[e])}catch(e){(0,w.logErrorWithMessage)(e)}},n.setWatchEthereumAccountEnabled=async function(e){try{await(0,C.submitRequestToBackground)("setWatchEthereumAccountEnabled",[e])}catch(e){(0,w.logErrorWithMessage)(e)}},n.setWeb3ShimUsageAlertDismissed=async function(e){await(0,C.submitRequestToBackground)("setWeb3ShimUsageAlertDismissed",[e])},n.showAccountsPage=j,n.showAlert=function(e){return{type:I.ALERT_OPEN,payload:e}},n.showConfTxPage=V,n.showConfirmTurnOffProfileSyncing=function(){return e=>{e(z({name:"CONFIRM_TURN_OFF_PROFILE_SYNCING"}))}},n.showConfirmTurnOnMetamaskNotifications=function(){return e=>{e(z({name:"TURN_ON_METAMASK_NOTIFICATIONS"}))}},n.showDeprecatedNetworkModal=function(){return{type:I.DEPRECATED_NETWORK_POPOVER_OPEN}},n.showImportNftsModal=function(e){return{type:I.IMPORT_NFTS_MODAL_OPEN,payload:e}},n.showImportTokensModal=function(){return{type:I.IMPORT_TOKENS_POPOVER_OPEN}},n.showIpfsModal=function(){return{type:I.SHOW_IPFS_MODAL_OPEN}},n.showKeyringSnapRemovalModal=function(e){return{type:I.SHOW_KEYRING_SNAP_REMOVAL_RESULT,payload:e}},n.showLoadingIndication=X,n.showModal=z,n.showNetworkDropdown=function(){return{type:I.NETWORK_DROPDOWN_OPEN}},n.showNftStillFetchingIndication=Z,n.showPrivateKey=function(e){return{type:I.SHOW_PRIVATE_KEY,payload:e}},n.showQrScanner=function(){return e=>{e(z({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:I.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async n=>{const r=await Se(e,t.fees),a=await Se(e,t.cancelFees,!0);try{return(await(0,C.submitRequestToBackground)("submitSignedTransactions",[{signedTransactions:r,signedCanceledTransactions:a,txParams:e}])).uuid}catch(e){if((0,w.logErrorWithMessage)(e),(0,w.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,E.parseSmartTransactionsError)(e.message);n({type:I.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.stopPollingForQuotes=function(){return async e=>{await(0,C.submitRequestToBackground)("stopPollingForQuotes"),await oe(e)}},n.submitPassword=v,n.submitQRHardwareCryptoAccount=async function(e){await(0,C.submitRequestToBackground)("submitQRHardwareCryptoAccount",[e])},n.submitQRHardwareCryptoHDKey=async function(e){await(0,C.submitRequestToBackground)("submitQRHardwareCryptoHDKey",[e])},n.submitQRHardwareSignature=async function(e,t){await(0,C.submitRequestToBackground)("submitQRHardwareSignature",[e,t])},n.syncInternalAccountsWithUserStorage=function(){return async()=>{try{return await(0,C.submitRequestToBackground)("syncInternalAccountsWithUserStorage")}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.throwTestBackgroundError=async function(e){await(0,C.submitRequestToBackground)("throwTestError",[e])},n.toggleAccountMenu=function(){return{type:I.TOGGLE_ACCOUNT_MENU}},n.toggleExternalServices=function(e){return t=>{r.default.debug("background.toggleExternalServices"),(0,C.callBackgroundMethod)("toggleExternalServices",[e],(e=>{e&&t(te(e))}))}},n.toggleNetworkMenu=function(e){return{type:I.TOGGLE_NETWORK_MENU,payload:e}},n.trackInsightSnapUsage=function(e){return async()=>{await(0,C.submitRequestToBackground)("trackInsightSnapView",[e])}},n.trackMetaMetricsEvent=me,n.trackMetaMetricsPage=function(e,t){return(0,C.submitRequestToBackground)("trackMetaMetricsPage",[{...e,actionId:(0,C.generateActionId)()},t])},n.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{(0,C.callBackgroundMethod)("tryReverseResolveAddress",[e],(e=>{e&&(0,w.logErrorWithMessage)(e),t()}))}))},n.tryUnlockMetamask=function(e){return t=>(t(X()),t(F()),r.default.debug("background.submitPassword"),new Promise(((t,n)=>{(0,C.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))})).then((()=>(t(H()),oe(t)))).then((()=>{t(J())})).catch((e=>(t(W(e.message)),t(J()),Promise.reject(e)))))},n.unMarkPasswordForgotten=q,n.unlockAndGetSeedPhrase=function(e){return async t=>{t(X());try{await v(e);const n=await P(e);return await oe(t),n}catch(e){throw t(te(e)),(0,w.isErrorWithMessage)(e)?new Error(e.message):e}finally{t(J())}}},n.unlockFailed=W,n.unlockHardwareWalletAccounts=function(e,t,n,a){return r.default.debug("background.unlockHardwareWalletAccount",e,t,n,a),async r=>{r(X());for(const o of e)try{await(0,C.submitRequestToBackground)("unlockHardwareWalletAccount",[o,t,n,a])}catch(e){throw(0,w.logErrorWithMessage)(e),r(te(e)),r(J()),e}return r(J()),undefined}},n.unlockInProgress=F,n.unlockSucceeded=H,n.updateAccountsList=function(e){return async()=>{await(0,C.submitRequestToBackground)("updateAccountsList",[e])}},n.updateAndApproveTx=function(e,t,n){return(r,a)=>{!t&&r(X(n));const o=()=>Boolean(a().send.stage!==g.SEND_STAGES.INACTIVE);return new Promise(((t,n)=>{const a=(0,C.generateActionId)();(0,C.callBackgroundMethod)("resolvePendingApproval",[String(e.id),{txMeta:e,actionId:a},{waitForResult:!0}],(a=>{if(r(U(e.id,e.txParams)),o()||r((0,g.resetSendState)()),a)return r(b()),(0,w.logErrorWithMessage)(a),void n(a);t(e)}))})).then((()=>oe(r))).then((()=>(o()||r((0,g.resetSendState)()),r(L(e.id)),r(J()),r(B("")),r(Q()),e))).catch((e=>(r(J()),Promise.reject(e))))}},n.updateCurrentLocale=se,n.updateCustomNonce=B,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:n}){return async r=>{await Promise.all([(0,C.submitRequestToBackground)("setSwapsTxGasLimit",[e]),(0,C.submitRequestToBackground)("setSwapsTxMaxFeePerGas",[t]),(0,C.submitRequestToBackground)("setSwapsTxMaxFeePriorityPerGas",[n])]),await oe(r)}},n.updateDataDeletionTaskStatus=async function(){return await(0,C.submitRequestToBackground)("updateDataDeletionTaskStatus")},n.updateEditableParams=function(e,t){return async n=>{let r;try{r=await(0,C.submitRequestToBackground)("updateEditableParams",[e,t])}catch(e){throw(0,w.logErrorWithMessage)(e),e}return await oe(n),r}},n.updateEventFragment=function(e,t){return(0,C.submitRequestToBackground)("updateEventFragment",[e,t])},n.updateHiddenAccountsList=function(e){return async()=>{await(0,C.submitRequestToBackground)("updateHiddenAccountsList",[e])}},n.updateInterfaceState=function(e,t){return async n=>{await(0,C.submitRequestToBackground)("updateInterfaceState",[e,t]),await oe(n)}},n.updateMetamaskState=G,n.updateNetwork=function(e,t={}){return async n=>{r.default.debug("background.updateNetwork",e);try{return await(0,C.submitRequestToBackground)("updateNetwork",[e.chainId,e,t])}catch(e){(0,w.logErrorWithMessage)(e),n(te("Had a problem updading networks!"))}return undefined}},n.updateNetworksList=function(e){return async()=>{await(0,C.submitRequestToBackground)("updateNetworksList",[e])}},n.updateNftDropDownState=function(e){return async t=>{await(0,C.submitRequestToBackground)("updateNftDropDownState",[e]),await oe(t)}},n.updateOnChainTriggersByAccount=function(e){return async()=>{try{await(0,C.submitRequestToBackground)("updateOnChainTriggersByAccount",[e])}catch(e){throw(0,w.logErrorWithMessage)(e),e}}},n.updatePreviousGasParams=function(e,t){return async()=>{let n;try{n=await(0,C.submitRequestToBackground)("updatePreviousGasParams",[e,t])}catch(e){throw(0,w.logErrorWithMessage)(e),e}return n}},n.updateProposedNames=function(e){return async()=>await(0,C.submitRequestToBackground)("updateProposedNames",[e])},n.updateSmartTransaction=function(e,t){return async n=>{try{await(0,C.submitRequestToBackground)("updateSmartTransaction",[{uuid:e,...t}])}catch(e){if((0,w.logErrorWithMessage)(e),(0,w.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,E.parseSmartTransactionsError)(e.message);n({type:I.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.updateSnap=function(e,t){return async(n,r)=>{await(0,C.submitRequestToBackground)("updateSnap",[e,t]),await oe(n);const a=r(),o=(0,l.getFirstSnapInstallOrUpdateRequest)(a);return null==o?void 0:o.metadata.id}},n.updateSwapsUserFeeLevel=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsUserFeeLevel",[e]),await oe(t)}},n.updateTokenType=async function(e){try{return await(0,C.submitRequestToBackground)("updateTokenType",[e])}catch(e){(0,w.logErrorWithMessage)(e)}return undefined},n.updateTransaction=function(e,t){return async n=>{!t&&n(X());try{await(0,C.submitRequestToBackground)("updateTransaction",[e])}catch(t){throw n(U(e.id,e.txParams)),n(J()),n(b()),(0,w.logErrorWithMessage)(t),t}try{return n(U(e.id,e.txParams)),await oe(n),n(V({id:e.id})),e}finally{n(J())}}},n.updateTransactionGasFees=function(e,t){return async()=>{let n;try{n=await(0,C.submitRequestToBackground)("updateTransactionGasFees",[e,t])}catch(e){throw(0,w.logErrorWithMessage)(e),e}return n}},n.updateTransactionParams=U,n.updateTransactionSendFlowHistory=function(e,t,n){return async()=>{let r;try{r=await(0,C.submitRequestToBackground)("updateTransactionSendFlowHistory",[e,t,n])}catch(e){throw(0,w.logErrorWithMessage)(e),e}return r}},n.updateViewedNotifications=function(e){return(0,C.submitRequestToBackground)("updateViewedNotifications",[e])},n.verifyPassword=D;var r=R(e("loglevel")),a=e("@sentry/browser"),o=e("lodash"),s=e("eth-rpc-errors"),i=e("@metamask/keyring-controller"),c=R(e("../../shared/lib/switch-direction")),u=e("../../shared/constants/app"),d=e("../../app/scripts/lib/util"),l=e("../selectors"),g=e("../ducks/send"),p=e("../ducks/alerts/unconnected-account"),f=e("../ducks/metamask/metamask"),m=e("../../shared/modules/hexstring-utils"),T=e("../../shared/constants/hardware-wallets"),S=e("../../shared/constants/metametrics"),E=e("../pages/swaps/swaps.util"),h=e("../../shared/modules/string-utils"),y=e("../../shared/modules/selectors"),_=e("../helpers/constants/notifications"),A=e("../../shared/modules/i18n"),N=e("../../shared/modules/conversion.utils"),w=e("../../shared/modules/error"),k=e("../../shared/lib/four-byte"),I=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(e("./actionConstants")),C=e("./background-connection");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function R(e){return e&&e.__esModule?e:{default:e}}function b(){return{type:I.GO_HOME}}function v(e){return new Promise(((t,n)=>{(0,C.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))}))}function M(e){return new Promise(((t,n)=>{(0,C.callBackgroundMethod)("createNewVaultAndKeychain",[e],(e=>{e?n(e):t(!0)}))}))}function D(e){return new Promise(((t,n)=>{(0,C.callBackgroundMethod)("verifyPassword",[e],(e=>{e?n(e):t(!0)}))}))}async function P(e){const n=await(0,C.submitRequestToBackground)("getSeedPhrase",[e]);return t.from(n).toString("utf8")}function B(e){return{type:I.UPDATE_CUSTOM_NONCE,value:e}}function L(e){return t=>{t({type:I.COMPLETED_TX,value:{id:e}})}}function U(e,t){return{type:I.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}function q(){return e=>new Promise((e=>{(0,C.callBackgroundMethod)("unMarkPasswordForgotten",[],(()=>{e()}))})).then((()=>oe(e)))}function F(){return{type:I.UNLOCK_IN_PROGRESS}}function W(e){return{type:I.UNLOCK_FAILED,value:e}}function H(e){return{type:I.UNLOCK_SUCCEEDED,value:e}}function G(e){return(t,n)=>{var r,a;const s=n(),i=(0,f.getProviderConfig)(s),{metamask:c}=s;if(null==e||!e.length)return c;const u=function(e,t){const n={...e};for(const e of t){const{op:t,path:r,value:a}=e;if("replace"!==t)throw new Error(`Unsupported patch operation: ${t}`);n[r[0]]=a}return n}(c,e),{currentLocale:d}=c,p=(0,l.getSelectedInternalAccount)(s),m=null==p?void 0:p.address,{currentLocale:T}=u,S=(0,f.getProviderConfig)({metamask:u}),E=(0,l.getSelectedInternalAccount)({metamask:u}),h=null==E?void 0:E.address;d&&T&&d!==T&&t(se(T)),m!==h&&t({type:I.SELECTED_ADDRESS_CHANGED});const y=(null===(r=u.addressBook)||void 0===r?void 0:r[null==S?void 0:S.chainId])??{},_=(null===(a=c.addressBook)||void 0===a?void 0:a[null==i?void 0:i.chainId])??{},A=(0,l.getMetaMaskAccounts)({metamask:u}),N=(0,l.getMetaMaskAccounts)({metamask:c}),w=A[h],k=A[m];return Object.entries(N).forEach((([e,n])=>{(0,o.isEqual)(n,A[e])||t({type:I.ACCOUNT_CHANGED,payload:{account:A[e]}})})),!1===(0,o.isEqual)(k,w)&&t({type:I.SELECTED_ACCOUNT_CHANGED,payload:{account:w}}),!1===(0,o.isEqual)(_,y)&&t({type:I.ADDRESS_BOOK_UPDATED,payload:{addressBook:y}}),!1===(0,o.isEqual)(c.gasFeeEstimates,u.gasFeeEstimates)&&t({type:I.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:u.gasFeeEstimates,gasEstimateType:u.gasEstimateType}}),t({type:I.UPDATE_METAMASK_STATE,value:u}),i.chainId!==S.chainId&&(t({type:I.CHAIN_CHANGED,payload:S.chainId}),t((0,g.initializeSendState)({chainHasChanged:!0}))),u}}const x=()=>new Promise(((e,t)=>{(0,C.callBackgroundMethod)("setLocked",[],(n=>{n?t(n):e()}))}));async function K(e){r.default.debug("background.setSelectedInternalAccount"),await(0,C.submitRequestToBackground)("setSelectedInternalAccount",[e])}function j(){return{type:I.SHOW_ACCOUNTS_PAGE}}function V({id:e}={}){return{type:I.SHOW_CONF_TX_PAGE,id:e}}function Y(e){return async t=>{await(0,C.submitRequestToBackground)("setSwitchedNetworkDetails",[e]),await oe(t)}}async function $(e){r.default.debug(`background.setActiveNetworkConfigurationId: ${e}`),await(0,C.submitRequestToBackground)("setActiveNetworkConfigurationId",[e])}function z(e){return{type:I.MODAL_OPEN,payload:e}}function Q(){return(e,t)=>{const n=t(),r=(0,l.getApprovalFlows)(n);(0,d.getEnvironmentType)()!==u.ENVIRONMENT_TYPE_NOTIFICATION||(0,l.hasTransactionPendingApprovals)(n)||(0,l.getIsSigningQRHardwareTransaction)(n)||0!==r.length||fe()}}function X(e){return{type:I.SHOW_LOADING,payload:e}}function Z(){return{type:I.SHOW_NFT_STILL_FETCHING_INDICATION}}function J(){return{type:I.HIDE_LOADING}}function ee(){return{type:I.HIDE_NFT_STILL_FETCHING_INDICATION}}function te(e){return(0,w.isErrorWithMessage)(e)?{type:I.DISPLAY_WARNING,payload:e.message}:"string"==typeof e?{type:I.DISPLAY_WARNING,payload:e}:{type:I.DISPLAY_WARNING,payload:`${e}`}}function ne(e,t){return n=>(n(X()),new Promise(((r,a)=>{(0,C.callBackgroundMethod)("setPreference",[e,t],((e,t)=>{if(n(J()),e)return n(te(e)),void a(e);r(t)}))})))}function re(){return{type:I.COMPLETE_ONBOARDING}}function ae(){return{type:I.RESET_ONBOARDING}}async function oe(e){let t;try{t=await(0,C.submitRequestToBackground)("getStatePatches")}catch(t){throw e(te(t)),t}return e(G(t))}function se(e){return async t=>{t(X());try{await(0,A.loadRelativeTimeFormatLocaleData)(e);const n=await(0,A.fetchLocale)(e),r=await(0,C.submitRequestToBackground)("setCurrentLocale",[e]);(0,c.default)(r),t(ie(e,n))}catch(e){return void t(te(e))}finally{t(J())}}}function ie(e,t){return{type:I.SET_CURRENT_LOCALE,payload:{locale:e,messages:t}}}function ce(e){return t=>(r.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,r)=>{(0,C.callBackgroundMethod)("setSeedPhraseBackedUp",[e],(e=>{if(e)return t(te(e)),void r(e);oe(t).then(n).catch(r)}))})))}function ue(e){return{type:I.SET_NEXT_NONCE,payload:e}}function de(e){return{type:I.SET_REQUEST_ACCOUNT_TABS,payload:e}}function le(e){return{type:I.SET_OPEN_METAMASK_TAB_IDS,payload:e}}async function ge(e){return(0,C.submitRequestToBackground)("addPollingTokenToAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,d.getEnvironmentType)()]])}async function pe(e){return(0,C.submitRequestToBackground)("removePollingTokenFromAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,d.getEnvironmentType)()]])}async function fe(){await(0,C.submitRequestToBackground)("markNotificationPopupAsAutomaticallyClosed"),global.platform.closeCurrentWindow()}function me(e,t){return(0,C.submitRequestToBackground)("trackMetaMetricsEvent",[{...e,actionId:(0,C.generateActionId)()},t])}async function Te(e){await(0,C.submitRequestToBackground)("setUnconnectedAccountAlertShown",[e])}const Se=async(e,t,n)=>{const r=t.map((t=>{const r={...e,maxFeePerGas:(0,N.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,N.decimalToHex)(t.maxPriorityFeePerGas),gas:n?(0,N.decimalToHex)(21e3):e.gas,value:e.value};return n&&(r.to=r.from,r.data="0x"),r}));return await(0,C.submitRequestToBackground)("approveTransactionsWithSameNonce",[r])}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/store/actions.ts"}],[6478,{pify:4300},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.generateActionId=n.callBackgroundMethod=void 0,n.setBackgroundConnection=async function(e){o=e,s=(0,a.default)(o)},n.submitRequestToBackground=function(e,t){var n;return null===(n=s)||void 0===n?void 0:n[e](...t??[])};var r,a=(r=e("pify"))&&r.__esModule?r:{default:r};let o=null,s=null;n.generateActionId=()=>Date.now()+Math.random();n.callBackgroundMethod=(e,t,n)=>{var r;null===(r=o)||void 0===r||r[e](...t,n)}}}},{package:"$root$",file:"ui/store/background-connection.ts"}],[648,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=void 0;n.DataItem=class{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=undefined},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/DataItem.js"}],[649,{"./DataItem":648,buffer:3319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){!function(e,n){"function"==typeof define&&define.amd?define([],n):void 0!==t&&t.exports?t.exports=n():e.CBOR=n()}(this,(function(){const{DataItem:t}=e("./DataItem");var r=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",n=0;n<this.$hex.length;n+=2)t+="%"+this.$hex.substring(n,n+2);return decodeURIComponent(t)}if("latin"===e){for(t=[],n=0;n<this.$hex.length;n+=2)t.push(parseInt(this.$hex.substring(n,n+2),16));return String.fromCharCode.apply(String,t)}throw new Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var n="",r=0;r<t.length;r++){var a=t.charCodeAt(r).toString(16);1===a.length&&(a="0"+a),n+=a}return new e(n)},e.fromUtf8String=function(t){for(var n=encodeURIComponent(t),r="",a=0;a<n.length;a++)if("%"===n.charAt(a))r+=n.substring(a+1,a+3),a+=2;else{var o=n.charCodeAt(a).toString(16);o.length<2&&(o="0"+o),r+=o}return new e(r)};var r=[],a={},o=function(e){return function(){throw new Error(e+" not implemented")}};function s(){}function i(){}function c(e,t){var n=e.value;return n<24?n:24==n?t.readByte():25==n?t.readUint16():26==n?t.readUint32():27==n?t.readUint64():31==n?null:void o("Additional info: "+n)()}function u(e,t,n){var r=e<<5;t<24?n.writeByte(r|t):t<256?(n.writeByte(24|r),n.writeByte(t)):t<65536?(n.writeByte(25|r),n.writeUint16(t)):t<4294967296?(n.writeByte(26|r),n.writeUint32(t)):(n.writeByte(27|r),n.writeUint64(t))}s.prototype={peekByte:o("peekByte"),readByte:o("readByte"),readChunk:o("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,n=1023&e,r=32768&e;if(31===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-25)*(1024+n):Math.pow(2,-24)*n;return r?-a:a},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,n=8388607&e,r=2147483648&e;if(255===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-23-127)*(8388608+n):Math.pow(2,-149)*n;return r?-a:a},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,n=4294967296*(1048575&e)+this.readUint32(),r=2147483648&e;if(2047===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-52-1023)*(4503599627370496+n):Math.pow(2,-1074)*n;return r?-a:a},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},i.prototype={writeByte:o("writeByte"),result:o("result"),writeFloat16:o("writeFloat16"),writeFloat32:o("writeFloat32"),writeFloat64:o("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:o("writeString"),canWriteBinary:function(e){return!1},writeBinary:o("writeChunk")};var d=new Error;function l(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return c(t,e);case 1:return-1-c(t,e);case 2:return e.readChunk(c(t,e));case 3:return e.readChunk(c(t,e)).toString("utf-8");case 4:case 5:var n=c(t,e),r=[];if(null!==n){5===t.type&&(n*=2);for(var o=0;o<n;o++)r[o]=l(e)}else for(var s;(s=l(e))!==d;)r.push(s);if(5===t.type){var i={};for(o=0;o<r.length;o+=2)i[r[o]]=r[o+1];return i}return r;case 6:var u=c(t,e),g=a[u];r=l(e);return g?g(r):r;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(c(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return undefined;case null:return d;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function g(e,t){for(var n=0;n<r.length;n++){var a=r[n].fn(e);if(a!==undefined)return u(6,r[n].tag,t),g(a,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,t);else if(!0===e)u(7,21,t);else if(null===e)u(7,22,t);else if(e===undefined)u(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?u(1,-1-e,t):u(0,e,t):(!function(e,t,n){n.writeByte(e<<5|t)}(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,(function(e){u(3,e,t)}));else if(t.canWriteBinary(e))t.writeBinary(e,(function(e){u(2,e,t)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(m.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){u(4,e.length,t);for(n=0;n<e.length;n++)g(e[n],t)}else{var o=Object.keys(e);u(5,o.length,t);for(n=0;n<o.length;n++){const r=parseInt(o[n]);isNaN(r)?(g(o[n],t),g(e[o[n]],t)):(g(r,t),g(e[o[n]],t))}}}}var p=[],f=[],m={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?f.push((function(n){if(e===n)return t(n)})):f.push(e)},addReader:function(e,t){"string"==typeof e?p.push((function(n,r){if(e===r)return t(n,r)})):p.push(e)},encode:function(e,t){for(var n=0;n<f.length;n++){var r=(0,f[n])(t);if(r)return g(e,r),r.result()}throw new Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var n=0;n<f.length;n++){var r=(0,f[n])(t);if(r)return e.getTag()!==undefined?(g(e,r),r.result()):(g(e.getData(),r),r.result())}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var n=0;n<p.length;n++){var r=(0,p[n])(e,t);if(r)return l(r)}throw new Error("Unsupported input format: "+t)},decodeToDataItem:function(e,n){for(var r=0;r<p.length;r++){var a=(0,p[r])(e,n);if(a){const e=l(a);return e instanceof t?e:new t(e)}}throw new Error("Unsupported input format: "+n)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return r.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return a[e]=t,this}};function T(e){this.buffer=e,this.pos=0}function S(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function E(e){this.hex=e,this.pos=0}function h(e){this.$hex="",this.finalFormat=e||"hex"}return T.prototype=Object.create(s.prototype),T.prototype.peekByte=function(){return this.buffer[this.pos]},T.prototype.readByte=function(){return this.buffer[this.pos++]},T.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},T.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},T.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},T.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},T.prototype.readChunk=function(e){var t=n.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},S.prototype=Object.create(i.prototype),S.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},S.prototype.writeFloat32=function(e){var t=n.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},S.prototype.writeFloat64=function(e){var t=n.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},S.prototype.writeString=function(e,t){var r=n.from(e,"utf-8");t(r.length),this.writeBuffer(r)},S.prototype.canWriteBinary=function(e){return e instanceof n},S.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},S.prototype.writeBuffer=function(e){if(!(e instanceof n))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},S.prototype.result=function(){for(var e=n.alloc(this.byteLength),t=0,r=0;r<this.completeBuffers.length;r++){var a=this.completeBuffers[r];a.copy(e,t,0,a.length),t+=a.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof n&&(m.addReader((function(e,t){return n.isBuffer(e)?new T(e):"hex"===t||"base64"===t?new T(n.from(e,t)):void 0})),m.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new S(e):void 0:new S}))),E.prototype=Object.create(s.prototype),E.prototype.peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},E.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},E.prototype.readChunk=function(t){var r=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof n?n.from(r,"hex"):new e(r)},h.prototype=Object.create(i.prototype),h.prototype.writeByte=function(e){if(e<0||e>255)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},h.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof n&&t instanceof n},h.prototype.writeBinary=function(t,r){if(t instanceof e)r(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof n&&t instanceof n))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");r(t.length),this.$hex+=t.toString("hex")}},h.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof n?n.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},h.prototype.writeString=function(t,n){var r=e.fromUtf8String(t);n(r.length()),this.$hex+=r.$hex},m.addReader((function(t,n){return t instanceof e||t.$hex?new E(t.$hex):"hex"===n?new E(t):void 0})),m.addWriter((function(e){if("hex"===e)return new h})),m}();return r.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),r}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/cbor-sync.js"}],[650,{"./DataItem":648,"./cbor-sync":649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=n.addWriter=n.addReader=n.addSemanticEncode=n.addSemanticDecode=n.decodeToDataItem=n.encodeDataItem=void 0;var r=e("./cbor-sync");Object.defineProperty(n,"encodeDataItem",{enumerable:!0,get:function(){return r.encodeDataItem}}),Object.defineProperty(n,"decodeToDataItem",{enumerable:!0,get:function(){return r.decodeToDataItem}}),Object.defineProperty(n,"addSemanticDecode",{enumerable:!0,get:function(){return r.addSemanticDecode}}),Object.defineProperty(n,"addSemanticEncode",{enumerable:!0,get:function(){return r.addSemanticEncode}}),Object.defineProperty(n,"addReader",{enumerable:!0,get:function(){return r.addReader}}),Object.defineProperty(n,"addWriter",{enumerable:!0,get:function(){return r.addWriter}});var a=e("./DataItem");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return a.DataItem}})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/index.js"}],[651,{"./RegistryType":640,"./ScriptExpression":641,"./utils":653},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./utils"),a=e("./RegistryType"),o=e("./ScriptExpression"),s=Object.values(a.RegistryTypes).filter((e=>!!e.getTag())).map((e=>e.getTag())),i=Object.values(o.ScriptExpressions).map((e=>e.getTag()));(0,r.patchTags)(s.concat(i))}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/patchCBOR.js"}],[652,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/types.js"}],[653,{"./lib":650},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.patchTags=void 0;const r=e("./lib"),a=[];n.patchTags=e=>{e.forEach((e=>{a.find((t=>t===e))||((0,r.addSemanticEncode)(e,(t=>{if(t instanceof r.DataItem&&t.getTag()===e)return t.getData()})),(0,r.addSemanticDecode)(e,(t=>new r.DataItem(t,e))),a.push(e))}))}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/utils.js"}],[7,{"../../../shared/modules/object.utils":4877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SENTRY_UI_STATE=n.SENTRY_BACKGROUND_STATE=n.MMI_SENTRY_BACKGROUND_STATE=void 0;var r=e("../../../shared/modules/object.utils");n.MMI_SENTRY_BACKGROUND_STATE={MMIController:{opts:!0},CustodyController:{store:!0},MmiConfigurationController:{store:!0,configurationClient:!0}};const a=n.SENTRY_BACKGROUND_STATE={AccountsController:{internalAccounts:{accounts:!1,selectedAccount:!1}},AccountTracker:{accounts:!1,accountsByChainId:!1,currentBlockGasLimit:!0,currentBlockGasLimitByChainId:!0},AddressBookController:{addressBook:!1},AlertController:{alertEnabledness:!0,unconnectedAccountAlertShownOrigins:!1,web3ShimUsageOrigins:!1},AnnouncementController:{announcements:!1},AuthenticationController:{isSignedIn:!1},NetworkOrderController:{orderedNetworkList:[]},AccountOrderController:{pinnedAccountList:[],hiddenAccountList:[]},AppMetadataController:{currentAppVersion:!0,currentMigrationVersion:!0,previousAppVersion:!0,previousMigrationVersion:!0},ApprovalController:{approvalFlows:!1,pendingApprovals:!1,pendingApprovalCount:!1},AppStateController:{browserEnvironment:!0,connectedStatusPopoverHasBeenShown:!0,currentPopupId:!1,onboardingDate:!1,currentExtensionPopupId:!1,defaultHomeActiveTabName:!0,fullScreenGasPollTokens:!0,hadAdvancedGasFeesSetPriorToMigration92_3:!0,nftsDetectionNoticeDismissed:!0,nftsDropdownState:!0,notificationGasPollTokens:!0,outdatedBrowserWarningLastShown:!0,popupGasPollTokens:!0,qrHardware:!0,recoveryPhraseReminderHasBeenShown:!0,recoveryPhraseReminderLastShown:!0,showBetaHeader:!0,showPermissionsTour:!0,showNetworkBanner:!0,showAccountBanner:!0,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,showTestnetMessageInDropdown:!0,surveyLinkLastClickedOrClosed:!0,snapsInstallPrivacyWarningShown:!0,termsOfUseLastAgreed:!0,timeoutMinutes:!0,trezorModel:!0,usedNetworks:!0},MultichainBalancesController:{balances:!1},BridgeController:{bridgeState:{bridgeFeatureFlags:{extensionSupport:!1,destNetworkAllowlist:[],srcNetworkAllowlist:[]}}},CronjobController:{jobs:!1},CurrencyController:{currentCurrency:!0,currencyRates:!0},DecryptMessageController:{unapprovedDecryptMsgs:!1,unapprovedDecryptMsgCount:!0},EncryptionPublicKeyController:{unapprovedEncryptionPublicKeyMsgs:!1,unapprovedEncryptionPublicKeyMsgCount:!0},EnsController:{ensResolutionsByAddress:!1,ensEntries:!1},GasFeeController:{estimatedGasFeeTimeBounds:!0,gasEstimateType:!0,gasFeeEstimates:!0,gasFeeEstimatesByChainId:!0,nonRPCGasFeeApisDisabled:!1},KeyringController:{isUnlocked:!0,keyrings:!1},LoggingController:{logs:!1},NotificationServicesController:{subscriptionAccountsSeen:!1,isMetamaskNotificationsFeatureSeen:!1,isNotificationServicesEnabled:!1,isFeatureAnnouncementsEnabled:!1,metamaskNotificationsList:!1,metamaskNotificationsReadList:!1,isCheckingAccountsPresence:!1,isFetchingMetamaskNotifications:!1,isUpdatingMetamaskNotifications:!1,isUpdatingMetamaskNotificationsAccount:!1},MetaMetricsController:{eventsBeforeMetricsOptIn:!1,fragments:!1,metaMetricsId:!0,participateInMetaMetrics:!0,previousUserTraits:!1,segmentApiCalls:!1,traits:!1,dataCollectionForMarketing:!1,marketingCampaignCookieId:!0,latestNonAnonymousEventTimestamp:!0},MetaMetricsDataDeletionController:{metaMetricsDataDeletionId:!0,metaMetricsDataDeletionTimestamp:!0},NameController:{names:!1,nameSources:!1,useExternalNameSources:!1},NetworkController:{networkConfigurations:!1,networksMetadata:!0,selectedNetworkClientId:!1},NftController:{allNftContracts:!1,allNfts:!1,ignoredNfts:!1},NotificationController:{notifications:!1},OnboardingController:{completedOnboarding:!0,firstTimeFlowType:!0,onboardingTabs:!1,seedPhraseBackedUp:!0},PPOMController:{securityAlertsEnabled:!1,storageMetadata:[],versionInfo:[]},PermissionController:{subjects:!1},PermissionLogController:{permissionActivityLog:!1,permissionHistory:!1},PhishingController:{},PreferencesController:{advancedGasFee:!0,currentLocale:!0,dismissSeedBackUpReminder:!0,featureFlags:!0,forgottenPassword:!0,identities:!1,incomingTransactionsPreferences:!0,isIpfsGatewayEnabled:!1,ipfsGateway:!1,knownMethodData:!1,ledgerTransportType:!0,lostIdentities:!1,openSeaEnabled:!0,preferences:{autoLockTimeLimit:!0,hideZeroBalanceTokens:!0,redesignedConfirmationsEnabled:!0,redesignedTransactionsEnabled:!1,isRedesignedConfirmationsDeveloperEnabled:!1,showExtensionInFullSizeView:!0,showFiatInTestnets:!0,showTestNetworks:!0,smartTransactionsOptInStatus:!0,useNativeCurrencyAsPrimaryCurrency:!0,petnamesEnabled:!0,showConfirmationAdvancedDetails:!0},useExternalServices:!1,selectedAddress:!1,snapRegistryList:!1,theme:!0,signatureSecurityAlertResponses:!1,use4ByteResolution:!0,useAddressBarEnsResolution:!0,useBlockie:!0,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,useNftDetection:!0,useNonceField:!0,usePhishDetect:!0,useTokenDetection:!0,useRequestQueue:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0},NotificationServicesPushController:{fcmToken:!1},MultichainRatesController:{fiatCurrency:!0,rates:!0,cryptocurrencies:!0},QueuedRequestController:{queuedRequestCount:!0},SelectedNetworkController:{domains:!1},SignatureController:{unapprovedPersonalMsgCount:!0,unapprovedPersonalMsgs:!1,unapprovedTypedMessages:!1,unapprovedTypedMessagesCount:!0},SmartTransactionsController:{smartTransactionsState:{fees:{approvalTxFees:!0,tradeTxFees:!0},liveness:!0,smartTransactions:!1,userOptIn:!0,userOptInV2:!0}},SnapController:{snaps:!1},SnapInterfaceController:{interfaces:!1},SnapInsightsController:{insights:!1},SnapsRegistry:{database:!1,lastUpdated:!1,databaseUnavailable:!1},SubjectMetadataController:{subjectMetadata:!1},SwapsController:{swapsState:{approveTxId:!1,customApproveTxData:!1,customGasPrice:!0,customMaxFeePerGas:!0,customMaxGas:!0,customMaxPriorityFeePerGas:!0,errorKey:!0,fetchParams:!0,quotes:!1,quotesLastFetched:!0,quotesPollingLimitEnabled:!0,routeState:!0,saveFetchedQuotes:!0,selectedAggId:!0,swapsFeatureFlags:!0,swapsFeatureIsLive:!0,swapsQuotePrefetchingRefreshTime:!0,swapsQuoteRefreshTime:!0,swapsStxBatchStatusRefreshTime:!0,swapsStxStatusDeadline:!0,swapsStxGetTransactionsRefreshTime:!0,swapsStxMaxFeeMultiplier:!0,swapsUserFeeLevel:!0,tokens:!1,topAggId:!1,tradeTxId:!1}},TokenDetectionController:{[r.AllProperties]:!1},TokenListController:{preventPollingOnNetworkRestart:!0,tokenList:!1,tokensChainsCache:{[r.AllProperties]:!1}},TokenRatesController:{marketData:!1},TokensController:{allDetectedTokens:{[r.AllProperties]:!1},allIgnoredTokens:{[r.AllProperties]:!1},allTokens:{[r.AllProperties]:!1},detectedTokens:!1,ignoredTokens:!1,tokens:!1},TransactionController:{transactions:!1,lastFetchedBlockNumbers:!1,methodData:!1},TxController:{transactions:!1},UserOperationController:{userOperations:!1},UserStorageController:{isProfileSyncingEnabled:!0,isProfileSyncingUpdateLoading:!1}},o=Object.values(a).reduce(((e,t)=>({...e,...t})),{});n.SENTRY_UI_STATE={gas:!0,history:!0,metamask:{...o,isInitialized:!0,customNonceValue:!0,isAccountMenuOpen:!0,isNetworkMenuOpen:!0,nextNonce:!0,pendingTokens:!1,welcomeScreenSeen:!0,confirmationExchangeRates:!0,useSafeChainsListValidation:!0,watchEthereumAccountEnabled:!1,bitcoinSupportEnabled:!1,bitcoinTestnetSupportEnabled:!1,addSnapAccountEnabled:!1,snapsAddSnapAccountModalDismissed:!1,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,newPrivacyPolicyToastClickedOrClosed:!1,newPrivacyPolicyToastShownDate:!1},unconnectedAccount:!0}}}},{package:"$root$",file:"app/scripts/constants/sentry-state.ts"}],[73,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(e.includes(r)){const t=e.slice(r.length);return t.slice(t.indexOf(a)+a.length)}return e};const r="Error: [ethjs-rpc] rpc error with payload ",a="Error: "}}},{package:"$root$",file:"app/scripts/lib/extractEthjsErrorMessage.js"}],[74,{"../../_locales/index.json":3,"webextension-polyfill":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(){let e;try{e=await r.default.i18n.getAcceptLanguages()}catch(t){e=[]}e||(e=[]);let t=e.map((e=>e.toLowerCase().replace("_","-"))).find((e=>s[e]!==undefined||s[e.split("-")[0]]!==undefined));t!==undefined&&s[t]===undefined&&(t=t.split("-")[0]);return s[t]||"en"};var r=o(e("webextension-polyfill")),a=o(e("../../_locales/index.json"));function o(e){return e&&e.__esModule?e:{default:e}}const s={zh:"zh_CN"};a.default.forEach((e=>{e&&e.code&&(s[e.code.toLowerCase().replace("_","-")]=e.code)}))}}},{package:"$root$",file:"app/scripts/lib/get-first-preferred-lang-code.js"}],[77,{"../../../shared/modules/browser-runtime.utils":4861,"@sentry/browser":2639,loglevel:4170,"webextension-polyfill":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("webextension-polyfill")),a=i(e("loglevel")),o=e("@sentry/browser"),s=e("../../../shared/modules/browser-runtime.utils");function i(e){return e&&e.__esModule?e:{default:e}}n.default=class{constructor(){this.isSupported=Boolean(r.default.storage.local),this.isSupported||a.default.error("Storage local API not available."),this.dataPersistenceFailing=!1,this.mostRecentRetrievedState=null,this.isExtensionInitialized=!1}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');try{await this._set({data:e,meta:this.metadata}),this.dataPersistenceFailing&&(this.dataPersistenceFailing=!1)}catch(e){this.dataPersistenceFailing||(this.dataPersistenceFailing=!0,(0,o.captureException)(e)),a.default.error("error setting state in local store:",e)}finally{this.isExtensionInitialized=!0}}async get(){if(!this.isSupported)return undefined;const e=await this._get();return t=e,0===Object.keys(t).length?(this.mostRecentRetrievedState=null,undefined):(this.isExtensionInitialized||(this.mostRecentRetrievedState=e),e);var t}_get(){const{local:e}=r.default.storage;return new Promise(((t,n)=>{e.get(null).then((e=>{const r=(0,s.checkForLastError)();r?n(r):t(e)}))}))}_set(e){const{local:t}=r.default.storage;return new Promise(((n,r)=>{t.set(e).then((()=>{const e=(0,s.checkForLastError)();e?r(e):n()}))}))}cleanUpMostRecentRetrievedState(){this.mostRecentRetrievedState&&(this.mostRecentRetrievedState=null)}}}}},{package:"$root$",file:"app/scripts/lib/local-store.js"}],[78,{"webextension-polyfill":4794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getManifestFlags=function(){return a.default.runtime.getManifest()._flags||{}};var r,a=(r=e("webextension-polyfill"))&&r.__esModule?r:{default:r}}}},{package:"$root$",file:"app/scripts/lib/manifestFlags.ts"}],[82,{"../../../../shared/modules/hexstring-utils":4872,"@metamask/eth-sig-util":1377,"@metamask/utils":2530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEthAddress=s,n.normalizeAddress=function(e){return s(e)?(0,a.normalize)(e):e},n.normalizeSafeAddress=function(e){return s(e)?(0,o.toChecksumHexAddress)(e):e};var r=e("@metamask/utils"),a=e("@metamask/eth-sig-util"),o=e("../../../../shared/modules/hexstring-utils");function s(e){return(0,r.isValidHexAddress)(e)}}}},{package:"$root$",file:"app/scripts/lib/multichain/address.ts"}],[83,{"../../../shared/modules/fetch-with-timeout":4870,loglevel:4170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("loglevel"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=(0,a(e("../../../shared/modules/fetch-with-timeout")).default)();n.default=class{constructor(){o(this,"isSupported",!0),this._initialized=!1,this._initializing=this._init(),this._state=undefined,this.mostRecentRetrievedState=null}async _init(){try{const e=await s("http://localhost:12345/state.json");e.ok&&(this._state=await e.json())}catch(e){r.default.debug(`Error loading network state: '${e.message}'`)}finally{this._initialized=!0}}async get(){return this._initialized||await this._initializing,this.mostRecentRetrievedState||(this.mostRecentRetrievedState=this._state),this._state}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');this._initialized||await this._initializing,this._state={data:e,meta:this._metadata}}cleanUpMostRecentRetrievedState(){this.mostRecentRetrievedState&&(this.mostRecentRetrievedState=null)}}}}},{package:"$root$",file:"app/scripts/lib/network-store.js"}]],[],{});